var ye=Object.defineProperty;var re=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var ie=(o,e,r)=>e in o?ye(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r,K=(o,e)=>{for(var r in e||(e={}))ke.call(e,r)&&ie(o,r,e[r]);if(re)for(var r of re(e))we.call(e,r)&&ie(o,r,e[r]);return o};import{o as l,c as d,a as t,w as _,v as O,F as E,r as x,n as b,t as v,b as c,d as q,e as J,f as u,g as M,h as w,i as U,j as T,k as W,l as k,m as Te,p as le,q as A,C as ae,D as ne,s as F,u as ce,T as z,x as Be,y as Z,z as Ee,A as xe,B as Oe,E as Me,G as Se,U as Ue,H as Ae}from"./vendor.6528daaa.js";const Le=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))h(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&h(n)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function h(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}};Le();var y=(o,e)=>{const r=o.__vccOpts||o;for(const[h,i]of e)r[h]=i;return r};const De={name:"search",data(){return{filterBy:{txt:""}}},methods:{setFilter(){this.$emit("setFilter",K({},this.filterBy))}}},Ne={class:"search-main"},Ie={class:"search-box",for:"search"},Fe=t("svg",{width:"20",height:"20",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.5 18C6.35786 18 3 14.6421 3 10.5C3 6.35786 6.35786 3 10.5 3C14.6421 3 18 6.35786 18 10.5C18 12.2269 17.4164 13.8175 16.4356 15.0852L20.3769 19.0953C20.764 19.4892 20.7586 20.1223 20.3647 20.5095C19.9708 20.8966 19.3376 20.8911 18.9505 20.4972L15.0129 16.4909C13.7572 17.4383 12.1942 18 10.5 18ZM16 10.5C16 13.5376 13.5376 16 10.5 16C7.46243 16 5 13.5376 5 10.5C5 7.46243 7.46243 5 10.5 5C13.5376 5 16 7.46243 16 10.5Z",fill:"currentColor"})],-1);function Je(o,e,r,h,i,s){return l(),d("section",Ne,[t("label",Ie,[_(t("input",{type:"search",name:"search",id:"search",placeholder:"Search","onUpdate:modelValue":e[0]||(e[0]=n=>i.filterBy.txt=n),onInput:e[1]||(e[1]=(...n)=>s.setFilter&&s.setFilter(...n))},null,544),[[O,i.filterBy.txt]]),Fe])])}var ue=y(De,[["render",Je]]);const Pe={props:{boards:{type:Array,required:!0}},methods:{closeModal(){this.$emit("close")},goToDetails(o){this.$emit("close"),this.$router.push(`/board/${o._id}`)}},computed:{loggedinUser(){return this.$store.getters.loggedinUser},starredBoards(){if(this.$store.getters.boards&&this.loggedinUser)return JSON.parse(JSON.stringify(this.$store.getters.boards)).filter(e=>e.isStarred&&e.members.some(r=>r._id===this.loggedinUser._id))}}},Re={class:"starred-boards-modal"},Ge={class:"starred-boards-header"},je=t("div",{class:"header-text-starred-boards-modal"},[t("h1",null,"Starred boards")],-1),We=t("span",{class:"icon-sm icon-closed"},null,-1),Ve=[We],ze={class:"modal-starred-boards-list"},He={class:"modal-starred-board-list"},Ke=["onClick","board"],Ze={class:"modal-starred-board"};function qe(o,e,r,h,i,s){return l(),d("div",Re,[t("div",Ge,[je,t("div",{class:"header-close-starred-boards-modal",onClick:e[0]||(e[0]=(...n)=>s.closeModal&&s.closeModal(...n))},Ve)]),t("div",ze,[t("div",He,[(l(!0),d(E,null,x(s.starredBoards,n=>(l(),d("div",{class:"boards-render-modal-starred",onClick:a=>s.goToDetails(n),board:n,key:n},[t("div",{class:"board-background-starred-modal",style:b(n.background?{backgroundColor:n.background}:{"background-image":`url(${n.backgroundThumb})`})},null,4),t("div",Ze,v(n.title),1)],8,Ke))),128))])])])}var he=y(Pe,[["render",qe]]);const $e={props:{boards:{type:Array,required:!0}},methods:{closeModal(){this.$emit("close")},goToDetails(o){this.$emit("close"),this.$router.push(`/board/${o._id}`)}},computed:{loggedinUser(){return this.$store.getters.loggedinUser},recentBoardsForDisplay(){if(this.$store.getters.boards&&this.loggedinUser)return JSON.parse(JSON.stringify(this.$store.getters.boards)).filter(r=>!r.isTemplate&&r.members.some(h=>h._id===this.loggedinUser._id)).sort((r,h)=>h.lastTimeWatched-r.lastTimeWatched)}}},Ye={class:"starred-boards-modal"},Xe={class:"starred-boards-header"},Qe=t("div",{class:"header-text-starred-boards-modal"},[t("h1",null,"Recent boards")],-1),et=t("span",{class:"icon-sm icon-closed"},null,-1),tt=[et],st={class:"modal-starred-boards-list"},ot={class:"modal-starred-board-list"},rt=["onClick","board"],it={class:"modal-starred-board"};function lt(o,e,r,h,i,s){return l(),d("div",Ye,[t("div",Xe,[Qe,t("div",{class:"header-close-starred-boards-modal",onClick:e[0]||(e[0]=(...n)=>s.closeModal&&s.closeModal(...n))},tt)]),t("div",st,[t("div",ot,[(l(!0),d(E,null,x(s.recentBoardsForDisplay,n=>(l(),d("div",{class:"boards-render-modal-starred",onClick:a=>s.goToDetails(n),board:n,key:n},[t("div",{class:"board-background-starred-modal",style:b(n.background?{backgroundColor:n.background}:{"background-image":`url(${n.backgroundThumb})`})},null,4),t("div",it,v(n.title),1)],8,rt))),128))])])])}var me=y($e,[["render",lt]]);const dt={props:{},data(){return{user:{username:"Guest-user",password:"123"}}},computed:{loggedinUser(){return this.$store.getters.loggedinUser}},methods:{closeModal(){this.$emit("close")},logout(){this.$emit("close"),this.$store.dispatch({type:"login",user:this.user}),this.$router.push("/")},login(){this.$emit("close"),this.$router.push("/login")},setMemberLetters(o){return o.split(" ").map(r=>r[0]).join("").toUpperCase()}}},at={class:"user-boards-modal"},nt={class:"user-boards-header"},ct=t("div",{class:"header-text-user-boards-modal"},[t("h1",null,"Account")],-1),ut=t("span",{class:"icon-sm icon-closed"},null,-1),ht=[ut],mt={class:"user-info-modal"},pt={key:0,class:"user-avatar-in-modal"},gt=["src"],vt={key:1,class:"user-avatar"},bt={key:1,class:"user-avatar-in-modal"},_t={key:2,class:"user-details"},ft={key:3,class:"user-details"},Ct=t("hr",null,null,-1);function yt(o,e,r,h,i,s){return l(),d("div",at,[t("div",nt,[ct,t("div",{class:"header-close-user-boards-modal",onClick:e[0]||(e[0]=(...n)=>s.closeModal&&s.closeModal(...n))},ht)]),t("div",mt,[s.loggedinUser?(l(),d("div",pt,[s.loggedinUser.imgUrl?(l(),d("img",{key:0,src:s.loggedinUser.imgUrl,alt:""},null,8,gt)):(l(),d("div",vt,v(s.loggedinUser?s.setMemberLetters(s.loggedinUser.fullname):"GU"),1))])):c("",!0),s.loggedinUser?c("",!0):(l(),d("div",bt,"GU")),s.loggedinUser?(l(),d("div",_t,v(s.loggedinUser.username),1)):c("",!0),s.loggedinUser?c("",!0):(l(),d("div",ft,"Guest User"))]),Ct,!s.loggedinUser||s.loggedinUser._id==="624559a71ec4197167765f73"?(l(),d("div",{key:0,onClick:e[1]||(e[1]=(...n)=>s.login&&s.login(...n)),class:"login"},"Log in")):c("",!0),s.loggedinUser&&s.loggedinUser._id!=="624559a71ec4197167765f73"?(l(),d("div",{key:1,onClick:e[2]||(e[2]=(...n)=>s.logout&&s.logout(...n)),class:"logout"},"Log out")):c("",!0)])}var kt=y(dt,[["render",yt]]);const wt={props:{boards:{type:Array,required:!0}},methods:{closeModal(){this.$emit("close")},goToDetails(o){this.$emit("close"),this.$router.push(`/board/${o._id}`)}},computed:{templateBoards(){return this.$store.getters.templates}}},Tt={class:"template-boards-modal"},Bt={class:"template-boards-header"},Et=t("div",{class:"header-text-template-boards-modal"},[t("h1",null,"Templates")],-1),xt=t("span",{class:"icon-sm icon-closed"},null,-1),Ot=[xt],Mt={class:"modal-template-boards-list"},St={class:"modal-template-board-list"},Ut=["onClick","board"],At={class:"modal-template-board"};function Lt(o,e,r,h,i,s){return l(),d("div",Tt,[t("div",Bt,[Et,t("div",{class:"header-close-template-boards-modal",onClick:e[0]||(e[0]=(...n)=>s.closeModal&&s.closeModal(...n))},Ot)]),t("div",Mt,[t("div",St,[(l(!0),d(E,null,x(s.templateBoards,n=>(l(),d("div",{class:"boards-render-modal-template",onClick:a=>s.goToDetails(n),board:n,key:n},[t("div",{class:"board-background-template-modal",style:b(n.background?{backgroundColor:n.background}:{"background-image":`url(${n.backgroundThumb})`})},null,4),t("div",At,v(n.title),1)],8,Ut))),128))])])])}var pe=y(wt,[["render",Lt]]);const $=async(o="background",e=30)=>{try{return(await q.get(`https://api.unsplash.com/search/photos?&orientation=landscape&page=1&per_page=${e}&query=${o}&client_id=7J3v9FUMKbF2KbsE4NhWlimmR9EM6EhJEQb6e0lY1js&q=20&w=200`)).data}catch(r){console.error("ERROR!",r)}},Dt={props:{},data(){return{isLoading:!1,photos:null,searchInput:void 0,search:""}},created(){this.onUploadImg()},methods:{closeModal(){this.$emit("close")},async onUploadImg(){const o=await $(this.searchInput,20);this.photos=o.results},setBgc(o){this.$emit("changeBgc",o)},updateSearch(){this.searchInput=this.search}},computed:{},components:{},emits:["changeBgc","close"]},Nt={class:"unsplash-boards-modal"},It={class:"side-bar-menu-header-background-img flex"},Ft=t("div",{class:"side-bar-menu-header-text-background-img"},[t("h3",null,[M(" Photos by "),t("a",{target:"_blank",href:"https://unsplash.com/?utm_source=trello&utm_medium=referral&utm_campaign=api-credit"},"Unsplash")])],-1),Jt=t("span",{class:"icon-md icon-closed"},null,-1),Pt=[Jt],Rt=t("hr",null,null,-1),Gt={tabindex:"0",class:"search-unsplash"},jt=t("span",{class:"icon-sm icon-search"},null,-1),Wt={class:"side-bar-menu-background-container-img"},Vt=["onClick","src"];function zt(o,e,r,h,i,s){return l(),d("div",Nt,[t("div",It,[Ft,t("div",{class:"header-close-img-boards-modal",onClick:e[0]||(e[0]=(...n)=>s.closeModal&&s.closeModal(...n))},Pt)]),Rt,t("div",Gt,[jt,_(t("input",{onKeyup:e[1]||(e[1]=J(u((...n)=>s.onUploadImg&&s.onUploadImg(...n),["stop","prevent"]),["enter"])),"onUpdate:modelValue":e[2]||(e[2]=n=>i.searchInput=n),placeholder:"Photos",type:"text"},null,544),[[O,i.searchInput]])]),t("div",Wt,[(l(!0),d(E,null,x(i.photos,n=>(l(),d("div",{class:"unspash-imgs",key:n},[t("img",{onClick:a=>s.setBgc(n.urls),class:"unspash-img",src:n.urls.thumb,alt:""},null,8,Vt)]))),128))])])}var Ht=y(Dt,[["render",zt]]);const Kt={name:"board-app",props:{newBoard:{type:Object,required:!0}},data(){return{isEdit:!1,unsplashOpen:!1,setColor:"#0079BF",setPhoto:"",photos:null,num:4}},created(){this.onUploadImg()},computed:{boards(){return this.$store.getters.boards}},methods:{closeModal(){this.$emit("close")},saveNewBoard(){!this.newBoard.title||(!this.newBoard.background&&!this.newBoard.backgroundPhoto&&(this.newBoard.background="#0079BF"),this.$emit("add",this.newBoard),this.setColor="#0079BF",this.setPhoto="")},setBoardColor(o="#0079BF"){this.setColor=o,this.setPhoto="",this.newBoard.backgroundPhoto="",this.newBoard.background=o},async onUploadImg(){const o=await $("abstract",this.num);this.photos=o.results},setBoardPhoto(o){this.setPhoto=o.thumb,this.setColor="",this.newBoard.background="",this.newBoard.backgroundPhoto=o.full,this.newBoard.backgroundThumb=o.thumb},openUnsplash(){this.unsplashOpen=!0},closeUnsplash(){this.unsplashOpen=!1}},components:{unsplashModal:Ht}},Zt={class:"create-board-modal"},qt={class:"create-board-modal-header"},$t=t("div",{class:"header-text-create-boards-modal"},[t("h1",null,"Create board")],-1),Yt=t("span",{class:"icon-sm icon-closed"},null,-1),Xt=[Yt],Qt={class:"create-board-background-preview"},es=t("img",{src:"https://a.trellocdn.com/prgb/dist/images/board-preview-skeleton.14cda5dc635d1f13bc48.svg",alt:""},null,-1),ts=[es],ss=t("label",{class:"background-label"},"Background",-1),os={class:"create-background-photo"},rs=["onClick"],is={class:"create-board-background-color"},ls={key:0,class:"checked"},ds={key:0,class:"checked"},as={key:0,class:"checked"},ns={key:0,class:"checked"},cs={key:0,class:"checked"},us=t("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5 14C6.10457 14 7 13.1046 7 12C7 10.8954 6.10457 10 5 10C3.89543 10 3 10.8954 3 12C3 13.1046 3.89543 14 5 14ZM12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14ZM21 12C21 13.1046 20.1046 14 19 14C17.8954 14 17 13.1046 17 12C17 10.8954 17.8954 10 19 10C20.1046 10 21 10.8954 21 12Z",fill:"currentColor"})],-1),hs=[us],ms=t("label",{for:""},"Board title",-1),ps={class:"create-board-title-add-btns"};function gs(o,e,r,h,i,s){const n=w("unsplash-modal"),a=U("clickOutside"),f=U("focus");return l(),d("div",Zt,[t("form",null,[t("div",qt,[$t,t("div",{class:"header-close-create-boards-modal",onClick:e[0]||(e[0]=(...g)=>s.closeModal&&s.closeModal(...g))},Xt)]),t("div",Qt,[t("div",{class:"create-board-img-preview",style:b(i.setColor?{backgroundColor:i.setColor}:{"background-image":`url(${i.setPhoto})`,"background-size":"cover","background-repeat":"no-repeat"})},ts,4)]),ss,t("div",os,[(l(!0),d(E,null,x(i.photos,g=>(l(),d("div",{class:"photos",key:g},[t("div",{onClick:C=>s.setBoardPhoto(g.urls),class:"photo-pref",style:b(i.setPhoto===g.urls.thumb?{"background-image":`linear-gradient(rgba(0, 0, 0, 0.527),rgba(0, 0, 0, 0.5)) , url(${g.urls.thumb})`,"background-size":"cover"}:{"background-image":`url(${g.urls.thumb})`,"background-size":"cover"}),alt:""},[i.setPhoto===g.urls.thumb?(l(),d("span",{key:0,class:"checked",style:b(i.setPhoto===g.urls.thumb?{"padding-top":"5px"}:null)},null,4)):c("",!0)],12,rs)]))),128))]),t("div",is,[t("div",{onClick:e[1]||(e[1]=g=>s.setBoardColor("#0079BF")),class:"blue color-pref"},[i.setColor==="#0079BF"?(l(),d("span",ls)):c("",!0)]),t("div",{onClick:e[2]||(e[2]=g=>s.setBoardColor("#D29034")),class:"yellow color-pref"},[i.setColor==="#D29034"?(l(),d("span",ds)):c("",!0)]),t("div",{onClick:e[3]||(e[3]=g=>s.setBoardColor("#519839")),class:"green color-pref"},[i.setColor==="#519839"?(l(),d("span",as)):c("",!0)]),t("div",{onClick:e[4]||(e[4]=g=>s.setBoardColor("#B04632")),class:"red color-pref"},[i.setColor==="#B04632"?(l(),d("span",ns)):c("",!0)]),t("div",{onClick:e[5]||(e[5]=g=>s.setBoardColor("#89609E")),class:"purple color-pref"},[i.setColor==="#89609E"?(l(),d("span",cs)):c("",!0)]),t("div",{onClick:e[6]||(e[6]=(...g)=>s.openUnsplash&&s.openUnsplash(...g)),class:"more color-pref"},hs)]),i.unsplashOpen?_((l(),T(n,{key:0,onClose:s.closeUnsplash,style:{left:"960px",bottom:"0"},onChangeBgc:s.setBoardPhoto},null,8,["onClose","onChangeBgc"])),[[a,s.closeUnsplash]]):c("",!0),ms,t("div",ps,[_(t("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=g=>r.newBoard.title=g)},null,512),[[f],[O,r.newBoard.title]]),t("button",{style:b(r.newBoard.title?null:{cursor:"no-drop","background-color":"#F5F6F8",color:"#BFC4CE"}),onClick:e[8]||(e[8]=u((...g)=>s.saveNewBoard&&s.saveNewBoard(...g),["stop","prevent"]))},"Create",4)])])])}var ge=y(Kt,[["render",gs]]);const I={saveToStorage:vs,loadFromStorage:bs,makeId:_s,getRandomInt:fs};function vs(o,e){localStorage.setItem(o,JSON.stringify(e)||null)}function bs(o){let e=localStorage.getItem(o);return e?JSON.parse(e):void 0}function _s(o=8){for(var e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",h=0;h<o;h++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}function fs(o,e){return o=Math.ceil(o),e=Math.floor(e),Math.floor(Math.random()*(e-o+1))+o}const H="loggedinUser",D={login:ws,logout:Bs,signup:Ts,getLoggedinUser:be,getUsers:Cs,getById:ve,remove:ys,update:ks};window.userService=D;function Cs(){return N.get("user")}async function ve(o){return await N.get(`user/${o}`)}function ys(o){return N.delete(`user/${o}`)}async function ks(o){return o=await N.put(`user/${o._id}`,o),be()._id===o._id&&_saveLocalUser(o),o}async function ws(o){try{const e=await N.post("auth/login",o);return sessionStorage.setItem(H,JSON.stringify(e)),e}catch(e){console.log("login err:",e)}}async function Ts(o){try{const e=await N.post("auth/signup",o);sessionStorage.setItem(H,JSON.stringify(e))}catch(e){console.log("signup err:",e)}}async function Bs(){try{const o=await ve("624559a71ec4197167765f73");await N.post("auth/logout"),sessionStorage.setItem(H,JSON.stringify(o))}catch(o){console.log("logout err:",o)}}function be(){return JSON.parse(sessionStorage.getItem(H))}var Es="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEMAAABFCAYAAAARk1tuAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAFA0lEQVR42u2cX4hVVRTGf+vcM07jBCWFMvaHwOkhE0MQg17CoJdEBKWHIvEtspCkpwqyqTR8qKQi7DXozSwio54NCSEDCwoUw0ZNhMwsbdK5Z3093DujODPes+49c85tvB8cGO7M3mut7+69/u19BnroYTrYdB8u3KFF88U6S1gGLEQkVStaiLHGHzKOeZ19v75iP1+XjKWv6uZ/+nwH2DPAvKqVn2V84XXbOjpiv0wh474dGhqTf41YXrWWZUFwNlWy7tg2OzBJxvB76r98Pttv2KqqFayCkCRLVh4fseMpwPif/pzBKlDVupUOg9uUZO8A6w3J7nq9PgrcWbViFRIilA2nd4yMPyC7cYkAEBgkj6UmLZk+wN5gMBtOTXaL68bzFVOhBaksM9RbGmCk7oD1VoYk0uaPVevSBWiS0Y7LMNgn2UFJ4zlH3ERNq008HJBxFPjUnXO5xyS6F+xJYCBqUErmKFiGSbb1zJvz341TyGtDL114W4m9kEO5g7WL81ef3GVjUSFDL17crRoHgP7IuKRpXe5H0l9n5g283wYRAPSpvh1JLWVl/lY7RACc3jl4yORfRezCRTJO1tQt3wM6xYh5u2SM7rz1nEt/t5SFn2hXBkDdGY3Y5XhVDrQseTE5KRl4wGcUkZ9JrdVMOk19hCLL15zmyig9A83BRr1TGR5egGnmTlJ2U6/pP6+PzpaGlIfxqwdYM88omYtMks1ydehymeWXoUkH2vOfIEghQ5Gsq4g6RqAWmo516jTU3Cl5zUKNaEISpLBjMnLM0ekucofANkGQZkBS8j5xNOtNAzdkAbu8UajFtkkoeM84SY4F3OEuMbkUWV7upDiEzsuKWERlLEQnvNVSgFDbrwiX4crRXMs64yLoQJvRJLo0itjtJaS85orpKlIH8EgIKoYKteAjEgimg3vDwPxKeTO0xggsgI0cf1NAoRYd0mz75R/Xhoypc0gt56kXUKhFArgBaUaGlXz9wnPty6wjpRoZQOxLDrf9CmpotGz7mdnSjkQ490dtSvAquMghQ7atf8voknbmH9h88nGkNSG7Kmvu5JEn7k689uPA5lPfAmfzTm0wDKyI22SNPMNDrrvz4NrafU5iAHgkNnd7SCar1rKPF7vxoNuM1KP9jAIMUSxRLgWuNo4Xi8hAAwlvaZCoZpuYImleeUgbtWHZzZ3yZbaCTUST0i+rNBKJqu2/VqlmcyfWKiyEi267KyRro1ArRnL33SKzxiFSoyUcGFYEG1XbPi0azZ3A9xTpOM9IRdeti0ZW3EZotc7rfZ/108U4bKKRofyPpHvYeHiwbaFP/TQE3B6RWcYjh6ThM0Ij+5PawAdsORq6LwXAxsODtVrfh5VbPsOTNtKM4B4Wm5LzelSbjhxC+jfnqEGDlZIvDJNYBhq1iRO+7tfAYpMWV21DcbCKriR0KZqXVXpsXLmS0Ls7PnElIcPa8xlzDBM+oxu7LWXD5sjLu0XAgRRxqRtrhdIhu5wiP917Ewkw+y0lqx2E7BLB1xHmHJJsf8KeZRcw+7xqXaqFjZLVvpk4XtyGtJbo2ztzBv4ynyy/fMVZbPj+CbCPibW95gJ2s3fFs3BtD2/DobW4fYSxoGoNS8A4xnb2rnhjIgWfGkbW/LCA/vHnEeuBZXRfI7tTnAD7EsZ38dmDR67+xfUNffq7Pn6vL8Jq//9/LJKlTt/YGfY8NON7b/8BkXuLYs87Gy0AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjItMDMtMzFUMTU6Mzc6NDErMDA6MDClS8mdAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIyLTAzLTMxVDE1OjM3OjQxKzAwOjAw1BZxIQAAAABJRU5ErkJggg==",xs="/assets/hero-home-page.f5b958c8.png";const Os={data(){return{user:{username:"Guest-user",password:"123"}}},created(){this.$store.dispatch({type:"login",user:this.user})},computed:{},methods:{goToSignup(){this.$router.push("/signup")},goTologin(){this.$router.push("/login")},goToBoards(){this.$router.push("/board")}},components:{}},Ms={class:"home-main"},Ss=t("div",{class:"logo-box-home"},[t("div",null,[t("img",{src:Es,alt:"logo"})]),t("p",null,"Tasko")],-1),Us={class:"home-main-box"},As={class:"img-txt"},Ls={class:"txt-box"},Ds=t("div",null,[t("h1",null,"Tasko helps teams move work forward."),t("p",null," Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique\u2014accomplish it all with Tasko. ")],-1),Ns={class:"input-mail-box"},Is=t("div",{class:"img-box"},[t("img",{src:xs,alt:"hero"})],-1);function Fs(o,e,r,h,i,s){return l(),d("section",Ms,[t("nav",null,[Ss,t("div",null,[t("a",{onClick:e[0]||(e[0]=(...n)=>s.goTologin&&s.goTologin(...n)),href:"#"},"Log in"),t("button",{onClick:e[1]||(e[1]=(...n)=>s.goToSignup&&s.goToSignup(...n))},"Sign up")])]),t("div",Us,[t("div",As,[t("div",Ls,[Ds,t("div",Ns,[t("button",{type:"submit",onClick:e[2]||(e[2]=u((...n)=>s.goToBoards&&s.goToBoards(...n),["stop","prevent"]))},"Let's start")])]),Is])])])}var Js=y(Os,[["render",Fs]]);const Ps={name:"board-preview",props:{board:Object},data(){return{boardToEdit:null,isStarred:!1}},methods:{goToDetails(){this.$router.push(`/board/${this.board._id}`),this.$emit("viewedBoard",this.board)},boardStared(){this.isStarred=!this.isStarred;const o=JSON.parse(JSON.stringify(this.board));o.isStarred=this.isStarred,this.$emit("starredChange",o)}},emits:["starredChange","viewedBoard","duplicateTemplate"]};function Rs(o,e,r,h,i,s){return l(),d("div",{class:"board-preview-main",onClick:e[1]||(e[1]=u(n=>s.goToDetails(),["stop","prevent"])),style:b(r.board.background?{backgroundColor:r.board.background}:{"background-image":`linear-gradient(rgba(0, 0, 0, 0.527),rgba(0, 0, 0, 0.5)) , url(${r.board.backgroundThumb})`,"background-size":"cover"})},[t("h1",null,v(r.board.title),1),r.board.isStarred?(l(),d("span",{key:0,class:"icon-sm icon-starred-boards",onClick:e[0]||(e[0]=u((...n)=>s.boardStared&&s.boardStared(...n),["stop","prevent"]))})):c("",!0)],4)}var Gs=y(Ps,[["render",Rs]]);const js={props:{boards:{type:Array,required:!0}},methods:{onStarredChange(o){this.$emit("updateStarred",o)},addViewedBoard(o){let e=JSON.parse(JSON.stringify(o));e.lastTimeWatched=Date.now(),this.$emit("updateRecentlyWatched",e)},addBoard(o){this.$emit("duplicateTemplate",o)}},components:{boardPreview:Gs},emits:["updateStarred","updateRecentlyWatched","duplicateTemplate"]},Ws={class:"board-list-main"};function Vs(o,e,r,h,i,s){const n=w("board-preview");return l(),d("div",Ws,[(l(!0),d(E,null,x(r.boards,a=>(l(),T(n,{onStarredChange:s.onStarredChange,onViewedBoard:s.addViewedBoard,onDuplicateTemplate:s.addBoard,board:a,key:a._id},null,8,["onStarredChange","onViewedBoard","onDuplicateTemplate","board"]))),128))])}var zs=y(js,[["render",Vs]]);const Hs={props:{searchInput:String},data(){return{isLoading:!1,photos:null}},created(){this.onUploadImg()},methods:{async onUploadImg(){const o=await $(this.searchInput);this.photos=o.results},setBgc(o){this.$emit("changeBgc",o)}},emits:["changeBgc"]},Ks=["onClick","src"];function Zs(o,e,r,h,i,s){return l(!0),d(E,null,x(i.photos,n=>(l(),d("div",{class:"unspash-imgs",key:n},[t("img",{onClick:a=>s.setBgc(n.urls),class:"unspash-img",src:n.urls.thumb,alt:""},null,8,Ks)]))),128)}var _e=y(Hs,[["render",Zs]]),qs="/assets/business-templates.105dc65a.svg",$s="/assets/design-templates.e6877446.svg",Ys="/assets/education-templates.d1701939.svg",Xs="/assets/project-management-templates.3751b069.svg";const Qs={name:"board-app",data(){return{preFolder:"",currFolder:"",isFolder:{boards:!1,templates:!1,home:!1},filterBy:null,isEdit:!1,newBoard:S.getEmptyBoard(),newActivity:S.getEmptyActivity(),setColor:"",pos:0}},created(){this.setFolder("boards")},methods:{calcPosOfBox(o){this.pos=this.$refs[o].getBoundingClientRect()},setFilter(o){this.$store.dispatch({type:"filter",filterBy:o})},openBoardEdit(){this.isEdit=!0},closeBoardEdit(){this.isEdit=!1},saveNewBoard(o){!o.title||(this.loggedinUser&&(o.createdBy=this.loggedinUser,o.members.push(this.loggedinUser),this.newActivity.byMember=this.loggedinUser),o.isTemplate=!1,this.newActivity.txt="created this board",o.activities.push(this.newActivity),this.$store.dispatch({type:"saveBoard",board:o}),this.isEdit=!1,this.newBoard=S.getEmptyBoard())},setFolder(o){this.currFolder=o,this.isFolder[this.preFolder]=!this.isFolder[this.preFolder],this.preFolder=o,this.isFolder[o]=!this.isFolder[o]},setColors(o){return this.isFolder[o]?"selected-folder":"folder"},updateBoard(o){this.$store.dispatch({type:"saveBoard",board:o})},addLastTimeWatched(o){this.$store.dispatch({type:"saveBoard",board:o})},goToDetails(o){this.$emit("close"),this.$router.push(`/board/${o._id}`)},setMemberLetters(o){return o.split(" ").map(r=>r[0]).join("").toUpperCase()},generateTime(o){return W(o).fromNow()},setRightPos(o){return window.innerWidth-o<390?window.innerWidth-390:o+8}},computed:{loggedinUser(){return this.$store.getters.loggedinUser},boards(){if(this.$store.getters.boards&&this.loggedinUser)return JSON.parse(JSON.stringify(this.$store.getters.boards)).filter(e=>e.members.some(r=>r._id===this.loggedinUser._id)&&!e.isTemplate)},starredBoards(){if(this.$store.getters.boards&&this.loggedinUser)return JSON.parse(JSON.stringify(this.$store.getters.boards)).filter(e=>e.isStarred&&e.members.some(r=>r._id===this.loggedinUser._id))},recentlyBoards(){if(this.$store.getters.boards&&this.loggedinUser)return JSON.parse(JSON.stringify(this.$store.getters.boards)).filter(r=>!r.isTemplate&&r.members.some(h=>h._id===this.loggedinUser._id)).sort((r,h)=>h.lastTimeWatched-r.lastTimeWatched)},templates(){return this.$store.getters.templates},categoryBusiness(){return this.$store.getters.categoryBusiness},categoryDesign(){return this.$store.getters.categoryDesign},categoryEducation(){return this.$store.getters.categoryEducation},categoryLifestyle(){return this.$store.getters.categoryLifestyle},board(){return this.$store.getters.board},allActivities(){return this.$store.getters.allActivities}},components:{boardList:zs,unsplash:_e,createBoardModal:ge}},eo={class:"board-app-main"},to={class:"main-container"},so={class:"contact"},oo={class:"folders"},ro=t("span",{class:"icon-sm icon-board"},null,-1),io=t("p",null,"Boards",-1),lo=[ro,io],ao=t("span",{class:"icon-sm icon-template"},null,-1),no=t("p",null,"Templates",-1),co=[ao,no],uo=t("span",{class:"icon-sm icon-home"},null,-1),ho=t("p",null,"Home",-1),mo=[uo,ho],po={class:"folder-info"},go={key:0,class:"boards-info"},vo={class:"border-list"},bo=t("div",{class:"header"},[t("span",{class:"icon-lg icon-star-boards"}),t("p",null,"Starred boards")],-1),_o={class:"border-list"},fo=t("div",{class:"header"},[t("p",null,"YOUR WORKSPACES")],-1),Co=t("p",null,"Create new board",-1),yo=[Co],ko={key:1,class:"boards-info"},wo={class:"border-list"},To=t("div",{class:"header-templates"},[t("img",{class:"category-icon",src:qs,alt:"business-icon"}),t("p",{class:"category-title"},"Business")],-1),Bo={class:"border-list"},Eo=t("div",{class:"header-templates"},[t("img",{class:"category-icon",src:$s,alt:"business-icon"}),t("p",{class:"category-title"},"Design")],-1),xo={class:"border-list"},Oo=t("div",{class:"header-templates"},[t("img",{class:"category-icon",src:Ys,alt:"business-icon"}),t("p",{class:"category-title"},"Education")],-1),Mo={class:"border-list"},So=t("div",{class:"header-templates"},[t("img",{class:"category-icon",src:Xs,alt:"business-icon"}),t("p",{class:"category-title"},"Lifestyle")],-1),Uo={key:2,class:"home-info"},Ao={class:"activities"},Lo={class:"side-bar-menu-activity-container"},Do=t("div",{class:"activity-header flex"},[t("span",{class:"icon-sm icon-activity-home"}),t("h1",null,"Activity")],-1),No=["src"],Io={key:1,class:"member-avatar-in-activity"},Fo={class:"activity-info"},Jo={class:"activities-info-txt flex"},Po={class:"activity-timestamp"},Ro={class:"boards"},Go={class:"starred-boards"},jo=t("div",{class:"starred-boards-header"},[t("span",{class:"icon-sm icon-star-home"}),t("p",null,"Starred")],-1),Wo={class:"modal-starred-boards-list"},Vo={class:"modal-starred-board-list"},zo=["onClick","board"],Ho={class:"modal-starred-board"},Ko=t("span",{class:"icon-sm icon-star-home-board"},null,-1),Zo=t("br",null,null,-1),qo=t("br",null,null,-1),$o={class:"starred-boards"},Yo=t("div",{class:"starred-boards-header"},[t("span",{class:"icon-sm icon-clock-home"}),t("p",null,"Recently viewed")],-1),Xo={class:"modal-starred-boards-list"},Qo={class:"modal-starred-board-list"},er=["onClick","board"],tr={class:"modal-starred-board"};function sr(o,e,r,h,i,s){const n=w("board-list"),a=w("create-board-modal"),f=U("clickOutside");return l(),d("section",eo,[t("div",to,[t("div",so,[t("div",null,[t("ul",oo,[t("li",{onClick:e[0]||(e[0]=g=>s.setFolder("boards")),class:k(s.setColors("boards"))},lo,2),t("li",{onClick:e[1]||(e[1]=g=>s.setFolder("templates")),class:k(s.setColors("templates"))},co,2),t("li",{onClick:e[2]||(e[2]=g=>s.setFolder("home")),class:k(s.setColors("home"))},mo,2)])]),t("div",po,[i.isFolder.boards?(l(),d("div",go,[t("div",vo,[bo,s.starredBoards?(l(),T(n,{key:0,boards:s.starredBoards,onDuplicateTemplate:s.saveNewBoard,onUpdateRecentlyWatched:s.addLastTimeWatched,onUpdateStarred:s.updateBoard},null,8,["boards","onDuplicateTemplate","onUpdateRecentlyWatched","onUpdateStarred"])):c("",!0)]),t("div",_o,[fo,s.boards?(l(),T(n,{key:0,boards:s.boards,onDuplicateTemplate:s.saveNewBoard,onUpdateRecentlyWatched:s.addLastTimeWatched,onUpdateStarred:s.updateBoard},null,8,["boards","onDuplicateTemplate","onUpdateRecentlyWatched","onUpdateStarred"])):c("",!0),t("button",{class:"create-btn-boards",onClick:e[3]||(e[3]=g=>(s.openBoardEdit(),s.calcPosOfBox("button"))),ref:"button",type:"button"},yo,512),i.isEdit?_((l(),T(a,{key:1,onClose:s.closeBoardEdit,onAdd:s.saveNewBoard,class:"create-board-modal-board-app",style:b({right:s.setRightPos(i.pos.right)+"px",bottom:"0"}),newBoard:i.newBoard},null,8,["onClose","onAdd","style","newBoard"])),[[f,s.closeBoardEdit]]):c("",!0)])])):c("",!0),i.isFolder.templates?(l(),d("div",ko,[t("div",wo,[To,s.boards?(l(),T(n,{key:0,boards:s.categoryBusiness,onDuplicateTemplate:s.saveNewBoard,onUpdateRecentlyWatched:s.addLastTimeWatched},null,8,["boards","onDuplicateTemplate","onUpdateRecentlyWatched"])):c("",!0)]),t("div",Bo,[Eo,s.boards?(l(),T(n,{key:0,boards:s.categoryDesign,onDuplicateTemplate:s.saveNewBoard,onUpdateRecentlyWatched:s.addLastTimeWatched},null,8,["boards","onDuplicateTemplate","onUpdateRecentlyWatched"])):c("",!0)]),t("div",xo,[Oo,s.boards?(l(),T(n,{key:0,boards:s.categoryEducation,onDuplicateTemplate:s.saveNewBoard,onUpdateRecentlyWatched:s.addLastTimeWatched},null,8,["boards","onDuplicateTemplate","onUpdateRecentlyWatched"])):c("",!0)]),t("div",Mo,[So,s.boards?(l(),T(n,{key:0,boards:s.categoryLifestyle,onDuplicateTemplate:s.saveNewBoard,onUpdateRecentlyWatched:s.addLastTimeWatched},null,8,["boards","onDuplicateTemplate","onUpdateRecentlyWatched"])):c("",!0)])])):c("",!0),i.isFolder.home?(l(),d("div",Uo,[t("div",Ao,[t("div",Lo,[Do,(l(!0),d(E,null,x(s.allActivities,g=>(l(),d("div",{class:"activities-render flex",key:g},[g.byMember.imgUrl?(l(),d("img",{key:0,class:"member-avatar",src:g.byMember.imgUrl,alt:""},null,8,No)):(l(),d("div",Io,v(s.setMemberLetters(g.byMember.fullname)),1)),t("div",Fo,[t("div",Jo,[t("p",null,[t("span",null,v(g.byMember.username),1),M(" "+v(g.txt),1)])]),t("div",Po,v(s.generateTime(g.createdAt)),1)])]))),128))])]),t("div",Ro,[t("div",Go,[jo,t("div",Wo,[t("div",Vo,[(l(!0),d(E,null,x(s.starredBoards,g=>(l(),d("div",{class:"boards-render-modal-starred",onClick:C=>s.goToDetails(g),board:g,key:g},[t("div",{class:"board-background-starred-modal",style:b(g.background?{backgroundColor:g.background}:{"background-image":`url(${g.backgroundPhoto})`})},null,4),t("div",Ho,v(g.title),1),Ko],8,zo))),128))])])]),Zo,qo,t("div",$o,[Yo,t("div",Xo,[t("div",Qo,[(l(!0),d(E,null,x(s.recentlyBoards,g=>(l(),d("div",{class:"boards-render-modal-starred",onClick:C=>s.goToDetails(g),board:g,key:g},[t("div",{class:"board-background-starred-modal",style:b(g.background?{backgroundColor:g.background}:{"background-image":`url(${g.backgroundPhoto})`})},null,4),t("div",tr,v(g.title),1)],8,er))),128))])])])])])):c("",!0)])])])])}var or=y(Qs,[["render",sr]]);const rr="",G=ir();window.socketService=G;G.setup();function ir(){var o=null;return{async setup(){o=Te(rr),window.socket=o},on(r,h){o.on(r,h)},off(r,h=null){!o||(h?o.off(r,h):o.removeAllListeners(r))},emit(r,h){o.emit(r,h)},terminate(){o=null}}}const de=(o,e)=>{const{removedIndex:r,addedIndex:h,payload:i}=e;if(r===null&&h===null)return o;const s=[...o];let n=i;return r!==null&&(n=s.splice(r,1)[0]),h!==null&&s.splice(h,0,n),s},lr={name:"label-editor",props:{label:{type:Object},pos:{type:Object},board:{type:Object},new:{type:Boolean}},data(){return{name:"",color:"",labelToEdit:"",txt:"Create label",btnTxt:"Create",isCreate:this.new}},created(){this.new||(this.name=this.label.title,this.color=this.label.color,this.txt="Change label",this.btnTxt="Save")},methods:{setLabelColor(o){this.color=o},save(){this.new?(this.color||(this.color="#61BD4F"),this.labelToEdit={id:I.makeId(),title:this.name,color:this.color}):(this.labelToEdit=JSON.parse(JSON.stringify(this.label)),this.labelToEdit.title=this.name,this.labelToEdit.color=this.color),this.$emit("saveLabel",this.labelToEdit),this.closeEditLabel()},deleteLabel(){this.$emit("deleteLabel",this.label),this.closeEditLabel()},close(){this.$emit("closeBoth")},closeEditLabel(){this.$emit("closeEditLabel")}},emits:["closeBoth","closeEditLabel","saveLabel","deleteLabel"]},dr={class:"main-title-container"},ar={class:"main-title"},nr={class:"actions-modal-main"},cr=t("span",{class:"mini-edit-title"},"Name",-1),ur=t("span",{class:"mini-edit-title"},"Color",-1),hr={class:"label-color-picker"},mr=t("div",{class:"no-color-container"},[t("span",{class:"no-color-title"},"No color."),t("span",{class:"no-color-text"},"This won't show up on the front of cards")],-1);function pr(o,e,r,h,i,s){const n=U("clickOutside");return _((l(),d("section",{style:b({top:r.pos.bottom+8+"px",left:r.pos.left+"px"}),class:"label-modal"},[t("div",dr,[t("div",{class:"icon-sm icon-back",type:"button",onClick:e[0]||(e[0]=u((...a)=>s.closeEditLabel&&s.closeEditLabel(...a),["stop","prevent"]))}),t("div",{class:"icon-sm icon-close",onClick:e[1]||(e[1]=u((...a)=>s.close&&s.close(...a),["stop","prevent"]))}),t("span",ar,v(i.txt),1)]),t("section",nr,[cr,_(t("input",{onClick:e[2]||(e[2]=u(()=>{},["stop","prevent"])),class:"edit-input",onSubmit:e[3]||(e[3]=u(()=>{},["prevent"])),type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>i.name=a)},null,544),[[O,i.name]]),ur,t("section",hr,[t("div",{class:k([{checked:i.color==="#61BD4F"},"green color-pref"]),onClick:e[5]||(e[5]=u(a=>s.setLabelColor("#61BD4F"),["stop","prevent"]))},null,2),t("div",{class:k([{checked:i.color==="#F2D600"},"yellow color-pref"]),onClick:e[6]||(e[6]=u(a=>s.setLabelColor("#F2D600"),["stop","prevent"]))},null,2),t("div",{class:k([{checked:i.color==="#FF9F1A"},"orange color-pref"]),onClick:e[7]||(e[7]=u(a=>s.setLabelColor("#FF9F1A"),["stop","prevent"]))},null,2),t("div",{class:k([{checked:i.color==="#EB5A46"},"red color-pref"]),onClick:e[8]||(e[8]=u(a=>s.setLabelColor("#EB5A46"),["stop","prevent"]))},null,2),t("div",{class:k([{checked:i.color==="#C377E0"},"purple color-pref"]),onClick:e[9]||(e[9]=u(a=>s.setLabelColor("#C377E0"),["stop","prevent"]))},null,2),t("div",{class:k([{checked:i.color==="#0079BF"},"blue color-pref"]),onClick:e[10]||(e[10]=u(a=>s.setLabelColor("#0079BF"),["stop","prevent"]))},null,2),t("div",{class:k([{checked:i.color==="#00C2E0"},"light-blue color-pref"]),onClick:e[11]||(e[11]=u(a=>s.setLabelColor("#00C2E0"),["stop","prevent"]))},null,2),t("div",{class:k([{checked:i.color==="#51E898"},"light-green color-pref"]),onClick:e[12]||(e[12]=u(a=>s.setLabelColor("#51E898"),["stop","prevent"]))},null,2),t("div",{class:k([{checked:i.color==="#FF78CB"},"pink color-pref"]),onClick:e[13]||(e[13]=u(a=>s.setLabelColor("#FF78CB"),["stop","prevent"]))},null,2),t("div",{class:k([{checked:i.color==="#344563"},"dark-blue color-pref"]),onClick:e[14]||(e[14]=u(a=>s.setLabelColor("#344563"),["stop","prevent"]))},null,2),t("div",{class:k([{checked:i.color==="#B3BAC5"},"no-color color-pref"]),onClick:e[15]||(e[15]=u(a=>s.setLabelColor("#B3BAC5"),["stop","prevent"]))},null,2),mr]),t("button",{class:"save-btn",onClick:e[16]||(e[16]=u((...a)=>s.save&&s.save(...a),["stop","prevent"]))},v(i.btnTxt),1),i.isCreate?c("",!0):(l(),d("button",{key:0,class:"delete-btn",onClick:e[17]||(e[17]=u((...a)=>s.deleteLabel&&s.deleteLabel(...a),["stop","prevent"]))},"Delete"))])],4)),[[n,s.close]])}var fe=y(lr,[["render",pr]]);const gr={components:{labelEditorModalCmp:fe},name:"label-modal",props:{board:{type:Object},card:{type:Object},group:{type:Object},pos:{type:Object}},data(){return{cardToEdit:null,isLabelEditOpen:!1,currLabelIdx:null,labelsToEdit:null,isCreate:!1}},computed:{currLabel(){return this.board.labels[this.currLabelIdx]}},created(){},methods:{setBottomPos(o){return window.innerHeight-o<455?window.innerHeight-455:o+8},closeLabelEdit(){this.isLabelEditOpen=!1,this.isCreate=!1},closeModal(){this.isLabelEditOpen=!1,this.close()},close(){this.isCreate=!1,this.$emit("actionsClose")},addLabelToCard(o){if(this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.cardToEdit.labels.length){const e=this.board.labels.findIndex(h=>h.id===o),r=this.cardToEdit.labels.findIndex(h=>h===o);r===-1?this.cardToEdit.labels.splice(e,0,o):this.cardToEdit.labels.splice(r,1)}else this.cardToEdit.labels.push(o);this.$emit("cardEdit",this.cardToEdit)},openEditLabel(o){this.isLabelEditOpen=!0,this.currLabelIdx=this.board.labels.findIndex(e=>e.id===o.id)},saveLabelToBoard(o){this.currLabelIdx=this.board.labels.findIndex(e=>e.id===o.id),this.labelsToEdit=JSON.parse(JSON.stringify(this.board.labels)),this.currLabelIdx===-1?this.labelsToEdit.push(o):this.labelsToEdit[this.currLabelIdx]=o,this.$emit("boardEdit",{key:"labels",val:this.labelsToEdit})},deleteLabelFromBoard(o){this.currLabelIdx=this.board.labels.findIndex(e=>e.id===o.id),this.labelsToEdit=JSON.parse(JSON.stringify(this.board.labels)),this.labelsToEdit.splice(this.currLabelIdx,1),this.$emit("boardEdit",{key:"labels",val:this.labelsToEdit})},createNewLabel(){this.isLabelEditOpen=!0,this.isCreate=!0},lightenDarkenColor(o,e){if(o==="#0079BF")return"#0066A0";if(o==="#00AECC")return"#0092AB";if(o==="")return"rgba(0,0,0,.32)";var r=!1;o[0]=="#"&&(o=o.slice(1),r=!0);var h=parseInt(o,16),i=(h>>16)+e;i>255?i=255:i<0&&(i=0);var s=(h>>8&255)+e;s>255?s=255:s<0&&(s=0);var n=(h&255)+e;return n>255?n=255:n<0&&(n=0),(r?"#":"")+(n|s<<8|i<<16).toString(16)}},emits:["uploadComplete","uploading","actionsClose","cardEdit","boardEdit","cardCopySave"]},vr={class:"main-title-container"},br=t("span",{class:"main-title"},"Labels",-1),_r={class:"actions-modal-main"},fr=t("input",{class:"main-input",type:"text"},null,-1),Cr=t("span",{class:"mini-title"},"Labels",-1),yr=["onClick"],kr={key:0,class:"icon-sm icon-check"},wr=["onClick"];function Tr(o,e,r,h,i,s){const n=w("label-editor-modal-cmp"),a=U("clickOutside");return l(),d("section",null,[i.isLabelEditOpen?c("",!0):_((l(),d("section",{key:0,style:b({top:s.setBottomPos(r.pos.bottom)+"px",left:r.pos.left+"px"}),class:"label-modal"},[t("div",vr,[t("div",{class:"icon-sm icon-close",onClick:e[0]||(e[0]=u((...f)=>s.close&&s.close(...f),["stop","prevent"]))}),br]),t("section",_r,[fr,Cr,(l(!0),d(E,null,x(r.board.labels,f=>(l(),d("section",{key:f.id,class:"label-container flex"},[t("div",{style:b({backgroundColor:s.lightenDarkenColor(f.color,-30)}),class:"label-color-hover"},[t("div",{class:"label-color",style:b({backgroundColor:f.color}),onClick:u(g=>s.addLabelToCard(f.id),["stop","prevent"])},[M(v(f.title)+" ",1),r.card.labels.includes(f.id)?(l(),d("div",kr)):c("",!0)],12,yr)],4),t("button",{class:"icon-sm icon-edited",onClick:u(g=>s.openEditLabel(f),["stop","prevent"])},null,8,wr)]))),128)),t("button",{type:"button",onClick:e[1]||(e[1]=u((...f)=>s.createNewLabel&&s.createNewLabel(...f),["stop","prevent"])),class:"create-btn"},"Create a new label")])],4)),[[a,s.close]]),i.isLabelEditOpen?(l(),T(n,{key:1,board:r.board,label:s.currLabel,pos:r.pos,new:i.isCreate,onSaveLabel:s.saveLabelToBoard,onDeleteLabel:s.deleteLabelFromBoard,onCloseEditLabel:s.closeLabelEdit,onCloseBoth:s.closeModal},null,8,["board","label","pos","new","onSaveLabel","onDeleteLabel","onCloseEditLabel","onCloseBoth"])):c("",!0)])}var Y=y(gr,[["render",Tr]]);const Br={components:{},name:"members-modal",props:{board:{type:Object},card:{type:Object},group:{type:Object},pos:{type:Object}},data(){return{cardToEdit:JSON.parse(JSON.stringify(this.card)),isLabelEditOpen:!1}},computed:{membersToEdit(){return this.card.members.map(o=>o._id)}},created(){},methods:{setBottomPos(o){return window.innerHeight-o<310?window.innerHeight-310:o+8},close(){this.$emit("actionsClose")},addMemberToCard(o){if(this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.cardToEdit.members.length){const e=this.cardToEdit.members.findIndex(r=>r._id===o._id);e===-1?this.cardToEdit.members.push(o):this.cardToEdit.members.splice(e,1)}else this.cardToEdit.members.push(o);this.$emit("cardEdit",this.cardToEdit)},setMemberLetters(o){return o.split(" ").map(r=>r[0]).join("").toUpperCase()}},emits:["actionsClose","cardEdit","boardEdit"]},Er={class:"main-title-container"},xr=t("span",{class:"main-title"},"Members",-1),Or=t("input",{class:"main-input",type:"text"},null,-1),Mr=t("span",{class:"mini-title"},"Board members",-1),Sr=["onClick"],Ur={class:"member-div"},Ar=["src"],Lr={key:1,class:"member"},Dr={key:2,class:"icon-sm icon-check"};function Nr(o,e,r,h,i,s){const n=U("clickOutside");return i.isLabelEditOpen?c("",!0):_((l(),d("section",{key:0,style:b({top:s.setBottomPos(r.pos.bottom)+"px",left:r.pos.left+"px"}),class:"label-modal"},[t("div",Er,[t("div",{class:"icon-sm icon-close",onClick:e[0]||(e[0]=u((...a)=>s.close&&s.close(...a),["stop","prevent"]))}),xr]),Or,t("section",null,[Mr,(l(!0),d(E,null,x(r.board.members,a=>(l(),d("section",{onClick:u(f=>s.addMemberToCard(a),["stop","prevent"]),key:a._id,class:"member-container"},[t("div",Ur,[a.imgUrl?(l(),d("img",{key:0,class:"member-avatar",src:a.imgUrl,alt:""},null,8,Ar)):(l(),d("div",Lr,v(s.setMemberLetters(a.fullname)),1)),t("span",null,v(a.fullname),1),s.membersToEdit.includes(a._id)?(l(),d("div",Dr)):c("",!0)])],8,Sr))),128))])],4)),[[n,s.close]])}var X=y(Br,[["render",Nr]]);const Ir={components:{search:ue},name:"dates-modal",setup(){const o=le(new Date),e=le(new Date);return{date:o,startDate:e}},props:{board:{type:Object},card:{type:Object},group:{type:Object},pos:{type:Object}},data(){return{isStartDate:!1}},computed:{cardToEdit(){return JSON.parse(JSON.stringify(this.card))}},created(){},methods:{setBottomPos(o){return window.innerHeight-o<480?window.innerHeight-480:o+8},close(){this.$emit("actionsClose")},saveDate(){this.cardToEdit.date=this.date.getTime(),this.$emit("cardEdit",this.cardToEdit),this.$emit("actionsClose")},startDateInit(){this.isStartDate=!this.isStartDate}},emits:["actionsClose","cardEdit"]},Fr={class:"main-title-container"},Jr=t("span",{class:"main-title"},"Dates",-1),Pr={class:"actions-modal-main"},Rr={class:"date-picker"};function Gr(o,e,r,h,i,s){const n=w("datepicker"),a=U("clickOutside");return _((l(),d("section",{style:b({top:s.setBottomPos(r.pos.bottom)+"px",left:r.pos.left+"px"}),class:"label-modal"},[t("div",Fr,[t("div",{class:"icon-sm icon-close",onClick:e[0]||(e[0]=u((...f)=>s.close&&s.close(...f),["stop","prevent"]))}),Jr]),t("section",Pr,[t("section",Rr,[A(n,{modelValue:h.date,"onUpdate:modelValue":e[1]||(e[1]=f=>h.date=f),inline:"",autoApply:"",typeabble:""},null,8,["modelValue"]),t("button",{type:"button",onClick:e[2]||(e[2]=u((...f)=>s.saveDate&&s.saveDate(...f),["stop","prevent"])),class:"create-btn date-modal-btn"},"Save"),t("button",{type:"button",onClick:e[3]||(e[3]=u((...f)=>o.remove&&o.remove(...f),["stop","prevent"])),class:"create-btn delete-date"},"Remove")])])],4)),[[a,s.close]])}var Q=y(Ir,[["render",Gr]]);const jr={name:"delete-modal",props:{title:{},pos:{type:Object}},data(){return{}},computed:{},created(){},methods:{setBottomPos(o){return window.innerHeight-o<175?window.innerHeight-175:o+8},close(){this.$emit("closeDeleteWarning")},confirmDelete(){this.$emit("deleteConfirmed")}},emits:["closeDeleteWarning","deleteConfirmed"]},Wr={class:"main-title-container"},Vr={class:"main-title"},zr={class:"delete-modal-main"},Hr={class:"delete-txt"};function Kr(o,e,r,h,i,s){const n=U("clickOutside");return _((l(),d("section",{style:b({top:s.setBottomPos(r.pos.bottom)+"px",left:r.pos.left+"px"}),class:"label-modal"},[t("div",Wr,[t("div",{class:"icon-sm icon-close",onClick:e[0]||(e[0]=(...a)=>s.close&&s.close(...a))}),t("span",Vr,"Delete "+v(r.title)+"?",1)]),t("section",zr,[t("span",Hr,"There is no undo. This will remove this "+v(r.title)+" and destroy its history.",1),t("button",{type:"button",onClick:e[1]||(e[1]=(...a)=>s.confirmDelete&&s.confirmDelete(...a)),class:"delete-btn"},"Delete")])],4)),[[n,s.close]])}var ee=y(jr,[["render",Kr]]);const Ce={uploadFromSystem:Zr};async function Zr(o){this.file=o.target.files[0];let e=new FormData;e.append("file",this.file),e.append("upload_preset","cajan_2022");try{return(await q.post("https://api.cloudinary.com/v1_1/dw85wdwsw/image/upload",e)).data}catch(r){console.log("ERROR",r)}}const qr={components:{},name:"cover-modal",props:{board:{type:Object},card:{type:Object},group:{type:Object},pos:{type:Object}},data(){return{cardToEdit:null,color:"",isSmall:!0,file:"",isDark:!0,attachmentIdx:"",isLoading:!1}},computed:{},created(){this.card.cover.type==="color"&&(this.color=this.card.cover.value,this.isSmall=this.card.cover.size==="small",this.isDark=this.card.cover.theme==="dark"),this.card.cover.type==="attachment"&&(this.attachmentIdx=this.card.attachments.findIndex(o=>o.link===this.card.cover.value),this.isSmall=this.card.cover.size==="small",this.isDark=this.card.cover.theme==="dark")},computed:{isColorPicked(){return this.color!==""},isAttachmentPicked(){return this.attachmentIdx!==""}},methods:{close(){this.$emit("actionsClose")},setCoverColor(o){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.color===o?(this.color="",this.cardToEdit.cover={}):(this.color=o,this.cardToEdit.cover.type="color",this.cardToEdit.cover.value=this.color,this.cardToEdit.cover.size=this.isSmall?"small":"large"),this.attachmentIdx="",this.$emit("cardEdit",this.cardToEdit)},setSize(){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.cardToEdit.cover.size=this.isSmall?"small":"large",this.$emit("cardEdit",this.cardToEdit)},setTheme(o){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.isDark=o==="dark",this.cardToEdit.cover.theme=this.isDark?"dark":"light",this.$emit("cardEdit",this.cardToEdit)},async attachFileFromSystem(o){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.isLoading=!0;const e=await Ce.uploadFromSystem(o);this.isLoading=!1,this.cardToEdit.attachments.unshift({id:I.makeId(),name:e.original_filename,link:e.secure_url}),this.$emit("cardEdit",this.cardToEdit)},setAttachmentAsCover(o){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.attachmentIdx===o?(this.attachmentIdx="",this.cardToEdit.cover={}):(this.attachmentIdx=o,this.cardToEdit.cover.type="attachment",this.cardToEdit.cover.value=this.cardToEdit.attachments[o].link,this.cardToEdit.cover.size=this.isSmall?"small":"large",this.cardToEdit.cover.theme=this.isDark?"dark":"light"),this.color="",this.$emit("cardEdit",this.cardToEdit)},removeCover(){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.cardToEdit.cover={},this.color="",this.attachmentIdx="",this.$emit("cardEdit",this.cardToEdit)}},emits:["actionsClose","cardEdit"]},$r={class:"main-title-container"},Yr=t("span",{class:"main-title"},"Cover",-1),Xr={class:"actions-modal-main"},Qr=t("span",{class:"mini-title"},"Size",-1),ei={class:"cover-size-select"},ti={class:"cover-main"},si={class:"cover-footer"},oi={class:"cover-main"},ri={key:1},ii=t("span",{class:"mini-title"},"Text color",-1),li={class:"cover-mode-container"},di=t("span",{class:"mini-title"},"Colors",-1),ai={class:"cover-colors"},ni=t("span",{class:"mini-title"},"Attachments",-1),ci={key:2,class:"attachment-container"},ui=["onClick","src"],hi={key:3,class:"cover-loading"},mi=t("img",{class:"loading-svg",src:"https://res.cloudinary.com/dw85wdwsw/image/upload/v1648563503/dlcjcnpz0afvbj2mgrqj.svg"},null,-1),pi=[mi];function gi(o,e,r,h,i,s){const n=U("clickOutside");return _((l(),d("section",{style:b({top:r.pos.bottom+8+"px",left:r.pos.left+"px"}),class:"label-modal"},[t("div",$r,[t("div",{class:"icon-sm icon-close",onClick:e[0]||(e[0]=u((...a)=>s.close&&s.close(...a),["stop","prevent","stop","prevent"]))}),Yr]),t("section",Xr,[Qr,t("section",ei,[t("section",{onClick:e[1]||(e[1]=u(a=>(i.isSmall=!0,s.setSize()),["stop","prevent"])),class:k([{selected:(s.isColorPicked||s.isAttachmentPicked)&&i.isSmall===!0,nonselected:(s.isColorPicked||s.isAttachmentPicked)&&i.isSmall===!1},"cover-size-small"]),style:b([s.isColorPicked||s.isAttachmentPicked?{cursor:"pointer"}:{}])},[t("div",{class:"cover-header",style:b([s.isColorPicked?{backgroundColor:i.color}:s.isAttachmentPicked?{backgroundImage:"url("+r.card.attachments[i.attachmentIdx].link+")"}:{backgroundColor:"#CFD3DA"}])},null,4),t("div",ti,[t("div",{class:"line-1",style:b([s.isColorPicked?{backgroundColor:"#6B778C"}:{backgroundColor:"#CFD3DA"}])},null,4),t("div",{class:"line-2",style:b([s.isColorPicked?{backgroundColor:"#6B778C"}:{backgroundColor:"#CFD3DA"}])},null,4),t("div",si,[t("div",{class:"box-1",style:b([s.isColorPicked?{backgroundColor:"#6B778C"}:{backgroundColor:"#CFD3DA"}])},null,4),t("div",{class:"box-2",style:b([s.isColorPicked?{backgroundColor:"#6B778C"}:{backgroundColor:"#CFD3DA"}])},null,4),t("div",{class:"circle",style:b([s.isColorPicked?{backgroundColor:"#6B778C"}:{backgroundColor:"#CFD3DA"}])},null,4)])])],6),t("section",{class:k(["cover-size-all",{selected:(s.isColorPicked||s.isAttachmentPicked)&&i.isSmall===!1,nonselected:(s.isColorPicked||s.isAttachmentPicked)&&i.isSmall===!0}]),onClick:e[2]||(e[2]=u(a=>(i.isSmall=!1,s.setSize()),["stop","prevent"])),style:b([s.isColorPicked?{backgroundColor:i.color,cursor:"pointer"}:s.isAttachmentPicked?{backgroundImage:"url("+r.card.attachments[i.attachmentIdx].link+")",cursor:"pointer"}:{backgroundColor:"#CFD3DA"}])},[t("div",oi,[t("div",{class:"line-1",style:b([s.isColorPicked&&i.color!=="#172B4D"?{backgroundColor:"rgba(9, 30, 66, 0.6)"}:{backgroundColor:"#FFFFFF"}])},null,4),t("div",{class:"line-2",style:b([s.isColorPicked&&i.color!=="#172B4D"?{backgroundColor:"rgba(9, 30, 66, 0.6)"}:{backgroundColor:"#FFFFFF"}])},null,4)])],6)]),s.isColorPicked||s.isAttachmentPicked?(l(),d("button",{key:0,type:"button",onClick:e[3]||(e[3]=u((...a)=>s.removeCover&&s.removeCover(...a),["stop","prevent"])),class:"create-btn"},"Remove cover")):c("",!0),s.isAttachmentPicked&&!i.isSmall?(l(),d("section",ri,[ii,t("div",li,[t("div",{class:k(["dark",{selected:i.isDark}]),onClick:e[4]||(e[4]=u(a=>s.setTheme("dark"),["stop","prevent"])),style:b({backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+r.card.cover.value+")"})},[t("span",null,v(r.card.title),1)],6),t("div",{class:k(["light",{selected:!i.isDark}]),onClick:e[5]||(e[5]=u(a=>s.setTheme("light"),["stop","prevent"])),style:b({backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5)), url("+r.card.cover.value+")"})},[t("span",null,v(r.card.title),1)],6)])])):c("",!0),di,t("section",ai,[t("div",{onClick:e[6]||(e[6]=u(a=>s.setCoverColor("#7BC86C"),["stop","prevent"])),class:k([{selected:i.color==="#7BC86C"},"green color-pref-cover"])},null,2),t("div",{onClick:e[7]||(e[7]=u(a=>s.setCoverColor("#F5DD29"),["stop","prevent"])),class:k([{selected:i.color==="#F5DD29"},"yellow color-pref-cover"])},null,2),t("div",{onClick:e[8]||(e[8]=u(a=>s.setCoverColor("#FFAF3F"),["stop","prevent"])),class:k([{selected:i.color==="#FFAF3F"},"orange color-pref-cover"])},null,2),t("div",{onClick:e[9]||(e[9]=u(a=>s.setCoverColor("#EF7564"),["stop","prevent"])),class:k([{selected:i.color==="#EF7564"},"red color-pref-cover"])},null,2),t("div",{onClick:e[10]||(e[10]=u(a=>s.setCoverColor("#CD8DE5"),["stop","prevent"])),class:k([{selected:i.color==="#CD8DE5"},"purple color-pref-cover"])},null,2),t("div",{onClick:e[11]||(e[11]=u(a=>s.setCoverColor("#5BA4CF"),["stop","prevent"])),class:k([{selected:i.color==="#5BA4CF"},"blue color-pref-cover"])},null,2),t("div",{onClick:e[12]||(e[12]=u(a=>s.setCoverColor("#29CCE5"),["stop","prevent"])),class:k([{selected:i.color==="#29CCE5"},"light-blue color-pref-cover"])},null,2),t("div",{onClick:e[13]||(e[13]=u(a=>s.setCoverColor("#6DECA9"),["stop","prevent"])),class:k([{selected:i.color==="#6DECA9"},"light-green color-pref-cover"])},null,2),t("div",{onClick:e[14]||(e[14]=u(a=>s.setCoverColor("#FF8ED4"),["stop","prevent"])),class:k([{selected:i.color==="#FF8ED4"},"pink color-pref-cover"])},null,2),t("div",{onClick:e[15]||(e[15]=u(a=>s.setCoverColor("#172B4D"),["stop","prevent"])),class:k([{selected:i.color==="#172B4D"},"dark-blue color-pref-cover"])},null,2)]),ni,r.card.attachments.length?(l(),d("section",ci,[(l(!0),d(E,null,x(r.card.attachments,(a,f)=>(l(),d("section",{key:a.link},[t("img",{class:k([{selected:i.attachmentIdx===f},"attachment"]),onClick:u(g=>s.setAttachmentAsCover(f),["stop","prevent"]),src:a.link},null,10,ui)]))),128))])):c("",!0),i.isLoading?(l(),d("section",hi,pi)):c("",!0),t("input",{onChange:e[16]||(e[16]=a=>s.attachFileFromSystem(a)),type:"file",ref:"file",style:{display:"none"}},null,544),t("button",{type:"button",onClick:e[17]||(e[17]=a=>o.$refs.file.click()),class:"create-btn"},"Upload a cover image")])],4)),[[n,s.close]])}var te=y(qr,[["render",gi]]);const vi={name:"copy-modal",props:{board:{type:Object},card:{type:Object},group:{type:Object},pos:{type:Object}},data(){return{keepList:{labels:!0,members:!0},positions:[],cardToCopy:null,copyToPos:{group:"",position:1}}},created(){this.setCardToCopy()},methods:{setBottomPos(o){if(console.log('screen.height + "px"',window.innerHeight),window.innerHeight-o<290){console.log("true");const e=window.innerHeight-290;return console.log("bottom",e),e}else return o+8},setCardToCopy(){this.cardToCopy=JSON.parse(JSON.stringify(this.card))},close(){this.$emit("actionsClose")},toggleCardKeep(o){this.keepList[o]=!this.keepList[o]},setGroupPosition(o){const e=o.target.value,r=this.board.groups.find(s=>s.id===e);this.copyToPos.group=r,this.positions=[];for(var h=0,i=r.cards.length?r.cards.length:1;h<i;)h++,this.positions.push(h)},setCardPosition(o){const e=o.target.value;this.copyToPos.position=e},setCardKeeps(){this.keepList.labels?this.cardToCopy.labels=JSON.parse(JSON.stringify(this.card.labels)):this.cardToCopy.labels=[],this.keepList.members?this.cardToCopy.members=JSON.parse(JSON.stringify(this.card.members)):this.cardToCopy.members=[],this.copyCard(),this.close()},copyCard(){this.$emit("cardCopySave",{cardCopy:this.cardToCopy,posCopy:this.copyToPos})}},emits:["actionsClose","cardCopySave"]},bi={class:"header-modal"},_i=t("p",null,"Copy card",-1),fi=t("p",{class:"header-second"},"Title",-1),Ci={key:0},yi=t("p",{class:"header-second"},"Keep",-1),ki={class:"keep-list"},wi={key:0,class:"keep-checkbox"},Ti=M(" Labels "),Bi={class:"length"},Ei={key:1,class:"keep-checkbox"},xi=M(" Members "),Oi={class:"length"},Mi=t("p",{class:"header-second"},"Copy to...",-1),Si={class:"selects-box-main"},Ui={class:"select-box"},Ai=t("label",{for:"group"},"List",-1),Li=["value"],Di={class:"select-box"},Ni=t("label",{for:"position"},"Position",-1),Ii=["value"];function Fi(o,e,r,h,i,s){const n=U("clickOutside");return _((l(),d("section",{style:b({top:s.setBottomPos(r.pos.bottom)+"px",left:r.pos.left+"px"}),class:"copy-modal-main"},[t("div",bi,[t("div",null,[_i,t("span",{class:"icon-sm icon-close",onClick:e[0]||(e[0]=u((...a)=>s.close&&s.close(...a),["stop","prevent"]))})])]),t("div",null,[fi,_(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=a=>i.cardToCopy.title=a),name:"copy-card",id:"copy-card"},null,512),[[O,i.cardToCopy.title]])]),r.card.labels.length||r.card.members.length?(l(),d("div",Ci,[yi,t("div",ki,[r.card.labels.length?(l(),d("div",wi,[i.keepList.labels?c("",!0):(l(),d("div",{key:0,onClick:e[2]||(e[2]=u(a=>s.toggleCardKeep("labels"),["stop","prevent"])),class:"checkbox"})),i.keepList.labels?(l(),d("img",{key:1,onClick:e[3]||(e[3]=u(a=>s.toggleCardKeep("labels"),["stop","prevent"])),class:"done-img",src:"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23fff' viewBox='-3 -4 16 16'%3E%3Cpath d='M1.49 3.215a.667.667 0 0 0-.98.903l2.408 2.613c.358.351.892.351 1.223.02l.243-.239a1689.645 1689.645 0 0 0 2.625-2.589l.027-.026a328.23 328.23 0 0 0 2.439-2.429.667.667 0 1 0-.95-.936c-.469.476-1.314 1.316-2.426 2.417l-.027.026a1368.126 1368.126 0 0 1-2.517 2.482L1.49 3.215z'/%3E%3C/svg%3E"})):c("",!0),t("p",null,[Ti,t("span",Bi,"("+v(r.card.labels.length)+")",1)])])):c("",!0),r.card.members.length?(l(),d("div",Ei,[i.keepList.members?c("",!0):(l(),d("div",{key:0,onClick:e[4]||(e[4]=u(a=>s.toggleCardKeep("members"),["stop","prevent"])),class:"checkbox"})),i.keepList.members?(l(),d("img",{key:1,onClick:e[5]||(e[5]=u(a=>s.toggleCardKeep("members"),["stop","prevent"])),class:"done-img",src:"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23fff' viewBox='-3 -4 16 16'%3E%3Cpath d='M1.49 3.215a.667.667 0 0 0-.98.903l2.408 2.613c.358.351.892.351 1.223.02l.243-.239a1689.645 1689.645 0 0 0 2.625-2.589l.027-.026a328.23 328.23 0 0 0 2.439-2.429.667.667 0 1 0-.95-.936c-.469.476-1.314 1.316-2.426 2.417l-.027.026a1368.126 1368.126 0 0 1-2.517 2.482L1.49 3.215z'/%3E%3C/svg%3E"})):c("",!0),t("p",null,[xi,t("span",Oi,"("+v(r.card.members.length)+")",1)])])):c("",!0)])])):c("",!0),t("div",null,[Mi,t("div",Si,[t("div",Ui,[Ai,t("select",{placeholder:"List",class:"select-board",onChange:e[6]||(e[6]=a=>s.setGroupPosition(a)),id:"group",name:"group"},[(l(!0),d(E,null,x(r.board.groups,a=>(l(),d("option",{selected:"selected",key:a.id,value:a.id},v(a.title),9,Li))),128))],32)]),t("div",Di,[Ni,t("select",{id:"position",name:"position",placeholder:"Position",class:"select-pos-card",onChange:e[7]||(e[7]=a=>s.setCardPosition(a))},[(l(!0),d(E,null,x(i.positions,a=>(l(),d("option",{key:a,value:a},v(a),9,Ii))),128))],32)])])]),t("button",{onClick:e[8]||(e[8]=u((...a)=>s.setCardKeeps&&s.setCardKeeps(...a),["stop","prevent"]))},"Create card")],4)),[[n,s.close]])}var se=y(vi,[["render",Fi]]);const Ji={name:"card-preview",props:{board:{type:Object},group:{type:Object},card:{type:Object,required:!0},isLabelOpen:{type:Boolean}},components:{Container:ae,Draggable:ne,labelModal:Y,membersModal:X,datesModal:Q,moment:W,coverModal:te,deleteWarning:ee,copyModal:se},data(){return{currModal:null,isModalShown:!1,pos:0,posOfEditor:0,isLabelDark:!1,modalOpen:!1,titleIsOpen:!1,warningOpen:!1,warningTitle:"",groupToEdit:{},cardToDisplay:JSON.parse(JSON.stringify(this.card)),cardToEdit:{title:""},isActionsOpen:!1,activeComponent:null,isLabelClicked:!1,timeCalc:null}},created(){},methods:{setChecklistPreview(o){var e=JSON.parse(JSON.stringify(o)),r=0,h=[];return e.forEach(i=>r+=i.todos.length),e.forEach(i=>i.todos.forEach(s=>h.push(s))),h=h.filter(i=>i.isComplete),h.length+"/"+r},openThisModal(o,e){if(this.isModalShown===!0&&o===this.currModal)this.isModalShown=!1;else{const r=this.$refs[e].getBoundingClientRect();this.posOfEditor=JSON.parse(JSON.stringify(r)),this.posOfEditor.left-=5,this.posOfEditor.bottom-=4,this.isModalShown=!0,this.currModal=o}},openTitleEdit(){},editBoard(o){this.$emit("boardUpdated",o)},CopyNewCard(o){this.$emit("copyCardToGroup",o),this.closeModal()},changeTitle(o){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.cardToEdit.title=o,this.$emit("editCard",{card:this.cardToEdit,group:this.group}),this.titleIsOpen=!1},calcPosOfModal(){this.pos=this.$refs["card-modal"].getBoundingClientRect()},openMiniEdit(){this.pos=this.$refs["card-modal"].getBoundingClientRect(),this.cardToDisplay=JSON.parse(JSON.stringify(this.card)),this.$emit("toggleQuickEdit",{card:this.cardToDisplay,group:this.group,pos:this.pos})},openDetails(){this.modalOpen=!1,this.isModalShown=!1,this.$emit("openCard",{card:this.card,group:this.group})},openAllLabels(){this.isLabelClicked=!this.isLabelClicked,this.$emit("openAllLabels",this.isLabelClicked)},closeModal(){this.modalOpen=!1,this.isModalShown=!1,this.$emit("toggleQuickEdit")},deleteWarn(){this.posOfEditor=this.$refs.deleteBtn.getBoundingClientRect(),this.warningTitle="card",this.warningOpen=!0},closeWarning(){this.warningOpen=!1},deleteCard(){this.groupToEdit=JSON.parse(JSON.stringify(this.group));const o=this.groupToEdit.cards.findIndex(e=>e.id===this.card.id);this.groupToEdit.cards.splice(o,1),this.$emit("deleteCard",this.groupToEdit),this.modalOpen=!1},showEditedCard(o){this.cardToDisplay=o},saveCard(){this.$emit("editCard",{card:this.cardToDisplay,group:this.group}),this.isModalShown=!1,this.closeModal()},setMemberLetters(o){return o.split(" ").map(r=>r[0]).join("").toUpperCase()},closeMenu(){this.isModalShown=!1},onDateClicked(){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.cardToEdit.isComplete=!this.cardToEdit.isComplete,this.$emit("editCard",{card:this.cardToEdit,group:this.group})},darkenLabels(){this.isLabelDark=!0},lightenLabels(){this.isLabelDark=!1},lightenDarkenColor(o){if(o==="#61BD4F")return"#519839";if(o==="#F2D600")return"#d9b51c";if(o==="#FF9F1A")return"#cd8313";if(o==="#EB5A46")return"#b04632";if(o==="#C377E0")return"#89609e";if(o==="#0079BF")return"#055a8c";if(o==="#00C2E0")return"#0098b7";if(o==="#51E898")return"#4bbf6b";if(o==="#FF78CB")return"#c9558f";if(o==="#344563")return"#091e42"}},computed:{openLabels(){return{labelOpen:this.isLabelOpen}},setDateFormat(){const o=Date.now()-this.card.date;this.timeCalc=o;const e=new Date(this.card.date);return Intl.DateTimeFormat("en-Us",{month:"short",day:"numeric"}).format(e)},updateDateStyle(){return{dateUncompleted:!this.cardToDisplay.isComplete,dateCompleted:this.cardToDisplay.isComplete,datePast:this.timeCalc>0}}},emits:["copyCardToGroup","openCard","editCard","openAllLabels","deleteCard","boardUpdated","toggleQuickEdit"]},Pi={key:0},Ri={class:"card-title"},Gi={key:1},ji=["src"],Wi={key:2},Vi={key:3},zi=["src"],Hi={key:4,class:"card-preview-main"},Ki={key:0,class:"labels"},Zi={class:"card-title cursor-pointer"},qi={class:"card-bar"},$i={class:"card-bar-icon"},Yi=t("span",{class:"icon-sm icon-clock-in-date"},null,-1),Xi={class:"date-txt"},Qi={key:0,class:"attachments"},el=t("span",{class:"icon-sm icon-attachment-pre"},null,-1),tl={class:"attachments-length"},sl={key:1,class:"description"},ol=t("span",{class:"icon-sm icon-description"},null,-1),rl=[ol],il={key:2,class:"comments"},ll=t("span",{class:"icon-sm icon-comments-pre"},null,-1),dl={class:"length"},al={key:3,class:"checklists"},nl=t("span",{class:"icon-sm icon-checklists-pre"},null,-1),cl={class:"nums"},ul={class:"card-bar-members"},hl={key:0,class:"members"},ml=["src"],pl={key:1,class:"member"};function gl(o,e,r,h,i,s){return l(),d("section",{onClick:e[5]||(e[5]=u((...n)=>s.openDetails&&s.openDetails(...n),["stop","prevent"]))},[t("section",{ref:"card-modal",class:"card-preview cursor-pointer flex",style:b(r.group.cards.findIndex(n=>n.id===r.card.id)===r.group.length-1?{marginBottom:0+"px"}:{})},[r.card.cover.type==="color"&&r.card.cover.size==="large"?(l(),d("section",Pi,[t("div",{class:"card-cover-color-large cursor-pointer",style:b({backgroundColor:r.card.cover.value})},[t("div",Ri,[t("span",{style:b(r.card.cover.value==="#172B4D"?{color:"#FFFFFF"}:{color:"#172B4D"})},v(r.card.title),5)])],4)])):c("",!0),r.card.cover.type==="attachment"&&r.card.cover.size==="large"?(l(),d("section",Gi,[t("div",{class:"card-cover-attachment-large cursor-pointer",style:b({backgroundImage:"url("+r.card.cover.value+")"})},[t("img",{src:r.card.cover.value,style:{visibility:"hidden"}},null,8,ji),t("div",{class:k({coverlight:r.card.cover.theme==="light",coverdark:r.card.cover.theme==="dark"})},null,2),t("div",{class:k(["card-title",{covertitlelight:r.card.cover.theme==="light",covertitledark:r.card.cover.theme==="dark"}])},[t("span",null,v(r.card.title),1)],2)],4)])):c("",!0),r.card.cover.type==="color"&&r.card.cover.size==="small"?(l(),d("section",Wi,[t("div",{class:"card-cover-color-small",style:b({backgroundColor:r.card.cover.value})},null,4)])):c("",!0),r.card.cover.type==="attachment"&&r.card.cover.size==="small"?(l(),d("section",Vi,[t("div",{class:"card-cover-attachment-small",style:b({backgroundImage:"url("+r.card.cover.value+")"})},[t("img",{src:r.card.cover.value,style:{visibility:"hidden"}},null,8,zi)],4)])):c("",!0),t("button",{class:"icon-sm icon-edit",onClick:e[0]||(e[0]=u(n=>s.openMiniEdit(n),["stop","prevent"]))}),r.card.cover.size!=="large"?(l(),d("section",Hi,[r.card.labels.length&&r.board.labels.length?(l(),d("div",Ki,[(l(!0),d(E,null,x(r.card.labels,n=>(l(),d("div",{key:n,class:k(["label",s.openLabels]),onMouseover:e[1]||(e[1]=(...a)=>s.darkenLabels&&s.darkenLabels(...a)),onMouseleave:e[2]||(e[2]=(...a)=>s.lightenLabels&&s.lightenLabels(...a)),onClick:e[3]||(e[3]=u((...a)=>s.openAllLabels&&s.openAllLabels(...a),["stop","prevent"])),style:b(i.isLabelDark?{backgroundColor:s.lightenDarkenColor(r.board.labels[r.board.labels.findIndex(a=>a.id===n)].color)}:{backgroundColor:r.board.labels[r.board.labels.findIndex(a=>a.id===n)].color})},v(r.board.labels[r.board.labels.findIndex(a=>a.id===n)].title),39))),128))])):c("",!0),t("div",null,[t("p",Zi,v(r.card.title),1)]),t("div",qi,[t("div",$i,[r.card.date?(l(),d("div",{key:0,class:k(["date",s.updateDateStyle]),onClick:e[4]||(e[4]=u((...n)=>s.onDateClicked&&s.onDateClicked(...n),["stop","prevent"]))},[Yi,t("span",Xi,v(s.setDateFormat),1)],2)):c("",!0)]),r.card.attachments.length?(l(),d("div",Qi,[el,t("span",tl,v(r.card.attachments.length),1)])):c("",!0),r.card.description?(l(),d("div",sl,rl)):c("",!0),r.card.comments.length?(l(),d("div",il,[ll,t("span",dl,v(r.card.comments.length),1)])):c("",!0),r.card.checklists.length?(l(),d("div",al,[nl,t("span",cl,v(s.setChecklistPreview(r.card.checklists)),1)])):c("",!0),t("div",ul,[r.card.members.length&&r.board.members.length?(l(),d("div",hl,[(l(!0),d(E,null,x(r.card.members,n=>(l(),d("div",{class:"member-in-card",key:n._id},[n.imgUrl?(l(),d("img",{key:0,class:"member-avatar",src:n.imgUrl,alt:""},null,8,ml)):(l(),d("div",pl,v(s.setMemberLetters(n.fullname)),1))]))),128))])):c("",!0)])])])):c("",!0)],4)])}var vl=y(Ji,[["render",gl]]);const bl={props:{id:{type:String}},methods:{closeModal(){this.$emit("close")},removeList(o){this.$emit("remove",o)}}},_l={class:"group-edit-modal"},fl={class:"group-modal-header"},Cl=t("div",{class:"header-text-group-modal"},[t("h1",null,"List actions")],-1),yl=t("svg",{width:"10",height:"10",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.58579 7L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683418 0.292893 0.292893C0.683418 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L7 5.58579L12.2929 0.292893C12.6834 -0.0976311 13.3166 -0.0976311 13.7071 0.292893C14.0976 0.683418 14.0976 1.31658 13.7071 1.70711L8.41421 7L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L7 8.41421L1.70711 13.7071C1.31658 14.0976 0.683418 14.0976 0.292893 13.7071C-0.0976311 13.3166 -0.0976311 12.6834 0.292893 12.2929L5.58579 7Z",fill:"currentColor"})],-1),kl=[yl],wl={class:"group-modal-actions-list"};function Tl(o,e,r,h,i,s){return l(),d("div",_l,[t("div",fl,[Cl,t("div",{class:"header-close-edit-group-modal",onClick:e[0]||(e[0]=(...n)=>s.closeModal&&s.closeModal(...n))},kl)]),t("div",wl,[t("div",{class:"group-modal-action",onClick:e[1]||(e[1]=n=>s.removeList(r.id))},"Remove this list")])])}var Bl=y(bl,[["render",Tl]]);const El={name:"toggle-input",props:{id:{type:String},title:{type:String}},data(){return{txt:"",titleIsOpen:!1,openGroupEdit:!1,pos:0,boardToEdit:null}},created(){this.txt=this.title},methods:{openTitleEdit(){this.titleIsOpen=!0},change(){!this.txt||(this.titleIsOpen=!1,this.$emit("titleChange",{txt:this.txt,id:this.id}))},openEditGroupModal(){this.openGroupEdit=!0},closeEditMode(){this.openGroupEdit=!1},removeGroup(o){this.$emit("groupDelete",o),this.closeEditMode()},calcPosOfBox(){this.pos=this.$refs.box.getBoundingClientRect()}},components:{groupEdit:Bl},emits:["titleChange","groupDelete"]},xl={class:"toggle-input"};function Ol(o,e,r,h,i,s){const n=w("group-edit"),a=U("focus"),f=U("clickOutside");return l(),d("section",xl,[i.titleIsOpen?c("",!0):(l(),d("p",{key:0,class:"group-title cursor-pointer",onClick:e[0]||(e[0]=u((...g)=>s.openTitleEdit&&s.openTitleEdit(...g),["stop","prevent"]))},v(i.txt),1)),i.titleIsOpen?_((l(),d("input",{key:1,"onUpdate:modelValue":e[1]||(e[1]=g=>i.txt=g),type:"text",onSubmit:e[2]||(e[2]=u((...g)=>s.change&&s.change(...g),["prevent"]))},null,544)),[[a],[f,s.change],[O,i.txt]]):c("",!0),t("span",{onClick:e[3]||(e[3]=u(g=>(s.calcPosOfBox(),s.openEditGroupModal()),["stop","prevent"])),ref:"box",class:"icon-sm icon-overflow-menu-horizontal"},null,512),i.openGroupEdit?_((l(),T(n,{key:2,style:b({top:"138px",left:i.pos.left+"px"}),onClose:s.closeEditMode,id:r.id,onRemove:s.removeGroup},null,8,["style","onClose","id","onRemove"])),[[f,s.closeEditMode]]):c("",!0)])}var Ml=y(El,[["render",Ol]]);const Sl={name:"group-list",components:{cardPreview:vl,toggleInputCmp:Ml,Container:ae,Draggable:ne,labelModal:Y,membersModal:X,datesModal:Q,coverModal:te,deleteWarning:ee,copyModal:se},props:{groups:{type:Array},newGroup:{type:Object},board:{type:Object,required:!0}},data(){return{show:!1,groupToDisplay:{title:""},groupToEdit:null,titleIsOpen:!1,isLabelOpen:!1,isQuickEditOpen:!1,currModal:null,isModalShown:!1,pos:0,posOfEditor:0,isLabelDark:!1,modalOpen:!1,titleIsOpen:!1,warningOpen:!1,warningTitle:"",groupToEdit:{},cardToDisplay:{},cardToEdit:{title:""},timeCalc:null,newCard:{},isAddingCard:!1}},created(){},computed:{boardToEdit(){return JSON.parse(JSON.stringify(this.board))},pointerEvents(){return this.isQuickEditOpen},setDateFormat(){const o=Date.now()-this.cardToDisplay.date;this.timeCalc=o;const e=new Date(this.cardToDisplay.date);return Intl.DateTimeFormat("en-Us",{month:"short",day:"numeric"}).format(e)},updateDateStyle(){return{dateUncompleted:!this.cardToDisplay.isComplete,dateCompleted:this.cardToDisplay.isComplete,datePast:this.timeCalc>0}}},methods:{openCardAdder(o){this.newCard.id||(this.newCard=S.getEmptyCard()),this.groupToEdit=JSON.parse(JSON.stringify(o)),this.isAddingCard=!0},saveNewCard(o){this.newCard.title!==""&&(this.groupToEdit=JSON.parse(JSON.stringify(o)),this.groupToEdit.cards.push(this.newCard),this.$emit("groupUpdated",this.groupToEdit),this.newCard=S.getEmptyCard())},saveNewCardAndClose(){if(this.newCard.title===""){this.isAddingCard=!1;return}this.groupToEdit.cards.push(this.newCard),this.$emit("groupUpdated",this.groupToEdit),this.newCard=S.getEmptyCard(),this.isAddingCard=!1},closeAddACard(){this.isAddingCard=!1},setChecklistPreview(o){var e=JSON.parse(JSON.stringify(o)),r=0,h=[];return e.forEach(i=>r+=i.todos.length),e.forEach(i=>i.todos.forEach(s=>h.push(s))),h=h.filter(i=>i.isComplete),h.length+"/"+r},openThisModal(o,e){if(this.isModalShown===!0&&o===this.currModal)this.isModalShown=!1;else{const r=this.$refs[e].getBoundingClientRect();this.posOfEditor=JSON.parse(JSON.stringify(r)),this.posOfEditor.left-=5,this.posOfEditor.bottom-=4,this.isModalShown=!0,this.currModal=o}},CopyNewCard(o){this.$emit("saveCopy",o),this.closeModal()},calcPosOfModal(){this.pos=this.$refs["card-modal"].getBoundingClientRect()},openMiniEdit({card:o,group:e,pos:r}){this.cardToDisplay=o,this.groupToEdit=e,this.pos=r,this.modalOpen=!0},closeModal(){this.modalOpen=!1,this.isModalShown=!1},deleteWarn(){this.posOfEditor=this.$refs.deleteBtn.getBoundingClientRect(),this.warningTitle="card",this.warningOpen=!0},closeWarning(){this.warningOpen=!1},deleteCard(){this.groupToEdit=JSON.parse(JSON.stringify(this.groupToEdit));const o=this.groupToEdit.cards.findIndex(e=>e.id===this.cardToDisplay.id);this.groupToEdit.cards.splice(o,1),this.$emit("groupUpdated",this.groupToEdit),this.warningOpen=!1,this.modalOpen=!1},showEditedCard(o){this.cardToDisplay=o},setMemberLetters(o){return o.split(" ").map(r=>r[0]).join("").toUpperCase()},closeMenu(){this.isModalShown=!1},modCard({card:o,group:e}){this.groupToEdit=JSON.parse(JSON.stringify(e));const r=this.groupToEdit.cards.findIndex(h=>h.id===o.id);this.groupToEdit.cards[r]=o,this.$emit("groupUpdated",this.groupToEdit)},changeTitle({txt:o,id:e}){this.groupToEdit=JSON.parse(JSON.stringify(this.groups.find(r=>r.id===e))),this.groupToEdit.title=o,this.$emit("groupUpdated",this.groupToEdit),this.groupToEdit=null,this.titleIsOpen=!1},modifyBoard(o){this.$emit("boardModified",o)},addNewCard({newCard:o,group:e}){this.groupToEdit=JSON.parse(JSON.stringify(this.groups.find(r=>r.id===e.id))),this.groupToEdit.cards.push(o),this.$emit("groupUpdated",this.groupToEdit),this.groupToEdit=null},cardDelete(o){this.$emit("groupUpdated",o)},openCardModal(){this.isQuickEditOpen=!1,this.modalOpen=!1,this.isModalShown=!1,this.$emit("openCardDetails",{card:this.cardToDisplay,group:this.groupToEdit})},openCardModalFromPreview({card:o,group:e}){this.isQuickEditOpen=!1,this.modalOpen=!1,this.isModalShown=!1,this.$emit("openCardDetails",{card:o,group:e})},onOpenAllLabels(o){this.isLabelOpen=o},saveCard(){const o=this.groupToEdit.cards.findIndex(e=>e.id===this.cardToDisplay.id);this.groupToEdit=JSON.parse(JSON.stringify(this.groupToEdit)),this.groupToEdit.cards.splice(o,1,this.cardToDisplay),this.$emit("groupUpdated",this.groupToEdit),this.isModalShown=!1,this.closeModal()},deleteGroup(o){this.$emit("removeGroup",o)},close(){this.show=!1,this.newGroup.title=""},addNewGroup(){this.$emit("addGroup",this.newGroup)},onGroupDrop(o){this.boardToEdit.groups=de(this.boardToEdit.groups,o),this.$emit("groupDnd",this.boardToEdit)},onCardDrop(o,e){if(e.removedIndex!==null||e.addedIndex!==null){const r=this.boardToEdit.groups.filter(s=>s.id===o)[0],h=this.boardToEdit.groups.indexOf(r),i=JSON.parse(JSON.stringify(r));i.cards=de(i.cards,e),this.boardToEdit.groups.splice(h,1,i),this.$emit("groupDnd",this.boardToEdit)}},getCardPayload(o){return e=>this.boardToEdit.groups.filter(r=>r.id===o)[0].cards[e]},closeAdder(){this.isAddingCard=!1}},emits:["boardUpdated","saveCopy","activitySave","openCardDetails","removeGroup","groupUpdated","addGroup","groupDnd","boardModified"]},Ul={class:"group-preview"},Al={key:0,class:"add-new-card-input"},Ll={class:"txt-box"},Dl=["onKeydown"],Nl={class:"add-card-cmp"},Il=["onClick"],Fl=t("span",{class:"icon-sm icon-add-gray"},null,-1),Jl=t("p",null,"Add a card",-1),Pl=[Fl,Jl],Rl={key:1,class:"btn-card-add"},Gl=t("span",{class:"icon-sm icon-add-light"},null,-1),jl=M("Add another list "),Wl=[Gl,jl],Vl={key:1,class:"add-new-group-in"},zl={class:"controls-add-list"},Hl=["src"],Kl={class:"modal-card-main"},Zl={key:0,class:"labels"},ql={class:"card-bar"},$l={class:"card-bar-icon"},Yl=t("span",{class:"icon-sm icon-clock-in-date"},null,-1),Xl={class:"date-txt"},Ql={key:0,class:"attachments"},ed=t("span",{class:"icon-sm icon-attachment-pre"},null,-1),td={class:"attachments-length"},sd={key:1,class:"description"},od=t("span",{class:"icon-sm icon-description"},null,-1),rd=[od],id={key:2,class:"comments"},ld=t("span",{class:"icon-sm icon-comments-pre"},null,-1),dd={class:"length"},ad={key:3,class:"checklists"},nd=t("span",{class:"icon-sm icon-checklists-pre"},null,-1),cd={class:"nums"},ud={class:"card-bar-members"},hd={key:0,class:"members"},md=t("span",{class:"icon-sm icon-card-pen"},null,-1),pd=t("p",null,"Open card",-1),gd=[md,pd],vd=t("span",{class:"icon-sm icon-label-pen"},null,-1),bd=t("p",null,"Edit labels",-1),_d=[vd,bd],fd=t("span",{class:"icon-sm icon-member-pen"},null,-1),Cd=t("p",null,"Change members",-1),yd=[fd,Cd],kd=t("span",{class:"icon-sm icon-card-cover-pen"},null,-1),wd=t("p",null,"Change cover",-1),Td=[kd,wd],Bd=t("span",{class:"icon-sm icon-card-copy-pen"},null,-1),Ed=t("p",null,"Copy",-1),xd=[Bd,Ed],Od=t("span",{class:"icon-sm icon-clock-pen"},null,-1),Md=t("p",null,"Edit dates",-1),Sd=[Od,Md],Ud=t("span",{class:"icon-sm icon-delete-pen"},null,-1),Ad=t("p",null,"Delete",-1),Ld=[Ud,Ad],Dd={key:1};function Nd(o,e,r,h,i,s){const n=w("toggle-input-cmp"),a=w("card-preview"),f=w("Draggable"),g=w("Container"),C=w("delete-warning"),L=U("focus"),m=U("clickOutside");return l(),d("section",null,[A(g,{class:"group-list-main scroll-groups",orientation:"horizontal",onDrop:e[8]||(e[8]=p=>s.onGroupDrop(p)),"drag-handle-selector":".group-preview-main"},{default:F(()=>[(l(!0),d(E,null,x(r.board.groups,p=>(l(),T(f,{key:p,class:"group-preview-main cursor-pointer","drag-class":"tilt"},{default:F(()=>[t("div",null,[t("div",Ul,[A(n,{class:"title",onGroupDelete:s.deleteGroup,onTitleChange:s.changeTitle,title:p.title,id:p.id},null,8,["onGroupDelete","onTitleChange","title","id"]),A(g,{class:"scroller-group","drag-class":"tilt","group-name":"col",orientation:"vertical","get-child-payload":s.getCardPayload(p.id),onDrop:B=>s.onCardDrop(p.id,B)},{default:F(()=>[(l(!0),d(E,null,x(p.cards,B=>(l(),T(f,{key:B.id},{default:F(()=>[A(a,{onCopyCardToGroup:s.CopyNewCard,onToggleQuickEdit:s.openMiniEdit,onBoardUpdated:s.modifyBoard,onDeleteCard:s.cardDelete,onEditCard:s.modCard,onOpenCard:s.openCardModalFromPreview,onOpenAllLabels:s.onOpenAllLabels,group:p,card:B,board:r.board,isLabelOpen:i.isLabelOpen},null,8,["onCopyCardToGroup","onToggleQuickEdit","onBoardUpdated","onDeleteCard","onEditCard","onOpenCard","onOpenAllLabels","group","card","board","isLabelOpen"])]),_:2},1024))),128)),i.isAddingCard&&i.groupToEdit.id===p.id?_((l(),d("div",Al,[t("div",Ll,[_(t("textarea",{onKeydown:J(u(B=>s.saveNewCard(p),["stop","prevent"]),["enter"]),placeholder:"Enter a title for this card...",type:"text","onUpdate:modelValue":e[0]||(e[0]=B=>i.newCard.title=B)},null,40,Dl),[[L],[O,i.newCard.title]])])])),[[m,s.saveNewCardAndClose]]):c("",!0)]),_:2},1032,["get-child-payload","onDrop"]),t("section",Nl,[!i.isAddingCard||i.groupToEdit.id!==p.id?(l(),d("button",{key:0,class:"btn-add-card-out",onClick:u(B=>s.openCardAdder(p),["stop","prevent"])},Pl,8,Il)):c("",!0),i.isAddingCard&&i.groupToEdit.id===p.id?(l(),d("div",Rl,[t("button",{type:"button",class:"btn-add-card-in",onClick:e[1]||(e[1]=u((...B)=>s.saveNewCardAndClose&&s.saveNewCardAndClose(...B),["stop","prevent"]))},"Add card"),t("span",{type:"button",class:"icon-lg icon-close-close",onClick:e[2]||(e[2]=u((...B)=>s.closeAdder&&s.closeAdder(...B),["stop","prevent"]))})])):c("",!0)])])])]),_:2},1024))),128)),t("div",{class:"add-new-group",style:b(i.show?{height:"100px"}:null)},[i.show?c("",!0):(l(),d("button",{key:0,class:"add-another-list-btn",onClick:e[3]||(e[3]=p=>i.show=!0)},Wl)),i.show?_((l(),d("div",Vl,[_(t("textarea",{onKeyup:e[4]||(e[4]=J((...p)=>s.addNewGroup&&s.addNewGroup(...p),["enter"])),placeholder:"Enter list title...",type:"text","onUpdate:modelValue":e[5]||(e[5]=p=>r.newGroup.title=p)},null,544),[[O,r.newGroup.title]]),t("div",zl,[t("button",{class:"btn-add-card-in",onClick:e[6]||(e[6]=(...p)=>s.addNewGroup&&s.addNewGroup(...p))},"Add List"),t("span",{class:"icon-lg icon-close-close",onClick:e[7]||(e[7]=p=>i.show=!1)})])])),[[m,s.close]]):c("",!0)],4)]),_:1}),i.modalOpen?(l(),d("section",{key:0,onClick:e[26]||(e[26]=u((...p)=>s.closeModal&&s.closeModal(...p),["stop","prevent"])),class:"mini-edit-modal-main flex"},[t("span",{class:"icon-xl icon-close-in-pencil-modal",onClick:e[9]||(e[9]=u((...p)=>s.closeModal&&s.closeModal(...p),["stop","prevent"]))}),t("section",{onClick:e[23]||(e[23]=u(()=>{},["prevent","stop"])),class:"mini-edit-modal-second",style:b([{position:"fixed"},{top:i.pos.top+"px",left:i.pos.left+"px"}])},[t("section",{class:"modal-edit",onClick:e[14]||(e[14]=u(()=>{},["prevent","stop"]))},[t("div",{class:"modal-card",onClick:e[12]||(e[12]=u(()=>{},["prevent","stop"]))},[i.cardToDisplay.cover.type==="color"?(l(),d("div",{key:0,class:"mini-edit-cover-color",style:b({backgroundColor:i.cardToDisplay.cover.value})},null,4)):c("",!0),i.cardToDisplay.cover.type==="attachment"?(l(),d("div",{key:1,class:"mini-edit-cover-attach",style:b({backgroundImage:"url("+i.cardToDisplay.cover.value+")"})},[t("img",{src:i.cardToDisplay.cover.value,style:{visibility:"hidden"}},null,8,Hl)],4)):c("",!0),t("div",Kl,[i.cardToDisplay.labels.length&&i.cardToDisplay.labels.length?(l(),d("div",Zl,[(l(!0),d(E,null,x(i.cardToDisplay.labels,p=>(l(),d("div",{class:"label",key:p,style:b({backgroundColor:r.board.labels[r.board.labels.findIndex(B=>B.id===p)].color})},v(r.board.labels[r.board.labels.findIndex(B=>B.id===p)].title),5))),128))])):c("",!0),t("div",null,[_(t("textarea",{name:"mini-edit-ta",style:{resize:"none"},"onUpdate:modelValue":e[10]||(e[10]=p=>i.cardToDisplay.title=p)},null,512),[[O,i.cardToDisplay.title]])]),t("div",ql,[t("div",$l,[i.cardToDisplay.date?(l(),d("div",{key:0,class:k(["date",s.updateDateStyle]),onClick:e[11]||(e[11]=u((...p)=>o.onDateClicked&&o.onDateClicked(...p),["stop","prevent"]))},[Yl,t("span",Xl,v(s.setDateFormat),1)],2)):c("",!0)]),i.cardToDisplay.attachments.length?(l(),d("div",Ql,[ed,t("span",td,v(i.cardToDisplay.attachments.length),1)])):c("",!0),i.cardToDisplay.description?(l(),d("div",sd,rd)):c("",!0),i.cardToDisplay.comments.length?(l(),d("div",id,[ld,t("span",dd,v(i.cardToDisplay.comments.length),1)])):c("",!0),i.cardToDisplay.checklists.length?(l(),d("div",ad,[nd,t("span",cd,v(s.setChecklistPreview(i.cardToDisplay.checklists)),1)])):c("",!0),t("div",ud,[i.cardToDisplay.members.length&&r.board.members.length?(l(),d("div",hd,[(l(!0),d(E,null,x(i.cardToDisplay.members,p=>(l(),d("div",{class:"member",key:p._id},v(s.setMemberLetters(p.fullname)),1))),128))])):c("",!0)])])])]),t("div",null,[t("button",{class:"mini-edit-save",onClick:e[13]||(e[13]=u((...p)=>s.saveCard&&s.saveCard(...p),["stop","prevent"]))},"Save")])]),t("section",{class:"modal-actions-btns",onClick:e[22]||(e[22]=u(()=>{},["prevent","stop"]))},[t("button",{onClick:e[15]||(e[15]=u((...p)=>s.openCardModal&&s.openCardModal(...p),["stop","prevent"]))},gd),t("button",{type:"button",ref:"labelBtn",onClick:e[16]||(e[16]=u(p=>s.openThisModal("labelModal","labelBtn"),["stop","prevent"]))},_d,512),t("button",{type:"button",ref:"membersBtn",onClick:e[17]||(e[17]=u(p=>s.openThisModal("membersModal","membersBtn"),["stop","prevent"]))},yd,512),t("button",{type:"button",ref:"coverBtn",onClick:e[18]||(e[18]=u(p=>s.openThisModal("coverModal","coverBtn"),["stop","prevent"]))},Td,512),t("button",{type:"button",ref:"copyBtn",onClick:e[19]||(e[19]=u(p=>s.openThisModal("copyModal","copyBtn"),["stop","prevent"]))},xd,512),t("button",{ref:"datesBtn",onClick:e[20]||(e[20]=u(p=>s.openThisModal("datesModal","datesBtn"),["stop","prevent"]))},Sd,512),t("button",{ref:"deleteBtn",onClick:e[21]||(e[21]=u((...p)=>s.deleteWarn&&s.deleteWarn(...p),["stop","prevent"]))},Ld,512)])],4),i.warningOpen?(l(),T(C,{key:0,onClick:e[24]||(e[24]=u(()=>{},["prevent","stop"])),onCloseDeleteWarning:s.closeWarning,onDeleteConfirmed:s.deleteCard,title:i.warningTitle,pos:i.posOfEditor},null,8,["onCloseDeleteWarning","onDeleteConfirmed","title","pos"])):c("",!0),i.isModalShown?(l(),d("section",Dd,[(l(),T(ce(i.currModal),{onClick:e[25]||(e[25]=u(()=>{},["prevent","stop"])),onCardCopySave:s.CopyNewCard,onBoardEdit:s.modifyBoard,onCardEdit:s.showEditedCard,onActionsClose:s.closeMenu,board:r.board,card:i.cardToDisplay,group:i.groupToEdit,pos:i.posOfEditor},null,8,["onCardCopySave","onBoardEdit","onCardEdit","onActionsClose","board","card","group","pos"]))])):c("",!0)])):c("",!0)])}var Id=y(Sl,[["render",Nd]]);const Fd={props:{board:Object},data(){return{menuBackground:!1,showMenuBgc:!1,showMenuBgcRegular:!1,showMenuBgcImg:!1,searchInput:"",unsplashSearch:"background",unsplashOpen:!0}},created(){},methods:{generateTime(o){return W(o).fromNow()},closeModal(){this.$emit("close")},closeBgcBar(){this.showMenuBgc=!1},openBgcBar(){this.showMenuBgc=!0},closeBgcBarRegular(){this.showMenuBgcRegular=!1},openBgcBarRegular(){this.showMenuBgcRegular=!0},closeBgcBarImg(){this.showMenuBgcImg=!1},openBgcBarImg(){this.showMenuBgcImg=!0},setColor(o){this.$emit("changeBgcColor",o)},async updateSearchinput(){this.unsplashOpen=!this.unsplashOpen,this.unsplashOpen=await!this.unsplashOpen,this.unsplashSearch=this.searchInput},updateBgc(o){this.$emit("changeBgcPhoto",o)},setMemberLetters(o){return o.split(" ").map(r=>r[0]).join("").toUpperCase()}},computed:{},components:{unsplash:_e,moment:W},emits:["changeBgcPhoto","changeBgcColor"]},Jd={class:"side-bar-menu-main"},Pd={key:0,class:"side-bar-menu-start"},Rd={class:"side-bar-menu-header"},Gd=t("div",{class:"side-bar-menu-header-text"},[t("h3",null,"Menu")],-1),jd=t("span",{class:"icon-md icon-closed"},null,-1),Wd=[jd],Vd=t("hr",null,null,-1),zd={class:"side-bar-menu-container flex"},Hd=t("hr",null,null,-1),Kd={class:"side-bar-menu-activity-container"},Zd=t("div",{class:"activity-header flex"},[t("span",{class:"icon-sm icon-activity"}),t("h1",null,"Activity")],-1),qd=["src"],$d={key:1,class:"member-avatar-in-activity"},Yd={class:"activity-info"},Xd={class:"activities-info-txt flex"},Qd={class:"activity-timestamp"},ea={key:0,class:"side-bar-menu-background"},ta={class:"side-bar-menu-header-background"},sa=t("div",{class:"side-bar-menu-header-text-background"},[t("h3",null,"Change background")],-1),oa=t("span",{class:"icon-md icon-closed"},null,-1),ra=[oa],ia=t("hr",null,null,-1),la={class:"side-bar-menu-background-container flex"},da={class:"bgc-photos"},aa=t("p",null,"Photos",-1),na={class:"regular-bgc-color"},ca=t("p",null,"Colors",-1),ua={key:0,class:"side-bar-menu-background-regular"},ha={class:"side-bar-menu-header-background-regular"},ma=t("div",{class:"side-bar-menu-header-text-background-regular"},[t("h3",null,"Colors")],-1),pa=t("span",{class:"icon-md icon-closed"},null,-1),ga=[pa],va=t("hr",null,null,-1),ba={class:"side-bar-menu-background-container-regular flex"},_a={key:0,class:"side-bar-menu-background-img"},fa={class:"side-bar-menu-header-background-img flex"},Ca=t("div",{class:"side-bar-menu-header-text-background-img"},[t("h3",null,[M(" Photos by "),t("a",{target:"_blank",href:"https://unsplash.com/?utm_source=trello&utm_medium=referral&utm_campaign=api-credit"},"Unsplash")])],-1),ya=t("span",{class:"icon-md icon-closed"},null,-1),ka=[ya],wa=t("hr",null,null,-1),Ta={tabindex:"0",class:"search-unsplash"},Ba=t("span",{class:"icon-sm icon-search"},null,-1),Ea={class:"side-bar-menu-background-container-img flex"};function xa(o,e,r,h,i,s){const n=w("unsplash");return l(),d("section",Jd,[!i.showMenuBgc&&!i.showMenuBgcRegular&&!i.showMenuBgcImg?(l(),d("section",Pd,[t("div",Rd,[Gd,t("div",{class:"header-close-side-bar-menu",onClick:e[0]||(e[0]=(...a)=>s.closeModal&&s.closeModal(...a))},Wd)]),Vd,t("div",zd,[t("div",{style:b(r.board.background?{backgroundColor:r.board.background}:{"background-image":`url(${r.board.backgroundThumb})`}),class:"board-background"},null,4),t("p",{onClick:e[1]||(e[1]=(...a)=>s.openBgcBar&&s.openBgcBar(...a))},"Change background")]),Hd,t("div",Kd,[Zd,(l(!0),d(E,null,x(r.board.activities,a=>(l(),d("div",{class:"activities-render flex",key:a},[a.byMember.imgUrl?(l(),d("img",{key:0,class:"member-avatar",src:a.byMember.imgUrl,alt:""},null,8,qd)):(l(),d("div",$d,v(s.setMemberLetters(a.byMember.fullname)),1)),t("div",Yd,[t("div",Xd,[t("p",null,[t("span",null,v(a.byMember.username),1),M(" "+v(a.txt),1)])]),t("div",Qd,v(s.generateTime(a.createdAt)),1)])]))),128))])])):c("",!0),A(z,{name:"slide"},{default:F(()=>[i.showMenuBgc&&!i.showMenuBgcRegular&&!i.showMenuBgcImg?(l(),d("section",ea,[t("div",ta,[t("span",{onClick:e[2]||(e[2]=(...a)=>s.closeBgcBar&&s.closeBgcBar(...a)),class:"icon-md icon-back"}),sa,t("div",{class:"header-close-background-boards-modal",onClick:e[3]||(e[3]=(...a)=>s.closeModal&&s.closeModal(...a))},ra)]),ia,t("div",la,[t("div",da,[t("img",{onClick:e[4]||(e[4]=(...a)=>s.openBgcBarImg&&s.openBgcBarImg(...a)),src:"https://a.trellocdn.com/prgb/dist/images/photos-thumbnail@3x.8f9c1323c9c16601a9a4.jpg",alt:""}),aa]),t("div",na,[t("img",{onClick:e[5]||(e[5]=(...a)=>s.openBgcBarRegular&&s.openBgcBarRegular(...a)),src:"https://a.trellocdn.com/prgb/dist/images/colors@2x.ec32a2ed8dd8198b8ef0.jpg",alt:""}),ca])])])):c("",!0)]),_:1}),A(z,{name:"slide"},{default:F(()=>[i.showMenuBgcRegular&&!i.showMenuBgcImg?(l(),d("section",ua,[t("div",ha,[t("span",{onClick:e[6]||(e[6]=(...a)=>s.closeBgcBarRegular&&s.closeBgcBarRegular(...a)),class:"icon-md icon-back"}),ma,t("div",{class:"header-close-img-boards-modal",onClick:e[7]||(e[7]=(...a)=>s.closeModal&&s.closeModal(...a))},ga)]),va,t("div",ba,[t("div",{onClick:e[8]||(e[8]=a=>s.setColor("#0079BF")),class:"color-menu blue"}),t("div",{onClick:e[9]||(e[9]=a=>s.setColor("#D29034")),class:"color-menu yellow"}),t("div",{onClick:e[10]||(e[10]=a=>s.setColor("#519839")),class:"color-menu green"}),t("div",{onClick:e[11]||(e[11]=a=>s.setColor("#B04632")),class:"color-menu red"}),t("div",{onClick:e[12]||(e[12]=a=>s.setColor("#89609E")),class:"color-menu purple"}),t("div",{onClick:e[13]||(e[13]=a=>s.setColor("#CD5A91")),class:"color-menu pink"}),t("div",{onClick:e[14]||(e[14]=a=>s.setColor("#4BBF6B")),class:"color-menu light-green"}),t("div",{onClick:e[15]||(e[15]=a=>s.setColor("#00AECC")),class:"color-menu light-blue"}),t("div",{onClick:e[16]||(e[16]=a=>s.setColor("#838C91")),class:"color-menu grey"})])])):c("",!0)]),_:1}),A(z,{name:"slide"},{default:F(()=>[i.showMenuBgcImg?(l(),d("section",_a,[t("div",fa,[t("span",{onClick:e[17]||(e[17]=(...a)=>s.closeBgcBarImg&&s.closeBgcBarImg(...a)),class:"icon-md icon-back"}),Ca,t("div",{class:"header-close-img-boards-modal",onClick:e[18]||(e[18]=(...a)=>s.closeModal&&s.closeModal(...a))},ka)]),wa,t("div",Ta,[Ba,_(t("input",{"onUpdate:modelValue":e[19]||(e[19]=a=>i.searchInput=a),onKeyup:e[20]||(e[20]=J((...a)=>s.updateSearchinput&&s.updateSearchinput(...a),["enter"])),placeholder:"Photos",type:"text"},null,544),[[O,i.searchInput]])]),t("div",Ea,[i.unsplashOpen?(l(),T(n,{key:0,searchInput:i.unsplashSearch,onChangeBgc:s.updateBgc},null,8,["searchInput","onChangeBgc"])):c("",!0)])])):c("",!0)]),_:1})])}var Oa=y(Fd,[["render",xa]]);const Ma={props:{currUser:{type:Object,required:!0}},methods:{closeModal(){this.$emit("close")},removeMember(o){this.$emit("remove",o)}},computed:{starredBoards(){return this.$store.getters.starredBoards}}},Sa={class:"starred-boards-modal"},Ua={class:"starred-boards-header"},Aa=t("div",{class:"header-text-starred-boards-modal"},[t("h1",null,"Remove from board...")],-1),La=t("span",{class:"icon-sm icon-closed"},null,-1),Da=[La],Na={class:"remove-member-info"},Ia=M(" will be removed from all cards on this board. They will recieve a notification. ");function Fa(o,e,r,h,i,s){return l(),d("div",Sa,[t("div",Ua,[Aa,t("div",{class:"header-close-starred-boards-modal",onClick:e[0]||(e[0]=(...n)=>s.closeModal&&s.closeModal(...n))},Da)]),t("div",Na,[t("p",null,[t("span",null,v(r.currUser.fullname),1),Ia]),t("button",{onClick:e[1]||(e[1]=n=>s.removeMember(r.currUser))},"Remove member")])])}var Ja=y(Ma,[["render",Fa]]);const Pa={props:{board:Object},data(){return{isStarred:!1,titleIsOpen:!1,titleLength:0,title:"",showMenu:!1,removeUser:!1,filterByName:null,pos:0,currUser:""}},created(){this.$store.dispatch({type:"loadUsers"})},methods:{setUser(o){this.currUser=o},calcPosOfBox(){this.pos=this.$refs.user[0].getBoundingClientRect()},boardStared(){this.isStarred=!this.isStarred,this.$emit("starredChange",this.isStarred)},openTitleEdit(){this.titleIsOpen=!0,this.title=this.board.title,this.calculateTxtLen()},changeTitle(){!this.title||(this.$emit("titleChange",this.title),this.titleIsOpen=!1)},calculateTxtLen(){this.titleLength=this.title.length},closeMenuBar(){this.showMenu=!1},openMenuBar(){this.showMenu=!0},closeRemoveUser(){this.removeUser=!1},openRemoveUser(){this.removeUser=!0},changeBoardBgcColor(o){this.$emit("changeBgcColor",o)},updatePhoto(o){this.$emit("changeBoardBgc",o)},updateWidth(){return`width: ${24+this.titleLength*8+"px"};`},setMemberLetters(o){return o.split(" ").map(r=>r[0]).join("").toUpperCase()},inviteUser(o){this.board.members.find(r=>r._id===o._id)||this.$emit("makeMember",o)},removeMember(o){this.removeUser=!1,this.$emit("removeInvitedUser",o)}},computed:{updateStar(){return this.board.isStarred?"icon-sm icon-starred":"icon-sm icon-star"},updateLength(){return`width: ${24+this.titleLength*8+"px"};`},users(){return this.$store.getters.users},usersForDisplay(){const o=this.$store.getters.users;if(!this.filterByName)return o.filter(r=>r._id!==this.board.createdBy._id&&!this.board.members.some(h=>r._id===h._id));const e=new RegExp(this.filterByName,"i");return o.filter(r=>e.test(r.username)&&r._id!==this.board.createdBy._id&&!this.board.members.some(h=>r._id===h._id))},membersForDisplay(){return this.board.members.filter(o=>o._id!==this.board.createdBy._id)},loggedinUser(){return this.$store.getters.loggedinUser}},watch:{"$route.params.boardId":{async handler(o){this.title=JSON.parse(JSON.stringify(this.board.title)),this.calculateTxtLen(),this.updateWidth()}}},components:{menuBar:Oa,removeUserModal:Ja},emits:["changeBoardBgc","changeBgcColor","starredChange","titleChange","makeMember","removeInvitedUser"]},Ra=t("button",{class:"board-btn"},[t("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2 7V15C2 16.1046 2.89543 17 4 17H6C7.10457 17 8 16.1046 8 15V7C8 5.89543 7.10457 5 6 5H4C2.89543 5 2 5.89543 2 7ZM4 7V15H6V7L4 7Z",fill:"currentColor"}),t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9 7V13C9 14.1046 9.89543 15 11 15H13C14.1046 15 15 14.1046 15 13V7C15 5.89543 14.1046 5 13 5H11C9.89543 5 9 5.89543 9 7ZM11 7V13H13V7L11 7Z",fill:"currentColor"}),t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16 17V7C16 5.89543 16.8954 5 18 5H20C21.1046 5 22 5.89543 22 7V17C22 18.1046 21.1046 19 20 19H18C16.8954 19 16 18.1046 16 17ZM18 17V7L20 7V17H18Z",fill:"currentColor"})]),t("span",null,"Board"),t("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})])],-1),Ga={class:"board-name-edit"},ja={class:"users-avatar-admin"},Wa=["src"],Va={key:1,class:"user-avatar"},za=t("img",{class:"admin-img",src:"https://a.trellocdn.com/prgb/dist/images/chevron.88a4454280d68a816b89.png",alt:""},null,-1),Ha=t("div",{class:"empty-div"},null,-1),Ka=["onClick"],Za=["src"],qa={key:1,class:"users-avatar"},$a=t("a",{href:"#modal1"},[t("div",{class:"invite"},[t("div",{class:"icon-sm icon-add-member"}),t("a",null,"Share")])],-1),Ya={key:1,id:"modal1",class:"overlay"},Xa=t("a",{class:"cancel",href:"#"},null,-1),Qa={class:"invite-modal-container"},en={class:"invite-modal"},tn=t("div",{class:"invite-modal-header"},[t("h1",null,"Share"),t("span",{class:"icon-lg icon-closed"},[t("a",{class:"cancel",href:"#"})])],-1),sn={class:"content"},on={class:"user-render-container"},rn=["onClick"],ln={class:"users-avatar-name"},dn=["src"],an={key:1,class:"users-avatar"},nn={class:"admin-info flex"},cn={class:"admin-avatar-name"},un=["src"],hn={key:1,class:"admin-avatar member"},mn=t("div",{class:"admin-btn"},"Admin",-1),pn=t("div",{class:"icon-sm icon-overflow-menu-horizontal"},null,-1),gn=t("p",null,"Show menu",-1),vn=[pn,gn];function bn(o,e,r,h,i,s){const n=w("remove-user-modal"),a=w("menu-bar"),f=U("clickOutside"),g=U("focus");return r.board?(l(),d("section",{key:0,class:"board-header-main",style:b({backgroundColor:r.board.background})},[t("nav",null,[Ra,t("div",Ga,[i.titleIsOpen?c("",!0):(l(),d("p",{key:0,style:b(s.updateWidth),class:"board-name",onClick:e[0]||(e[0]=u((...C)=>s.openTitleEdit&&s.openTitleEdit(...C),["stop","prevent"]))},v(r.board.title),5)),i.titleIsOpen?_((l(),d("input",{key:1,maxlength:"512","onUpdate:modelValue":e[1]||(e[1]=C=>i.title=C),type:"text",onSubmit:e[2]||(e[2]=u((...C)=>o.changeBoardTitle&&o.changeBoardTitle(...C),["prevent"])),onKeyup:e[3]||(e[3]=(...C)=>s.calculateTxtLen&&s.calculateTxtLen(...C)),style:b(s.updateLength)},null,36)),[[f,s.changeTitle],[O,i.title]]):c("",!0)]),t("button",{onClick:e[4]||(e[4]=u((...C)=>s.boardStared&&s.boardStared(...C),["stop","prevent"]))},[t("div",{class:k(s.updateStar)},null,2)]),t("div",ja,[r.board.createdBy.imgUrl?(l(),d("img",{key:0,class:"admin-avatar",src:r.board.createdBy.imgUrl,alt:""},null,8,Wa)):(l(),d("div",Va,v(s.setMemberLetters(r.board.createdBy.fullname)),1)),za]),Ha,(l(!0),d(E,null,x(s.membersForDisplay,C=>(l(),d("div",{class:"board-members-render",key:C.fullname},[t("div",{class:"users-avatar-name",onClick:L=>{s.openRemoveUser(),s.calcPosOfBox(),s.setUser(C)},ref_for:!0,ref:"user"},[C.imgUrl?(l(),d("img",{key:0,class:"member-avatar",src:C.imgUrl,alt:""},null,8,Za)):(l(),d("div",qa,v(s.setMemberLetters(C.fullname)),1))],8,Ka)]))),128)),i.removeUser&&s.loggedinUser._id===r.board.createdBy._id?_((l(),T(n,{key:0,style:b({top:"90px",left:i.pos.left+"px"}),onClose:s.closeRemoveUser,currUser:i.currUser,onRemove:s.removeMember},null,8,["style","onClose","currUser","onRemove"])),[[f,s.closeRemoveUser]]):c("",!0),$a,s.loggedinUser._id===r.board.createdBy._id?(l(),d("div",Ya,[Xa,t("div",Qa,[t("div",en,[tn,t("div",sn,[_(t("input",{placeholder:"Search by name",type:"text","onUpdate:modelValue":e[5]||(e[5]=C=>i.filterByName=C)},null,512),[[g],[O,i.filterByName]]),t("div",on,[(l(!0),d(E,null,x(s.usersForDisplay,C=>(l(),d("div",{class:"users-render",key:C,onClick:L=>s.inviteUser(C)},[t("div",ln,[C.imgUrl?(l(),d("img",{key:0,class:"member-avatar",src:C.imgUrl,alt:""},null,8,dn)):(l(),d("div",an,v(s.setMemberLetters(C.fullname)),1)),t("p",null,v(C.fullname),1)])],8,rn))),128))]),t("div",nn,[t("div",cn,[r.board.createdBy.imgUrl?(l(),d("img",{key:0,class:"member-avatar",src:r.board.createdBy.imgUrl,alt:""},null,8,un)):(l(),d("div",hn,v(s.setMemberLetters(r.board.createdBy.fullname)),1)),t("p",null,v(r.board.createdBy.fullname),1)]),mn])])])])])):c("",!0)]),t("nav",null,[t("button",{onClick:e[6]||(e[6]=u((...C)=>s.openMenuBar&&s.openMenuBar(...C),["stop","prevent"]))},vn)]),A(z,{name:"slide"},{default:F(()=>[i.showMenu?(l(),T(a,{key:0,board:r.board,onClose:s.closeMenuBar,onChangeBgcColor:s.changeBoardBgcColor,onChangeBgcPhoto:s.updatePhoto},null,8,["board","onClose","onChangeBgcColor","onChangeBgcPhoto"])):c("",!0)]),_:1})],4)):c("",!0)}var _n=y(Pa,[["render",bn]]);const fn={props:{board:Object},data(){return{}},created(){},methods:{duplicateTemplate(){const o=JSON.parse(JSON.stringify(this.board));delete o._id,this.$emit("duplicateTemplate",o),this.$router.push("/board")}},computed:{},watch:{},components:{}},Cn={class:"template-header flex"},yn=t("span",{class:"icon-sm icon-world"},null,-1),kn=t("p",null,"This is a public template for anyone on the internet to copy.",-1);function wn(o,e,r,h,i,s){return l(),d("section",Cn,[yn,kn,t("button",{onClick:e[0]||(e[0]=(...n)=>s.duplicateTemplate&&s.duplicateTemplate(...n))},"Create board from template")])}var Tn=y(fn,[["render",wn]]);const Bn={name:"attachment-modal",props:{board:{type:Object},card:{type:Object},group:{type:Object},pos:{type:Object}},data(){return{link:"",name:"",cardToEdit:null}},computed:{},created(){},methods:{setBottomPos(o){return window.innerHeight-o<240?window.innerHeight-240:o+8},close(){this.$emit("actionsClose")},addAttachment(){if(this.link==="")return;this.cardToEdit=JSON.parse(JSON.stringify(this.card));const o={};this.name!==""?o.name=this.name:o.name=this.link,o.link=this.link,o.id=I.makeId(),this.cardToEdit.attachments.push(o),this.$emit("cardEdit",this.cardToEdit)},async attachFileFromSystem(o){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.$emit("uploading");const e=await Ce.uploadFromSystem(o);this.$emit("uploadComplete"),this.cardToEdit.attachments.unshift({id:I.makeId(),name:e.original_filename,link:e.secure_url}),this.$emit("cardEdit",this.cardToEdit)}},emits:["actionsClose","cardEdit","uploadComplete","uploading"]},En={class:"main-title-container"},xn=t("span",{class:"main-title"},"Attach from...",-1),On=t("span",{class:"mini-edit-title"},"Attach a link",-1),Mn={key:0},Sn=t("span",{class:"mini-edit-title"},"Link name (optional)",-1);function Un(o,e,r,h,i,s){const n=U("clickOutside");return _((l(),d("section",{style:b({top:s.setBottomPos(r.pos.bottom)+"px",left:r.pos.left+"px"}),class:"label-modal"},[t("div",En,[t("div",{class:"icon-sm icon-close",onClick:e[0]||(e[0]=u((...a)=>s.close&&s.close(...a),["stop","prevent"]))}),xn]),t("input",{onChange:e[1]||(e[1]=a=>s.attachFileFromSystem(a)),type:"file",ref:"file",style:{display:"none"}},null,544),t("button",{type:"button",onClick:e[2]||(e[2]=u(a=>o.$refs.file.click(),["stop","prevent"])),class:"create-btn"},"Computer"),On,_(t("input",{placeholder:"Paste any link here...","onUpdate:modelValue":e[3]||(e[3]=a=>i.link=a),type:"text",class:"main-input"},null,512),[[O,i.link]]),i.link!==""?(l(),d("section",Mn,[Sn,_(t("input",{placeholder:"","onUpdate:modelValue":e[4]||(e[4]=a=>i.name=a),type:"text",class:"main-input"},null,512),[[O,i.name]])])):c("",!0),t("button",{class:"save-btn",onClick:e[5]||(e[5]=u((...a)=>s.addAttachment&&s.addAttachment(...a),["stop","prevent"]))},"Attach")],4)),[[n,s.close]])}var An=y(Bn,[["render",Un]]);const Ln={components:{labelEditorModalCmp:fe},name:"label-modal",props:{board:{type:Object},card:{type:Object},group:{type:Object},pos:{type:Object}},data(){return{cardToEdit:null,name:"Checklist"}},computed:{},created(){},methods:{setBottomPos(o){if(console.log('screen.height + "px"',window.innerHeight),window.innerHeight-o<186){console.log("true");const e=window.innerHeight-186;return console.log("bottom",e),e}else return o+8},close(){this.$emit("actionsClose")},addChecklist(){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.cardToEdit.checklists||(this.cardToEdit.checklists=[]),this.cardToEdit.checklists.push({id:I.makeId(),title:this.name,todos:[]}),this.$emit("cardEdit",this.cardToEdit),this.name="Checklist"}},emits:["actionsClose","cardEdit","boardEdit"]},Dn={class:"main-title-container"},Nn=t("span",{class:"main-title"},"Checklist",-1),In={class:"actions-modal-main"},Fn=t("span",{class:"mini-title"},"Title",-1);function Jn(o,e,r,h,i,s){const n=U("clickOutside");return l(),d("section",null,[_((l(),d("section",{style:b({top:s.setBottomPos(r.pos.bottom)+"px",left:r.pos.left+"px"}),class:"label-modal"},[t("div",Dn,[t("div",{class:"icon-sm icon-close",onClick:e[0]||(e[0]=u((...a)=>s.close&&s.close(...a),["stop","prevent"]))}),Nn]),t("section",In,[Fn,_(t("input",{onClick:e[1]||(e[1]=u(()=>{},["stop","prevent"])),class:"edit-input",onSubmit:e[2]||(e[2]=u(()=>{},["prevent"])),type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>i.name=a)},null,544),[[O,i.name]]),t("button",{type:"button",onClick:e[4]||(e[4]=u((...a)=>s.addChecklist&&s.addChecklist(...a),["stop","prevent"])),class:"create-btn"},"Add")])],4)),[[n,s.close]])])}var Pn=y(Ln,[["render",Jn]]);const Rn={components:{},name:"label-modal",props:{linkName:{type:String},pos:{type:Object}},data(){return{name:this.linkName}},computed:{},created(){},methods:{setBottomPos(o){return window.innerHeight-o<186?window.innerHeight-186:o+8},close(){this.$emit("close")},changeName(){this.name!==""&&this.$emit("changeAttachmentName",this.name)}},emits:["close","changeAttachmentName"]},Gn={class:"main-title-container"},jn=t("span",{class:"main-title"},"Edit attachment",-1),Wn={class:"actions-modal-main"},Vn=t("span",{class:"mini-title"},"Link name",-1);function zn(o,e,r,h,i,s){const n=U("clickOutside");return l(),d("section",null,[_((l(),d("section",{style:b({top:s.setBottomPos(r.pos.bottom)+"px",left:r.pos.left+"px"}),class:"label-modal"},[t("div",Gn,[t("div",{class:"icon-sm icon-close",onClick:e[0]||(e[0]=u((...a)=>s.close&&s.close(...a),["stop","prevent"]))}),jn]),t("section",Wn,[Vn,_(t("input",{onClick:e[1]||(e[1]=u(()=>{},["stop","prevent"])),class:"edit-input",onSubmit:e[2]||(e[2]=u(()=>{},["prevent"])),type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>i.name=a)},null,544),[[O,i.name]]),t("button",{type:"button",onClick:e[4]||(e[4]=u((...a)=>s.changeName&&s.changeName(...a),["stop","prevent"])),class:"save-btn"},"Update")])],4)),[[n,s.close]])])}var Hn=y(Rn,[["render",zn]]);const Kn={props:{todoId:{type:String},checklistId:{type:String},pos:{type:Object}},methods:{closeModal(){this.$emit("close")},convertToCard(){this.$emit("convertToCard",{checklistId:this.checklistId,todoId:this.todoId}),this.$emit("close")},removeTodo(){this.$emit("removeTodo",{checklistId:this.checklistId,todoId:this.todoId}),this.$emit("close")}},emits:["close","convertToCard","removeTodo"]},Zn={class:"group-modal-header"},qn=t("div",{class:"header-text-group-modal"},[t("h1",null,"Item actions")],-1),$n=t("svg",{width:"10",height:"10",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.58579 7L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683418 0.292893 0.292893C0.683418 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L7 5.58579L12.2929 0.292893C12.6834 -0.0976311 13.3166 -0.0976311 13.7071 0.292893C14.0976 0.683418 14.0976 1.31658 13.7071 1.70711L8.41421 7L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L7 8.41421L1.70711 13.7071C1.31658 14.0976 0.683418 14.0976 0.292893 13.7071C-0.0976311 13.3166 -0.0976311 12.6834 0.292893 12.2929L5.58579 7Z",fill:"currentColor"})],-1),Yn=[$n],Xn={class:"group-modal-actions-list"};function Qn(o,e,r,h,i,s){const n=U("clickOutside");return _((l(),d("div",{class:"group-edit-modal",style:b({top:r.pos.bottom+6+"px",left:r.pos.left+"px"})},[t("div",Zn,[qn,t("div",{class:"header-close-edit-group-modal",onClick:e[0]||(e[0]=(...a)=>s.closeModal&&s.closeModal(...a))},Yn)]),t("div",Xn,[t("div",{class:"group-modal-action",onClick:e[1]||(e[1]=(...a)=>s.convertToCard&&s.convertToCard(...a))},"Convert to card"),t("div",{class:"group-modal-action",onClick:e[2]||(e[2]=(...a)=>s.removeTodo&&s.removeTodo(...a))},"Delete")])],4)),[[n,s.closeModal,void 0,{stop:!0,prevent:!0}]])}var ec=y(Kn,[["render",Qn]]);const tc={name:"card-details",props:{card:{type:Object},group:{type:Object},board:{type:Object}},components:{labelModal:Y,membersModal:X,datesModal:Q,deleteWarning:ee,coverModal:te,attachmentModal:An,copyModal:se,checklistModal:Pn,moment:W,todoOptions:ec,attachEditModal:Hn},created(){this.description=this.card.description},mounted(){},data(){return{currModal:null,isModalShown:!1,warningOpen:!1,warningTitle:"",pos:0,showInput:!1,showDesc:!1,description:"",newComment:S.getEmptyComment(),isLoading:!1,currOpenTodo:{},currChecklist:{},isChecklistOpen:!1,addingNewTodo:!1,optionsOpen:!1,checklistId:"",todoId:"",edditingAttachName:!1,currAttach:{}}},computed:{cardToEdit(){return JSON.parse(JSON.stringify(this.card))},loggedinUser(){return this.$store.getters.loggedinUser},async backgroundCoverColor(){if(this.card.cover.type&&this.card.cover.type==="attachment"){const o=new Z;try{const e=await o.getColorAsync(this.card.cover.value);return this.$refs.headerCover.style.backgroundColor=e.hex,e.hex}catch(e){console.log(e)}}}},watch:{backgroundCoverColor:{async handler(o){Object.keys(this.card.cover).length&&(this.$refs.headerCover.style.backgroundColor=o)}}},methods:{removeCover(){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.cardToEdit.cover={},this.$emit("cardModified",{card:this.cardToEdit,group:this.group})},makeAttachCover(o){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.cardToEdit.cover.type="attachment",this.cardToEdit.cover.value=o.link,this.cardToEdit.cover.size="small",this.$emit("cardModified",{card:this.cardToEdit,group:this.group})},closeAttachModal(){this.edditingAttachName=!1},deleteAttachment(o){this.cardToEdit=JSON.parse(JSON.stringify(this.card));const e=this.cardToEdit.attachments.findIndex(r=>r.id===o);this.cardToEdit.attachments.splice(e,1),this.$emit("cardModified",{card:this.cardToEdit,group:this.group})},editAttachName(o,e){this.currAttach=JSON.parse(JSON.stringify(o)),this.edditingAttachName=!0,this.pos=e.target.getBoundingClientRect()},changeAttachName(o){this.cardToEdit=JSON.parse(JSON.stringify(this.card));const e=this.cardToEdit.attachments.findIndex(r=>r.id===this.currAttach.id);this.cardToEdit.attachments[e].name=o,this.$emit("cardModified",{card:this.cardToEdit,group:this.group}),this.edditingAttachName=!1},setMemberLetters(o){return o.split(" ").map(r=>r[0]).join("").toUpperCase()},closeModal(){this.$emit("closeDialog")},openThisModal(o,e){this.isModalShown===!0&&o===this.currModal?this.isModalShown=!1:(this.pos=e.target.getBoundingClientRect(),this.pos=JSON.parse(JSON.stringify(this.pos)),this.pos.top>430&&(this.pos.top=430),this.isModalShown=!0,this.currModal=o)},closeMenu(){this.isModalShown=!1},editCard(o){this.$emit("cardModified",{card:o,group:this.group})},async attachmentBGC(o){const e=new Z,r=o.props.src;try{const h=await e.getColorAsync(r);o.props["background-color"]=h.hex}catch(h){console.log(h)}},sendCardCopyToStore(o){this.$emit("saveCopy",o)},deleteWarn(){this.pos=this.$refs.deleteBtn.getBoundingClientRect(),this.warningTitle="card",this.warningOpen=!0},closeWarning(){this.warningOpen=!1},deleteCard(){this.$emit("deleteCardFromGroup",{card:this.cardToEdit,group:this.group}),this.closeModal()},closeInput(){this.showInput=!1},closeTextArea(){this.showDesc=!1},openTextArea(){this.showDesc=!0},editBoard(o){this.$emit("boardModified",o)},updateCardDesc(){this.cardToEdit.description=this.description,this.$emit("cardModified",{card:this.cardToEdit,group:this.group}),this.showDesc=!1},generateTime(o){return W(o).fromNow()},addCardComment(){!this.newComment.txt||(this.newComment.byMember=this.loggedinUser,this.cardToEdit.comments.unshift(this.newComment),this.$emit("cardModified",{card:this.cardToEdit,group:this.group}),this.newComment=S.getEmptyComment(),this.showInput=!1)},setDateFormat(o){let e=new Date(o);return Intl.DateTimeFormat("en-Us",{month:"short",day:"numeric"}).format(e)},setHourFormat(o){return new Date(o).toLocaleTimeString().replace(/(.*)\D\d+/,"$1")},toggleCardComplete(){this.cardToEdit.isComplete=!this.cardToEdit.isComplete,this.$emit("cardModified",{card:this.cardToEdit,group:this.group})},notifyUploading(){this.isLoading=!0},notifyComplete(){this.isLoading=!1},deleteComment(o){const e=this.cardToEdit.comments.findIndex(r=>r.id===o);this.cardToEdit.comments.splice(e,1),this.$emit("cardModified",{card:this.cardToEdit,group:this.group})},isOpen(o,e){return!!(Object.keys(this.currChecklist).length&&Object.keys(this.currOpenTodo).length&&this.currChecklist.id===o.id&&this.currOpenTodo.id===e.id)},openTodo(o,e){this.currChecklist=JSON.parse(JSON.stringify(o)),this.currOpenTodo=JSON.parse(JSON.stringify(e)),this.closeAdder()},async checkboxTodo(o,e){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.currChecklist=JSON.parse(JSON.stringify(o)),this.currOpenTodo=JSON.parse(JSON.stringify(e)),this.currOpenTodo.isComplete=!this.currOpenTodo.isComplete;const r=this.cardToEdit.checklists.findIndex(i=>i.id===this.currChecklist.id),h=this.cardToEdit.checklists[r].todos.findIndex(i=>i.id===this.currOpenTodo.id);this.cardToEdit.checklists[r].todos[h]=this.currOpenTodo,this.$emit("cardModified",{card:this.cardToEdit,group:this.group}),this.closeTodo(),this.closeAdder()},closeTodo(){this.currChecklist={},this.currOpenTodo={},this.closeAdder()},openChecklist(o){this.currChecklist=JSON.parse(JSON.stringify(o)),this.isChecklistOpen=!0,this.closeAdder()},saveChecklistTitle(){this.closeAdder(),this.cardToEdit=JSON.parse(JSON.stringify(this.card));const o=this.cardToEdit.checklists.findIndex(e=>e.id===this.currChecklist.id);this.cardToEdit.checklists[o]=this.currChecklist,this.$emit("cardModified",{card:this.cardToEdit,group:this.group}),this.currChecklist={}},closeChecklist(){this.currChecklist={},this.isChecklistOpen=!1,this.closeAdder()},openChecklistInput(o){this.currChecklist=JSON.parse(JSON.stringify(o)),this.addingNewTodo=!0,this.currOpenTodo=S.getEmptyTodo()},saveTodo(){this.cardToEdit=JSON.parse(JSON.stringify(this.card));const o=this.cardToEdit.checklists.findIndex(r=>r.id===this.currChecklist.id),e=this.cardToEdit.checklists[o].todos.findIndex(r=>r.id===this.currOpenTodo.id);this.cardToEdit.checklists[o].todos[e]=this.currOpenTodo,this.$emit("cardModified",{card:this.cardToEdit,group:this.group}),this.currChecklist={},this.currOpenTodo={}},deleteChecklist(o){this.currChecklist={},this.cardToEdit=JSON.parse(JSON.stringify(this.card));const e=this.cardToEdit.checklists.findIndex(r=>r.id===o);this.cardToEdit.checklists.splice(e,1),this.$emit("cardModified",{card:this.cardToEdit,group:this.group})},createTodo(){if(this.currOpenTodo.text==="")return;this.cardToEdit=JSON.parse(JSON.stringify(this.card));const o=this.cardToEdit.checklists.findIndex(e=>e.id===this.currChecklist.id);this.cardToEdit.checklists[o].todos.push(this.currOpenTodo),this.$emit("cardModified",{card:this.cardToEdit,group:this.group}),this.currOpenTodo=S.getEmptyTodo()},closeAdder(){this.addingNewTodo=!1},todoPercentage(o){var e=0;return o.todos.length&&(o.todos.forEach(r=>{r.isComplete&&e++}),e=parseInt(e/o.todos.length*100)),e},calcBarColor(o){return this.todoPercentage(o)===100?"#61bd4f":"#5ba4cf"},openChecklistOptions(o,e,r){this.checklistId=o.id,this.todoId=e.id,this.pos=r.target.getBoundingClientRect(),this.optionsOpen=!0},convertTodoToCard({checklistId:o,todoId:e}){const r=JSON.parse(JSON.stringify(this.group));this.cardToEdit=JSON.parse(JSON.stringify(this.card));const h=r.cards.findIndex(a=>a.id===this.cardToEdit.id),i=this.cardToEdit.checklists.findIndex(a=>a.id===o),s=this.cardToEdit.checklists[i].todos.findIndex(a=>a.id===e),n=S.getEmptyCard();n.title=this.cardToEdit.checklists[i].todos[s].text,r.cards.push(n),r.cards[h].checklists[i].todos.splice(s,1),this.$emit("groupUpdate",r)},deleteTodo({checklistId:o,todoId:e}){this.cardToEdit=JSON.parse(JSON.stringify(this.card));const r=this.cardToEdit.checklists.findIndex(i=>i.id===o),h=this.cardToEdit.checklists[r].todos.findIndex(i=>i.id===e);this.cardToEdit.checklists[r].todos.splice(h,1),this.$emit("cardModified",{card:this.cardToEdit,group:this.group}),this.currOpenTodo={},this.currChecklist={}}},emits:["groupUpdate","cardCopySave","closeDialog","cardModified","boardModified","deleteCardFromGroup","saveCopy"]},sc=t("span",{class:"icon-md icon-closed"},null,-1),oc=[sc],rc=t("span",{class:"icon-sm icon-cover"},null,-1),ic=M(" Cover "),lc=[rc,ic],dc={class:"card-details-container flex"},ac={class:"card-details-header"},nc={class:"card-details-header-icon"},cc=t("span",{class:"icon-lg icon-card"},null,-1),uc={class:"card-details-title flex"},hc=t("span",{class:"icon-md icon-closed"},null,-1),mc=[hc],pc={class:"card-details-list-name"},gc={class:"card-details-actions-container-edit-btns flex"},vc={class:"card-details-actions-container"},bc={class:"card-details-main flex"},_c={key:0,class:"card-details-members-labels-date"},fc={key:0,class:"card-detail-member-container-main"},Cc={key:0,for:""},yc={key:1,class:"card-details-members-container",for:""},kc={class:"card-details-member-img"},wc=["src"],Tc={key:1,class:"member"},Bc={class:"card-detail-labels-container-main"},Ec={key:0,for:""},xc={key:1,class:"card-details-labels-container",for:""},Oc={class:"card-detail-date-container-main"},Mc={key:0,for:""},Sc={key:1,class:"card-details-dates-container",for:""},Uc={class:"card-details-dates"},Ac={class:"card-details-date"},Lc={key:0,class:"overdue"},Dc={key:1,class:"complete"},Nc=t("svg",{class:"down",width:"20",height:"20",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),Ic={class:"card-details-description"},Fc=t("span",{class:"icon-lg icon-desc"},null,-1),Jc=t("h3",null,"Description",-1),Pc={key:3,class:"card-details-text-add-btn"},Rc={key:1,class:"card-details-activity-show-attachments"},Gc=t("div",{class:"card-details-attachments"},[t("span",{class:"icon-lg icon-attachment"}),t("h3",null,"Attachments")],-1),jc={key:0,class:"loading-attachment"},Wc=t("div",{class:"loading-container"},[t("img",{class:"loading-svg",src:"https://res.cloudinary.com/dw85wdwsw/image/upload/v1648563503/dlcjcnpz0afvbj2mgrqj.svg"}),M(" processing... ")],-1),Vc=[Wc],zc={key:1},Hc=["src"],Kc={class:"card-attachment-area-main"},Zc={class:"card-attachment-area-header"},qc=t("span",{class:"icon-sm icon-link-arrow"},null,-1),$c={class:"attachment-area-body flex"},Yc=["onClick"],Xc=t("span",null,"-",-1),Qc=["onClick"],eu={class:"attachment-area-footer"},tu=t("span",{class:"icon-sm icon-cover"},null,-1),su=["onClick"],ou={key:2,class:"checklist"},ru={key:0,class:"card-details-checklist-show-details"},iu={class:"checklist-header"},lu={class:"checklist-title"},du=t("div",{class:"icon-lg icon-checklist"},null,-1),au=["onClick"],nu={key:1},cu={class:"edit-options"},uu={class:"main-actions"},hu=t("div",{class:"todo-discard"},[t("div",{class:"icon-lg icon-closed"})],-1),mu=["onClick"],pu={class:"todo-bar"},gu={class:"bar-percentage"},vu={key:0,class:"todos-container"},bu={class:"todo-checkbox"},_u=["onClick"],fu={style:{"z-index":"40"},src:"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23fff' viewBox='-3 -4 16 16'%3E%3Cpath d='M1.49 3.215a.667.667 0 0 0-.98.903l2.408 2.613c.358.351.892.351 1.223.02l.243-.239a1689.645 1689.645 0 0 0 2.625-2.589l.027-.026a328.23 328.23 0 0 0 2.439-2.429.667.667 0 1 0-.95-.936c-.469.476-1.314 1.316-2.426 2.417l-.027.026a1368.126 1368.126 0 0 1-2.517 2.482L1.49 3.215z'/%3E%3C/svg%3E"},Cu=["onClick"],yu={key:0,class:"todo-text"},ku=["onClick"],wu=t("div",{class:"icon-sm icon-overflow-menu-horizontal"},null,-1),Tu=[wu],Bu={key:2},Eu={class:"main-actions"},xu=t("div",{class:"todo-discard"},[t("div",{class:"icon-lg icon-closed"})],-1),Ou=["onClick"],Mu=t("div",{class:"icon-sm icon-overflow-menu-horizontal"},null,-1),Su=[Mu],Uu={class:"add-todo-container"},Au=["onClick"],Lu={key:1,class:"checklist-input-container"},Du={class:"edit-options"},Nu={class:"main-actions"},Iu=t("div",{class:"todo-discard"},[t("div",{class:"icon-lg icon-closed cursor-pointer"})],-1),Fu=t("div",{class:"card-details-activity-show-details"},[t("div",{class:"card-details-activity"},[t("span",{class:"icon-lg icon-activity"}),t("h3",null,"Activity")]),t("button",null,"Show details")],-1),Ju={class:"card-details-user-comment flex"},Pu={class:"card-details-user-avatar"},Ru=["src"],Gu={key:1,class:"user-avatar"},ju=M("Write a comment..."),Wu=[ju],Vu={key:1,class:"card-details-input-show"},zu={class:"card-details-all-btns flex"},Hu={key:3},Ku={class:"card-details-user-avatar member"},Zu=["src"],qu={key:1,class:"user-avatar"},$u={class:"comment-info"},Yu={class:"comment-info-name-date"},Xu={class:"comment-info-txt"},Qu={class:"comment-info-btns flex"},eh=["onClick"],th={class:"card-details-edit"},sh=t("label",{for:""},"Add to card",-1),oh={class:"btns-add-to-card"},rh=t("span",{class:"icon-sm icon-member"},null,-1),ih=M(" Members "),lh=[rh,ih],dh=t("span",{class:"icon-sm icon-label"},null,-1),ah=M(" Labels "),nh=[dh,ah],ch=t("span",{class:"icon-sm icon-checklist"},null,-1),uh=M(" Checklist "),hh=[ch,uh],mh=t("svg",{class:"date-svg",width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M13 6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44772 11 6V12C11 12.2652 11.1054 12.5196 11.2929 12.7071L13.7929 15.2071C14.1834 15.5976 14.8166 15.5976 15.2071 15.2071C15.5976 14.8166 15.5976 14.1834 15.2071 13.7929L13 11.5858V6Z",fill:"currentColor"}),t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20Z",fill:"currentColor"})],-1),ph=M(" Dates "),gh=[mh,ph],vh=t("span",{class:"icon-sm icon-attachment"},null,-1),bh=M(" Attachment "),_h=[vh,bh],fh=t("span",{class:"icon-sm icon-cover"},null,-1),Ch=M(" Cover "),yh=[fh,Ch],kh=t("label",{for:""},"Actions",-1),wh={class:"btns-actions"},Th=t("span",{class:"icon-sm icon-copy"},null,-1),Bh=M(" Copy "),Eh=[Th,Bh],xh=t("span",{class:"icon-sm icon-archive"},null,-1),Oh=M(" Delete "),Mh=[xh,Oh],Sh={key:1};function Uh(o,e,r,h,i,s){const n=w("el-progress"),a=w("todo-options"),f=w("attach-edit-modal"),g=w("delete-warning"),C=U("focus"),L=U("clickOutside");return l(),d("section",null,[Object.keys(r.card.cover).length?(l(),d("section",{key:0,class:k(["card-details-cover",{color:r.card.cover.type==="color",attachmentofdetails:r.card.cover.type==="attachment"}]),ref:"headerCover",style:b([r.card.cover.type==="color"?{backgroundColor:r.card.cover.value}:{backgroundImage:"url("+r.card.cover.value+")"}])},[r.card.cover.type?(l(),d("div",{key:0,class:"card-details-cover-close",onClick:e[0]||(e[0]=u((...m)=>s.closeModal&&s.closeModal(...m),["stop","prevent"]))},oc)):c("",!0),t("button",{class:"card-details-btn-header",onClick:e[1]||(e[1]=u(m=>s.openThisModal("coverModal",m),["stop","prevent"]))},lc)],6)):c("",!0),t("section",dc,[t("div",ac,[t("div",nc,[cc,t("div",uc,[t("p",null,v(r.card.title),1)])]),Object.keys(r.card.cover).length?c("",!0):(l(),d("div",{key:0,class:"card-details-no-cover-close",onClick:e[2]||(e[2]=u((...m)=>s.closeModal&&s.closeModal(...m),["stop","prevent"]))},mc))]),t("div",pc,[t("p",null,"in list "+v(r.group.title),1)]),t("section",gc,[t("section",vc,[t("section",bc,[r.card.members.length>0||r.card.labels.length>0||r.card.date?(l(),d("div",_c,[r.card.members.length>0?(l(),d("div",fc,[r.card.members.length>0?(l(),d("label",Cc,"Members")):c("",!0),r.card.members.length>0?(l(),d("div",yc,[(l(!0),d(E,null,x(r.card.members,m=>(l(),d("section",{class:"card-details-members",key:m._id},[t("div",kc,[m.imgUrl?(l(),d("img",{key:0,class:"member-avatar",src:m.imgUrl,alt:""},null,8,wc)):(l(),d("div",Tc,v(s.setMemberLetters(m.fullname)),1))])]))),128))])):c("",!0)])):c("",!0),t("div",Bc,[r.card.labels.length>0?(l(),d("label",Ec,"Labels")):c("",!0),r.card.labels.length>0?(l(),d("div",xc,[(l(!0),d(E,null,x(r.card.labels,m=>(l(),d("section",{class:"card-details-labels",key:m},[t("div",{class:"card-details-label",style:b({backgroundColor:r.board.labels[r.board.labels.findIndex(p=>p.id===m)].color})},[t("p",null,v(r.board.labels[r.board.labels.findIndex(p=>p.id===m)].title),1)],4)]))),128))])):c("",!0)]),t("div",Oc,[r.card.date?(l(),d("label",Mc,"Due date")):c("",!0),r.card.date?(l(),d("div",Sc,[t("section",Uc,[r.card.isComplete?c("",!0):(l(),d("div",{key:0,onClick:e[3]||(e[3]=u((...m)=>s.toggleCardComplete&&s.toggleCardComplete(...m),["stop","prevent"])),class:"checkbox"})),r.card.isComplete?(l(),d("img",{key:1,onClick:e[4]||(e[4]=u((...m)=>s.toggleCardComplete&&s.toggleCardComplete(...m),["stop","prevent"])),class:"done-img",src:"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23fff' viewBox='-3 -4 16 16'%3E%3Cpath d='M1.49 3.215a.667.667 0 0 0-.98.903l2.408 2.613c.358.351.892.351 1.223.02l.243-.239a1689.645 1689.645 0 0 0 2.625-2.589l.027-.026a328.23 328.23 0 0 0 2.439-2.429.667.667 0 1 0-.95-.936c-.469.476-1.314 1.316-2.426 2.417l-.027.026a1368.126 1368.126 0 0 1-2.517 2.482L1.49 3.215z'/%3E%3C/svg%3E",alt:""})):c("",!0),t("div",Ac,[t("p",null,v(s.setDateFormat(r.card.date))+" at "+v(s.setHourFormat(r.card.date)),1),r.card.date<Date.now()&&!r.card.isComplete?(l(),d("span",Lc,"overdue")):c("",!0),r.card.isComplete?(l(),d("span",Dc,"complete")):c("",!0),Nc])])])):c("",!0)])])):c("",!0),_((l(),d("section",null,[t("div",Ic,[Fc,Jc,r.card.description?(l(),d("button",{key:0,onClick:e[5]||(e[5]=u((...m)=>s.openTextArea&&s.openTextArea(...m),["stop","prevent"]))},"Edit")):c("",!0)]),t("div",{class:"card-details-input",style:b(i.showDesc?{"padding-left":"42px","padding-top":"18px"}:null)},[!i.showDesc&&!r.card.description?(l(),d("div",{key:0,onClick:e[6]||(e[6]=u((...m)=>s.openTextArea&&s.openTextArea(...m),["stop","prevent"])),class:"open-input-btn"},"Add a more detailed description...")):c("",!0),i.showDesc?c("",!0):(l(),d("div",{key:1,class:"card-description",onClick:e[7]||(e[7]=u((...m)=>s.openTextArea&&s.openTextArea(...m),["stop","prevent"]))},v(r.card.description),1)),i.showDesc?_((l(),d("textarea",{key:2,placeholder:"Add a more detailed description...","onUpdate:modelValue":e[8]||(e[8]=m=>i.description=m),name:"description",id:"",cols:"60",rows:"4"},null,512)),[[C],[O,i.description]]):c("",!0),i.showDesc?(l(),d("div",Pc,[t("button",{onClick:e[9]||(e[9]=u((...m)=>s.updateCardDesc&&s.updateCardDesc(...m),["stop","prevent"]))},"Save"),t("span",{onClick:e[10]||(e[10]=u((...m)=>s.closeTextArea&&s.closeTextArea(...m),["stop","prevent"])),class:"icon-xl icon-closed"})])):c("",!0)],4)])),[[L,s.closeTextArea]]),i.isLoading||r.card.attachments.length>0?(l(),d("div",Rc,[Gc,i.isLoading?(l(),d("div",jc,Vc)):c("",!0),r.card.attachments.length?(l(),d("div",zc,[(l(!0),d(E,null,x(r.card.attachments,m=>(l(),d("div",{class:"card-attachments-area",key:m.link},[t("img",{onVnodeMounted:e[11]||(e[11]=p=>s.attachmentBGC(p)),src:m.link,alt:""},null,8,Hc),t("div",Kc,[t("div",Zc,[t("p",null,v(m.name),1),qc]),t("div",$c,[t("a",{onClick:u(p=>s.deleteAttachment(m.id),["stop","prevent"])},"Delete",8,Yc),Xc,t("a",{onClick:u(p=>s.editAttachName(m,p),["stop","prevent"])},"Edit",8,Qc)]),t("div",eu,[tu,r.card.cover.value!==m.link?(l(),d("p",{key:0,onClick:u(p=>s.makeAttachCover(m),["stop","prevent"])},"Make cover",8,su)):c("",!0),r.card.cover.value===m.link?(l(),d("p",{key:1,onClick:e[12]||(e[12]=u((...p)=>s.removeCover&&s.removeCover(...p),["stop","prevent"]))},"Remove cover")):c("",!0)])])]))),128))])):c("",!0)])):c("",!0),r.card.checklists.length?(l(),d("div",ou,[r.card.checklists.length?(l(),d("div",ru,[(l(!0),d(E,null,x(r.card.checklists,m=>(l(),d("div",{key:m.id,class:"card-details-checklist"},[t("div",iu,[t("div",lu,[du,!i.isChecklistOpen||i.currChecklist.id!==m.id?(l(),d("h3",{key:0,onClick:u(p=>s.openChecklist(m),["stop","prevent"])},v(m.title),9,au)):c("",!0),i.isChecklistOpen&&i.currChecklist.id===m.id?(l(),d("div",nu,[_(t("textarea",{style:b({height:parseInt(i.currChecklist.title.length/64+1)*24+"px"}),class:"edit-todo-text","onUpdate:modelValue":e[13]||(e[13]=p=>i.currChecklist.title=p),onKeydown:e[14]||(e[14]=J(u((...p)=>s.saveChecklistTitle&&s.saveChecklistTitle(...p),["stop","prevent"]),["enter"]))},null,36),[[L,s.closeChecklist],[O,i.currChecklist.title]]),t("div",cu,[t("div",uu,[t("button",{onClick:e[15]||(e[15]=u((...p)=>s.saveChecklistTitle&&s.saveChecklistTitle(...p),["stop","prevent"])),class:"checklist-btn save-btn"},"Save"),hu])])])):c("",!0)]),i.isChecklistOpen?c("",!0):(l(),d("button",{key:0,onClick:u(p=>s.deleteChecklist(m.id),["stop","prevent"]),class:"checklist-btn checklkist-delete"},"Delete",8,mu))]),t("div",pu,[t("div",gu,v(s.todoPercentage(m))+"%",1),A(n,{class:"bar","stroke-width":8,"show-text":!1,percentage:s.todoPercentage(m),color:s.calcBarColor(m)},null,8,["percentage","color"])]),m.todos?(l(),d("div",vu,[(l(!0),d(E,null,x(m.todos,p=>(l(),d("div",{class:"checklist-todo",key:p.id},[t("div",bu,[t("div",{class:k(["checkbox",{checkboxchecked:p.isComplete===!0}]),onClick:u(B=>s.checkboxTodo(m,p),["stop","prevent"])},[_(t("img",fu,null,512),[[Be,p.isComplete]])],10,_u)]),t("div",{class:"todo-preview",onClick:u(B=>s.openTodo(m,p),["stop","prevent"])},[s.isOpen(m,p)?c("",!0):(l(),d("span",yu,v(p.text),1)),s.isOpen(m,p)?c("",!0):(l(),d("div",{key:1,onClick:u(B=>s.openChecklistOptions(m,p,B),["stop","prevent"]),class:"todo-options"},Tu,8,ku)),s.isOpen(m,p)?(l(),d("div",Bu,[_(t("textarea",{onKeydown:e[16]||(e[16]=J(u((...B)=>s.saveTodo&&s.saveTodo(...B),["prevent"]),["enter"])),style:b({height:parseInt(i.currOpenTodo.text.length/64+1)*24+"px"}),"onUpdate:modelValue":e[17]||(e[17]=B=>i.currOpenTodo.text=B),class:"edit-todo-text"},null,36),[[L,s.closeTodo,void 0,{stop:!0,prevent:!0}],[O,i.currOpenTodo.text]]),t("div",{onClick:e[19]||(e[19]=u((...B)=>s.closeTodo&&s.closeTodo(...B),["stop","prevent"])),class:"edit-options"},[t("div",Eu,[t("button",{onClick:e[18]||(e[18]=u((...B)=>s.saveTodo&&s.saveTodo(...B),["stop","prevent"])),class:"checklist-btn save-btn"},"Save"),xu]),t("div",{onClick:u(B=>s.openChecklistOptions(m,p,B),["stop","prevent"]),class:"more-options"},Su,8,Ou)])])):c("",!0)],8,Cu)]))),128))])):c("",!0),_((l(),d("div",Uu,[!i.addingNewTodo||i.currChecklist.id!==m.id?(l(),d("button",{key:0,onClick:u(p=>s.openChecklistInput(m),["stop","prevent"]),class:"checklist-btn checklist-add-item"},"Add an item",8,Au)):c("",!0),i.addingNewTodo&&i.currChecklist.id===m.id?(l(),d("div",Lu,[_(t("textarea",{onKeydown:e[20]||(e[20]=J(u(p=>s.createTodo(),["stop","prevent"]),["enter"])),class:"add-todo-text",style:b({minHeight:parseInt(i.currOpenTodo.text.length/64+1)*24+"px"}),"onUpdate:modelValue":e[21]||(e[21]=p=>i.currOpenTodo.text=p),placeholder:"Add an item",type:"text",ref_for:!0,ref:"addingtextarea"},null,36),[[L,s.closeAdder],[O,i.currOpenTodo.text],[C]]),t("div",Du,[t("div",Nu,[t("button",{onClick:e[22]||(e[22]=u(p=>s.createTodo(),["stop","prevent"])),class:"checklist-btn save-btn"},"Add"),Iu])])])):c("",!0)])),[[L,s.closeAdder]])]))),128))])):c("",!0)])):c("",!0),Fu,t("div",Ju,[t("div",Pu,[s.loggedinUser.imgUrl?(l(),d("img",{key:0,src:s.loggedinUser.imgUrl,alt:""},null,8,Ru)):(l(),d("div",Gu,v(s.loggedinUser?s.setMemberLetters(s.loggedinUser.fullname):"GU"),1))]),i.showInput?c("",!0):_((l(),d("div",{key:0,class:"card-details-input",onClick:e[23]||(e[23]=m=>i.showInput=!0)},Wu)),[[L,s.closeInput]]),i.showInput?_((l(),d("div",Vu,[_(t("input",{placeholder:"Write a comment...",type:"text",onKeydown:e[24]||(e[24]=J((...m)=>s.addCardComment&&s.addCardComment(...m),["enter"])),"onUpdate:modelValue":e[25]||(e[25]=m=>i.newComment.txt=m)},null,544),[[O,i.newComment.txt]]),t("div",zu,[i.showInput?(l(),d("button",{key:0,class:"card-details-save-btn",onClick:e[26]||(e[26]=u((...m)=>s.addCardComment&&s.addCardComment(...m),["stop","prevent"]))},"Save")):c("",!0)])])),[[L,s.closeInput]]):c("",!0)]),r.card.comments?(l(),d("div",Hu,[(l(!0),d(E,null,x(r.card.comments,m=>{var p;return l(),d("div",{class:"comments-rendering flex",key:m},[t("div",Ku,[(p=s.loggedinUser)!=null&&p.imgUrl?(l(),d("img",{key:0,src:s.loggedinUser.imgUrl,alt:""},null,8,Zu)):(l(),d("div",qu,v(s.loggedinUser?s.setMemberLetters(s.loggedinUser.fullname):"GU"),1))]),t("div",$u,[t("div",Yu,[t("p",null,[t("span",null,v(m.byMember.username),1),M(" "+v(s.generateTime(m.createdAt)),1)])]),t("div",Xu,[t("p",null,v(m.txt),1)]),t("div",Qu,[t("p",{onClick:B=>s.deleteComment(m.id)},"Delete",8,eh)])])])}),128))])):c("",!0)])]),t("section",th,[sh,t("div",oh,[t("button",{ref:"membersBtn",class:"card-details-btn",onClick:e[27]||(e[27]=u(m=>s.openThisModal("membersModal",m),["stop","prevent"]))},lh,512),t("button",{ref:"labelBtn",class:"card-details-btn",onClick:e[28]||(e[28]=u(m=>s.openThisModal("labelModal",m),["stop","prevent"]))},nh,512),t("button",{ref:"checklistBtn",onClick:e[29]||(e[29]=u(m=>s.openThisModal("checklistModal",m),["stop","prevent"])),class:"card-details-btn"},hh,512),t("button",{ref:"datesBtn",class:"card-details-btn",onClick:e[30]||(e[30]=u(m=>s.openThisModal("datesModal",m),["stop","prevent"]))},gh,512),t("button",{ref:"attachmentBtn",class:"card-details-btn",onClick:e[31]||(e[31]=u(m=>s.openThisModal("attachmentModal",m),["stop","prevent"]))},_h,512),r.card.cover.type?c("",!0):(l(),d("button",{key:0,ref:"coverBtn",class:"card-details-btn",onClick:e[32]||(e[32]=u(m=>s.openThisModal("coverModal",m),["stop","prevent"]))},yh,512))]),kh,t("div",wh,[t("button",{ref:"copyBtn",class:"card-details-btn",onClick:e[33]||(e[33]=u(m=>s.openThisModal("copyModal",m),["stop","prevent"]))},Eh,512),t("button",{ref:"deleteBtn",class:"card-details-btn",onClick:e[34]||(e[34]=u((...m)=>s.deleteWarn&&s.deleteWarn(...m),["stop","prevent"]))},Mh,512)])])])]),i.isModalShown?(l(),d("section",Sh,[(l(),T(ce(i.currModal),{onUploadComplete:s.notifyComplete,onUploading:s.notifyUploading,onBoardEdit:s.editBoard,onCardEdit:s.editCard,onActionsClose:s.closeMenu,onCardCopySave:s.sendCardCopyToStore,board:r.board,card:r.card,group:r.group,pos:i.pos},null,8,["onUploadComplete","onUploading","onBoardEdit","onCardEdit","onActionsClose","onCardCopySave","board","card","group","pos"]))])):c("",!0),i.optionsOpen?(l(),T(a,{key:2,onConvertToCard:s.convertTodoToCard,onRemoveTodo:s.deleteTodo,onClose:e[35]||(e[35]=m=>i.optionsOpen=!1),checklistId:i.checklistId,todoId:i.todoId,pos:i.pos},null,8,["onConvertToCard","onRemoveTodo","checklistId","todoId","pos"])):c("",!0),i.edditingAttachName?(l(),T(f,{key:3,pos:i.pos,linkName:i.currAttach.name,onClose:s.closeAttachModal,onChangeAttachmentName:s.changeAttachName},null,8,["pos","linkName","onClose","onChangeAttachmentName"])):c("",!0),i.warningOpen?(l(),T(g,{key:4,onCloseDeleteWarning:s.closeWarning,onDeleteConfirmed:s.deleteCard,title:i.warningTitle,pos:i.pos},null,8,["onCloseDeleteWarning","onDeleteConfirmed","title","pos"])):c("",!0)])}var Ah=y(tc,[["render",Uh]]);const Lh={components:{groupList:Id,boardHeader:_n,cardDetails:Ah,socketService:G,templateHeader:Tn},data(){return{isCardOpen:!1,selectedCardIdx:null,selectedCardGroupIdx:null,boardToEdit:null,groupToEdit:null,newGroup:S.getEmptyGroup(),newActivity:S.getEmptyActivity()}},created(){},mounted(){G.on("board-changed",this.socketBoardUpdate)},methods:{socketBoardUpdate(o){this.$store.commit({type:"setBoard",board:o})},groupRemoveFromBoard(o){this.boardToEdit=JSON.parse(JSON.stringify(this.board)),this.newActivity=S.getEmptyActivity(),this.loggedinUser&&(this.newActivity.byMember=this.loggedinUser);const e=this.boardToEdit.groups.findIndex(r=>r.id===o);this.saveActivity("removed list "+this.boardToEdit.groups[e].title),this.boardToEdit.groups.splice(e,1),this.$store.dispatch({type:"saveBoard",board:this.boardToEdit})},addNewGroup(o){!o.title||(this.boardToEdit=JSON.parse(JSON.stringify(this.board)),this.saveActivity("added "+o.title+"  to this board"),this.boardToEdit.groups.push(o),this.$store.dispatch({type:"saveBoard",board:this.boardToEdit}),this.newGroup=S.getEmptyGroup(),this.show=!1)},close(){this.show=!1,this.newGroup.title=""},updateCard({card:o,group:e}){this.groupToEdit=JSON.parse(JSON.stringify(e));const r=this.groupToEdit.cards.findIndex(h=>h.id===o.id);this.groupToEdit.cards[r]=o,this.updateGroup(this.groupToEdit)},deleteCardFromGroup({card:o,group:e}){this.groupToEdit=JSON.parse(JSON.stringify(e));const r=this.groupToEdit.cards.findIndex(h=>h.id===o.id);this.groupToEdit.cards.splice(r,1),this.updateGroup(this.groupToEdit)},updateGroup(o){this.boardToEdit=JSON.parse(JSON.stringify(this.board));const e=this.boardToEdit.groups.findIndex(r=>r.id===o.id);this.boardToEdit.groups[e]=o,this.$store.dispatch({type:"saveBoard",board:this.boardToEdit})},updateBoard({key:o,val:e}){this.boardToEdit=JSON.parse(JSON.stringify(this.board)),this.boardToEdit[o]=e,this.$store.dispatch({type:"saveBoard",board:this.boardToEdit})},openCardDetailsModal(o){this.selectedCardIdx=this.board.groups.find(e=>e.id===o.group.id).cards.findIndex(e=>e.id===o.card.id),this.selectedCardGroupIdx=this.board.groups.findIndex(e=>e.id===o.group.id),this.isCardOpen=!0},closeDiag(){this.isCardOpen=!1},saveCopyToBoard(o){this.groupToEdit=JSON.parse(JSON.stringify(o.posCopy.group)),this.groupToEdit.cards.splice(o.posCopy.position-1,0,o.cardCopy),this.updateGroup(this.groupToEdit),G.emit("update board",o)},updateBoardDnd(o){this.$store.dispatch({type:"saveBoard",board:o})},updateBoardTitle(o){this.boardToEdit=JSON.parse(JSON.stringify(this.board)),this.saveActivity("renamed this board from ("+this.board.title+")"),this.boardToEdit.title=o,this.$store.dispatch({type:"saveBoard",board:this.boardToEdit})},isStarredBoard(o){this.boardToEdit=JSON.parse(JSON.stringify(this.board)),this.boardToEdit.isStarred=o,this.$store.dispatch({type:"saveBoard",board:this.boardToEdit})},changeBoardBgcColor(o){this.boardToEdit=JSON.parse(JSON.stringify(this.board)),this.saveActivity("changed the background of this board"),this.boardToEdit.background=o,this.boardToEdit.backgroundPhoto="",this.$store.dispatch({type:"saveBoard",board:this.boardToEdit})},changeBoardPhoto(o){this.boardToEdit=JSON.parse(JSON.stringify(this.board)),this.saveActivity("changed the background of this board"),this.boardToEdit.background="",this.boardToEdit.backgroundPhoto=o.full,this.boardToEdit.backgroundThumb=o.thumb,this.$store.dispatch({type:"saveBoard",board:this.boardToEdit})},saveActivity(o){this.loggedinUser&&(this.newActivity.byMember=this.loggedinUser),this.newActivity.txt=o,this.boardToEdit.activities.unshift(this.newActivity),this.newActivity=S.getEmptyActivity()},inviteUser(o){this.boardToEdit=JSON.parse(JSON.stringify(this.board)),this.boardToEdit.members.push(o),this.saveActivity(" added "+o.fullname+" to this board"),this.$store.dispatch({type:"saveBoard",board:this.boardToEdit})},removeMember(o){this.boardToEdit=JSON.parse(JSON.stringify(this.board));const e=this.boardToEdit.members.findIndex(r=>r._id===o._id);this.boardToEdit.members.splice(e,1),this.saveActivity(" removed "+o.fullname+" from this board"),this.$store.dispatch({type:"saveBoard",board:this.boardToEdit})},addTemplateBoard(o){this.loggedinUser&&(o.createdBy=this.loggedinUser,o.members.push(this.loggedinUser),this.newActivity.byMember=this.loggedinUser),o.isTemplate=!1,this.newActivity.txt="created this board",o.activities.push(this.newActivity),this.newActivity=S.getEmptyActivity(),this.$store.dispatch({type:"saveBoard",board:o})}},computed:{board(){return this.$store.getters.board},cardToShow(){return this.board.groups[this.selectedCardGroupIdx].cards[this.selectedCardIdx]},groupToShow(){return this.board.groups[this.selectedCardGroupIdx]},loggedinUser(){return this.$store.getters.loggedinUser}},watch:{"$route.params.boardId":{async handler(o){o&&(await this.$store.dispatch({type:"loadBoardById",newId:o}),this.loggedinUser&&(G.emit("watch board",o),G.emit("set-user-socket",this.loggedinUser._id)))},immediate:!0}}},Dh={key:1,class:"dialog-container card-details-scroll"};function Nh(o,e,r,h,i,s){const n=w("template-header"),a=w("board-header"),f=w("group-list"),g=w("card-details");return l(),d("section",null,[t("section",null,[s.board&&s.board.isTemplate?(l(),T(n,{key:0,board:s.board,onDuplicateTemplate:s.addTemplateBoard},null,8,["board","onDuplicateTemplate"])):c("",!0),s.board?(l(),T(a,{key:1,board:s.board,onTitleChange:s.updateBoardTitle,onStarredChange:s.isStarredBoard,onChangeBgcColor:s.changeBoardBgcColor,onChangeBoardBgc:s.changeBoardPhoto,onMakeMember:s.inviteUser,onRemoveInvitedUser:s.removeMember},null,8,["board","onTitleChange","onStarredChange","onChangeBgcColor","onChangeBoardBgc","onMakeMember","onRemoveInvitedUser"])):c("",!0)]),s.board?(l(),d("section",{key:0,class:"board-details-main",style:b({backgroundColor:s.board.background})},[A(f,{onSaveCopy:s.saveCopyToBoard,onBoardModified:s.updateBoard,onRemoveGroup:s.groupRemoveFromBoard,onOpenCardDetails:s.openCardDetailsModal,onGroupUpdated:s.updateGroup,groups:s.board.groups,board:s.board,newGroup:i.newGroup,onAddGroup:s.addNewGroup,onGroupDnd:s.updateBoardDnd},null,8,["onSaveCopy","onBoardModified","onRemoveGroup","onOpenCardDetails","onGroupUpdated","groups","board","newGroup","onAddGroup","onGroupDnd"])],4)):c("",!0),i.isCardOpen?(l(),d("section",Dh,[A(g,{ref:"cardDetailsModal",class:"modal",onGroupUpdate:s.updateGroup,onDeleteCardFromGroup:s.deleteCardFromGroup,onBoardModified:s.updateBoard,onCardModified:s.updateCard,onCloseDialog:s.closeDiag,onSaveCopy:s.saveCopyToBoard,board:s.board,card:s.cardToShow,group:s.groupToShow},null,8,["onGroupUpdate","onDeleteCardFromGroup","onBoardModified","onCardModified","onCloseDialog","onSaveCopy","board","card","group"])])):c("",!0)])}var Ih=y(Lh,[["render",Nh]]);const Fh={data(){return{user:{username:"",password:""}}},computed:{},methods:{goToSignup(){this.$router.push("/signup")},login(){!this.user.username||!this.user.password||(this.$store.dispatch({type:"login",user:this.user}),this.user={username:"",password:""},this.$router.push("/board"))}},components:{}},Jh={class:"login-main-container flex"},Ph=t("div",{class:"tasko-logo-login"},[t("img",{src:"https://res.cloudinary.com/dw85wdwsw/image/upload/v1648495274/ujlrratduzckpypdosan.jpg",alt:""}),t("h1",null,"Tasko")],-1),Rh={class:"login-container"},Gh=t("h1",null,"Log in to Tasko",-1),jh=t("a",null,"OR",-1),Wh=t("div",{class:"google-btn"},[t("img",{src:"https://d2k1ftgv7pobq7.cloudfront.net/meta/c/p/res/images/8215f6659adc202403198fef903a447e/sign-in-with-google.svg",alt:""}),t("span",null,"Continue with Google")],-1),Vh=t("hr",null,null,-1);function zh(o,e,r,h,i,s){return l(),d("section",Jh,[Ph,t("div",Rh,[Gh,_(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>i.user.username=n),placeholder:"Enter username",type:"text"},null,512),[[O,i.user.username]]),_(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>i.user.password=n),placeholder:"Enter password",type:"password",name:"password",autocomplete:"on"},null,512),[[O,i.user.password]]),t("button",{onClick:e[2]||(e[2]=u((...n)=>s.login&&s.login(...n),["stop","prevent"]))},"Log in"),jh,Wh,Vh,t("p",{onClick:e[3]||(e[3]=u((...n)=>s.goToSignup&&s.goToSignup(...n),["stop","prevent"]))},"Sign up for an account")])])}var Hh=y(Fh,[["render",zh]]);const Kh={data(){return{showPassword:!1,newUser:{fullname:"",username:"",password:""}}},computed:{},methods:{goToLogin(){this.$router.push("/login")},signup(){if(!this.newUser.fullname||!this.newUser.username||!this.newUser.password){console.log("sorry every input is required");return}this.$store.dispatch({type:"signup",user:this.newUser}),this.$router.push("/board"),this.newUser={fullname:"",username:"",password:""}},togglePassword(){this.showPassword=!this.showPassword;const o=this.$refs.password;o.getAttribute("type")==="password"?o.setAttribute("type","text"):o.setAttribute("type","password")}},components:{}},Zh={class:"signup-main-container flex"},qh=t("div",{class:"tasko-logo-login"},[t("img",{src:"https://res.cloudinary.com/dw85wdwsw/image/upload/v1648495274/ujlrratduzckpypdosan.jpg",alt:""}),t("h1",null,"Tasko")],-1),$h={class:"signup-container"},Yh=t("h1",null,"Sign up for your account",-1),Xh={"z-index":"0",class:"password-input"},Qh=t("button",{class:"signup-btn"},"Sign up",-1),e1=t("a",null,"OR",-1),t1=t("div",{class:"google-btn"},[t("img",{src:"https://d2k1ftgv7pobq7.cloudfront.net/meta/c/p/res/images/8215f6659adc202403198fef903a447e/sign-in-with-google.svg",alt:""}),t("span",null,"Continue with Google")],-1),s1=t("hr",null,null,-1);function o1(o,e,r,h,i,s){return l(),d("section",Zh,[qh,t("form",{onSubmit:e[6]||(e[6]=u((...n)=>s.signup&&s.signup(...n),["stop","prevent"])),action:"signup"},[t("div",$h,[Yh,_(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>i.newUser.username=n),placeholder:"Enter username",type:"text"},null,512),[[O,i.newUser.username]]),_(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>i.newUser.fullname=n),placeholder:"Enter full name",type:"text"},null,512),[[O,i.newUser.fullname]]),t("div",Xh,[_(t("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>i.newUser.password=n),ref:"password",placeholder:"Enter password",type:"password",name:"password",autocomplete:"on"},null,512),[[O,i.newUser.password]]),i.showPassword?c("",!0):(l(),d("img",{key:0,onClick:e[3]||(e[3]=(...n)=>s.togglePassword&&s.togglePassword(...n)),src:"https://res.cloudinary.com/dw85wdwsw/image/upload/v1648544011/jsq38zvscccvdrfjjtr4.svg",alt:""})),i.showPassword?(l(),d("img",{key:1,onClick:e[4]||(e[4]=(...n)=>s.togglePassword&&s.togglePassword(...n)),src:"https://res.cloudinary.com/dw85wdwsw/image/upload/v1648544013/smt79blx0tym7pk2mwc4.svg",alt:""})):c("",!0)]),Qh,e1,t1,s1,t("p",{onClick:e[5]||(e[5]=(...n)=>s.goToLogin&&s.goToLogin(...n))},"Already have an account? Log in")])],32)])}var r1=y(Kh,[["render",o1]]);const i1=Ee({history:xe("/"),routes:[{path:"/",name:"home",component:Js},{path:"/board",name:"board-app",component:or},{path:"/board/:boardId",name:"board-details",component:Ih},{path:"/login",name:"login",component:Hh},{path:"/signup",name:"signup",component:r1}]}),l1="/api/";var d1=q.create({withCredentials:!0});const N={get(o,e){return V(o,"GET",e)},post(o,e){return V(o,"POST",e)},put(o,e){return V(o,"PUT",e)},delete(o,e){return V(o,"DELETE",e)}};async function V(o,e="GET",r=null){try{return(await d1({url:`${l1}${o}`,method:e,data:r,params:e==="GET"?r:null})).data}catch(h){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${o}, with data:`,r),console.dir(h),h.response&&h.response.status,h}}const S={query:a1,getById:n1,remove:c1,getEmptyComment:p1,save:u1,getEmptyCard:g1,getEmptyGroup:v1,getEmptyBoard:b1,getEmptyActivity:m1,getEmptyTodo:h1};async function a1(){try{return await N.get("board")}catch(o){console.log("query err:",o)}}async function n1(o){try{return await N.get(`board/${o}`)}catch(e){console.log("getById err:",e)}}async function c1(o){try{return await N.delete(`board/${o}`)}catch(e){console.log("remove err:",e)}}async function u1(o){try{return o._id?await N.put(`board/${o._id}`,o):await N.post("board/",o)}catch(e){console.log("remove err:",e)}}function h1(){return{id:I.makeId(),text:"",isComplete:!1}}function m1(){return{id:I.makeId(),txt:"",createdAt:Date.now(),byMember:{_id:"u101",fullname:"Guest User",username:"Guest User"},task:{}}}function p1(){return{id:I.makeId(),txt:"",createdAt:Date.now(),byMember:{_id:"u101",fullname:"Guest User",username:"Guest User"}}}function g1(){return{id:I.makeId(),isComplete:!1,title:"",description:"",labels:[],createdAt:Date.now(),checklists:[],attachments:[],comments:[],cover:{},members:[],dueDate:"",isWatched:!1,props:{className:"card",style:{}}}}function v1(){return{id:I.makeId(),title:"",cards:[],date:"",props:{orientation:"vertical",className:"card-container"}}}function b1(){return{title:"",lastTimeWatched:Date.now(),createdAt:Date.now(),createdBy:{_id:"u101",fullname:"Guest User"},background:"",labels:[{id:"l101",title:"",color:"#61BD4F"},{id:"l102",title:"",color:"#F2D600"},{id:"l103",title:"",color:"#FF9F1A"},{id:"l104",title:"",color:"#EB5A46"},{id:"l105",title:"",color:"#C377E0"},{id:"l106",title:"",color:"#0079BF"}],members:[],groups:[],activities:[]}}const _1={props:{boards:{type:Array,required:!0}},methods:{closeModal(){this.$emit("close")},goToDetails(o){this.$emit("close"),this.$router.push(`/board/${o._id}`)}}},f1={class:"search-boards-modal"},C1={class:"search-boards-header"},y1=t("div",{class:"header-text-search-boards-modal"},[t("h1",null,"Boards")],-1),k1=t("span",{class:"icon-sm icon-closed"},null,-1),w1=[k1],T1={class:"modal-search-boards-list"},B1=["onClick"],E1={class:"modal-search-board"};function x1(o,e,r,h,i,s){return l(),d("div",f1,[t("div",C1,[y1,t("div",{class:"header-close-search-boards-modal",onClick:e[0]||(e[0]=(...n)=>s.closeModal&&s.closeModal(...n))},w1)]),t("div",T1,[(l(!0),d(E,null,x(r.boards,n=>(l(),d("div",{class:"boards-render-modal-search",onClick:a=>s.goToDetails(n),key:n._id},[t("div",{class:"board-background-search-modal",style:b(n.background?{backgroundColor:n.background}:{"background-image":`url(${n.backgroundThumb})`})},null,4),t("div",E1,v(n.title),1)],8,B1))),128))])])}var O1=y(_1,[["render",x1]]);const M1={props:{boards:{type:Array,required:!0}},data(){return{openStarredModal:!1,openRecentModal:!1,openTemplate:!1,pos:0,posRecent:0,posTemplate:0}},methods:{closeModal(){this.$emit("close")},openTemplateModal(){this.openTemplate=!0},closeTemplate(){this.openTemplate=!1},openRecentBoardsModal(){this.openRecentModal=!0},closeRecentModal(){this.openRecentModal=!1},openStarredBoardsModal(){this.openStarredModal=!0},closeEditMode(){this.openStarredModal=!1},calcPosOfBox(){this.pos=this.$refs.starred.getBoundingClientRect(),this.posRecent=this.$refs.recent.getBoundingClientRect(),this.posTemplate=this.$refs.template.getBoundingClientRect()},saveNewBoard(o){this.$emit("duplicateTemplate",o)}},computed:{},components:{recentBoardsModal:me,starredBoardsModal:he,templateModal:pe}},S1={class:"starred-boards-modal"},U1={class:"starred-boards-header"},A1=t("div",{class:"header-text-starred-boards-modal"},[t("h1",null,"More")],-1),L1=t("span",{class:"icon-sm icon-closed"},null,-1),D1=[L1],N1={class:"modal-starred-boards-list"},I1={class:"modal-starred-board-more"},F1={class:"boards-render-modal-more"},J1=t("p",null,"Recent boards",-1),P1=t("svg",{width:"17",height:"17",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M16.7071 12.7071L9.63606 19.7781C9.24554 20.1687 8.61237 20.1687 8.22185 19.7781C7.83132 19.3876 7.83132 18.7544 8.22185 18.3639L14.5858 12L8.22185 5.636C7.83132 5.24548 7.83132 4.61231 8.22185 4.22179C8.61237 3.83126 9.24554 3.83126 9.63606 4.22179L16.7071 11.2929C17.0977 11.6834 17.0977 12.3165 16.7071 12.7071Z",fill:"currentColor"})],-1),R1=[J1,P1],G1=t("p",null,"Starred boards",-1),j1=t("svg",{width:"17",height:"17",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M16.7071 12.7071L9.63606 19.7781C9.24554 20.1687 8.61237 20.1687 8.22185 19.7781C7.83132 19.3876 7.83132 18.7544 8.22185 18.3639L14.5858 12L8.22185 5.636C7.83132 5.24548 7.83132 4.61231 8.22185 4.22179C8.61237 3.83126 9.24554 3.83126 9.63606 4.22179L16.7071 11.2929C17.0977 11.6834 17.0977 12.3165 16.7071 12.7071Z",fill:"currentColor"})],-1),W1=[G1,j1],V1=t("p",null,"Templates",-1),z1=t("svg",{width:"17",height:"17",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M16.7071 12.7071L9.63606 19.7781C9.24554 20.1687 8.61237 20.1687 8.22185 19.7781C7.83132 19.3876 7.83132 18.7544 8.22185 18.3639L14.5858 12L8.22185 5.636C7.83132 5.24548 7.83132 4.61231 8.22185 4.22179C8.61237 3.83126 9.24554 3.83126 9.63606 4.22179L16.7071 11.2929C17.0977 11.6834 17.0977 12.3165 16.7071 12.7071Z",fill:"currentColor"})],-1),H1=[V1,z1];function K1(o,e,r,h,i,s){const n=w("recent-boards-modal"),a=w("starred-boards-modal"),f=w("template-modal"),g=U("clickOutside");return l(),d("div",S1,[t("div",U1,[A1,t("div",{class:"header-close-starred-boards-modal",onClick:e[0]||(e[0]=(...C)=>s.closeModal&&s.closeModal(...C))},D1)]),t("div",N1,[t("div",I1,[t("div",F1,[t("div",{class:"modal-more-boards",onClick:e[1]||(e[1]=C=>s.openRecentBoardsModal())},R1),i.openRecentModal&&r.boards?_((l(),T(n,{key:0,boards:r.boards,style:{top:"48px",left:0},onClose:s.closeRecentModal},null,8,["boards","onClose"])),[[g,s.closeRecentModal]]):c("",!0),t("div",{onClick:e[2]||(e[2]=C=>s.openStarredBoardsModal()),class:"modal-more-boards"},W1),i.openStarredModal&&r.boards?_((l(),T(a,{key:1,boards:r.boards,style:{top:"48px",left:0},onClose:s.closeEditMode},null,8,["boards","onClose"])),[[g,s.closeEditMode]]):c("",!0),t("div",{class:"modal-more-boards",onClick:e[3]||(e[3]=C=>s.openTemplateModal())},H1),i.openTemplate&&r.boards?_((l(),T(f,{key:2,boards:r.boards,style:{top:"48px",left:0},onClose:s.closeTemplate,onDuplicateTemplate:s.saveNewBoard},null,8,["boards","onClose","onDuplicateTemplate"])),[[g,s.closeTemplate]]):c("",!0)])])])])}var Z1=y(M1,[["render",K1]]);const q1={name:"app-header",data(){return{openStarredModal:!1,openRecentModal:!1,openUserModal:!1,openTemplate:!1,openCreate:!1,openSearch:!1,openMore:!1,pos:0,posRecent:0,posUser:0,posTemplate:0,posCreate:0,posCreate2:0,posMore:0,newBoard:S.getEmptyBoard(),newActivity:S.getEmptyActivity(),filter:""}},methods:{onSetFilter(o){this.filter=o},openSearchModal(){this.openSearch=!0},closeSearchModal(){this.openSearch=!1},openStarredBoardsModal(){this.openStarredModal=!0},closeEditMode(){this.openStarredModal=!1},openRecentBoardsModal(){this.openRecentModal=!0},closeRecentModal(){this.openRecentModal=!1},calcPosOfBox(){this.pos=this.$refs.starred.getBoundingClientRect(),this.posRecent=this.$refs.recent.getBoundingClientRect(),this.posUser=this.$refs.user.getBoundingClientRect(),this.posTemplate=this.$refs.template.getBoundingClientRect(),this.posCreate=this.$refs.create.getBoundingClientRect(),this.posCreate2=this.$refs.create2.getBoundingClientRect(),this.posMore=this.$refs.more.getBoundingClientRect()},openLoggedInUserModal(){this.openUserModal=!0},closeUserModal(){this.openUserModal=!1},openTemplateModal(){this.openTemplate=!0},closeTemplate(){this.openTemplate=!1},closeMoreModal(){this.openMore=!1},openCreateModal(){this.openCreate=!0},openMoreModal(){this.openMore=!0},closeCreateModal(){this.openCreate=!1},setMemberLetters(o){return o.split(" ").map(r=>r[0]).join("").toUpperCase()},saveNewBoard(o){!o.title||(this.loggedinUser&&(o.createdBy=this.loggedinUser,o.members.push(this.loggedinUser),this.newActivity.byMember=this.loggedinUser),this.newActivity.txt="created this board",o.activities.push(this.newActivity),o.isTemplate=!1,this.$store.dispatch({type:"saveBoard",board:o}),this.isEdit=!1,this.newBoard=S.getEmptyBoard(),this.isOnBoard&&this.$router.push("/board"))},lightenDarkenColor(o,e){if(o==="#0079BF")return"#0066A0";if(o==="#00AECC")return"#0092AB";if(o==="")return"rgba(0,0,0,.32)";var r=!1;o[0]=="#"&&(o=o.slice(1),r=!0);var h=parseInt(o,16),i=(h>>16)+e;i>255?i=255:i<0&&(i=0);var s=(h>>8&255)+e;s>255?s=255:s<0&&(s=0);var n=(h&255)+e;return n>255?n=255:n<0&&(n=0),(r?"#":"")+(n|s<<8|i<<16).toString(16)}},computed:{board(){return this.$store.getters.board},boards(){return this.$store.getters.boards},filteredBoards(){if(this.$store.getters.boards&&this.loggedinUser){const o=JSON.parse(JSON.stringify(this.boards));if(!this.filter.txt)return o.filter(e=>!e.isTemplate&&e.members.some(r=>r._id===this.loggedinUser._id));if(this.filter.txt){const e=new RegExp(this.filter.txt,"i");return o.filter(r=>e.test(r.title)&&!r.isTemplate&&r.members.some(h=>h._id===this.loggedinUser._id))}}},isOnBoard(){const{boardId:o}=this.$route.params;return o},loggedinUser(){return this.$store.getters.loggedinUser},async appHeaderColor(){if(this.board&&this.isOnBoard){if(this.board.backgroundPhoto){const o=new Z;try{const e=await o.getColorAsync(this.board.backgroundPhoto);return this.$refs.appheader.style.backgroundColor=e.hex,e.hex}catch(e){console.log(e)}}this.board.background&&this.isOnBoard&&(this.$refs.appheader.style.backgroundColor=this.lightenDarkenColor(this.board.background,-20))}}},watch:{appHeaderColor:{async handler(o){this.$refs.appheader.style.backgroundColor=o}},isOnBoard:{async handler(o){o||(this.$refs.appheader.style.backgroundColor="#026AA7")}},loggedinUser:{async handler(o){}}},components:{search:ue,recentBoardsModal:me,starredBoardsModal:he,loggedInUserModal:kt,templateModal:pe,createBoardModal:ge,searchModal:O1,moreModal:Z1}},$1={class:"app-header-main",ref:"appheader"},Y1={class:"app-header"},X1=t("span",{class:"logo-img"},null,-1),Q1=t("p",{class:"logo-txt"},"Tasko",-1),em=M(" Recent "),tm=t("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),sm=[em,tm],om=M(" Starred "),rm=t("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),im=[om,rm],lm=M(" Templates "),dm=t("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),am=[lm,dm],nm=M(" Create "),cm=t("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),um=[nm,cm],hm=M(" More "),mm=t("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),pm=[hm,mm],gm=t("span",{class:"icon-md icon-add-light"},null,-1),vm=[gm],bm={class:"search-nav"},_m=t("span",{class:"span-icon info"},[t("svg",{width:"24",height:"24",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"currentColor"}),t("path",{d:"M11 11C11 10.4477 11.4477 10 12 10C12.5523 10 13 10.4477 13 11V16C13 16.5523 12.5523 17 12 17C11.4477 17 11 16.5523 11 16V11Z",fill:"currentColor"}),t("path",{d:"M13 8C13 8.55228 12.5523 9 12 9C11.4477 9 11 8.55228 11 8C11 7.44772 11.4477 7 12 7C12.5523 7 13 7.44772 13 8Z",fill:"currentColor"})])],-1),fm=t("span",{class:"span-icon"},[t("svg",{width:"24",height:"24",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 2C11.4477 2 11 2.44772 11 3V3.078C10.2728 3.19668 9.65318 3.44603 9.1328 3.79295C8.39456 4.28511 7.91489 4.93416 7.60557 5.55279C7.29822 6.1675 7.14952 6.77011 7.07611 7.2106C7.039 7.43322 7.02007 7.62092 7.01035 7.75688C7.00549 7.82503 7.0029 7.88067 7.00153 7.92176C7.00085 7.94232 7.00046 7.95929 7.00025 7.9724L7.00005 7.98916L7.00001 7.99533L7 7.99786L7 7.99898C7 7.9995 7 8 8 8H7V11.723L4.14251 16.4855C3.95715 16.7944 3.95229 17.1792 4.1298 17.4927C4.30731 17.8062 4.63973 18 5 18H19C19.3603 18 19.6927 17.8062 19.8702 17.4927C20.0477 17.1792 20.0429 16.7944 19.8575 16.4855L17 11.723V8H16C17 8 17 7.9995 17 7.99898L17 7.99786L17 7.99533L17 7.98916L16.9997 7.9724C16.9995 7.95929 16.9992 7.94232 16.9985 7.92176C16.9971 7.88067 16.9945 7.82503 16.9896 7.75688C16.9799 7.62092 16.961 7.43322 16.9239 7.2106C16.8505 6.77011 16.7018 6.1675 16.3944 5.55279C16.0851 4.93416 15.6054 4.28511 14.8672 3.79295C14.3468 3.44603 13.7272 3.19668 13 3.078V3C13 2.44772 12.5523 2 12 2ZM9.00042 7.98839L9 8.00435V12C9 12.1812 8.95074 12.3591 8.85749 12.5145L6.76619 16H17.2338L15.1425 12.5145C15.0493 12.3591 15 12.1812 15 12V8.00436L14.9996 7.98839C14.999 7.97089 14.9977 7.9406 14.9947 7.89937C14.9888 7.81658 14.9765 7.69178 14.9511 7.5394C14.8995 7.22989 14.7982 6.8325 14.6056 6.44721C14.4149 6.06584 14.1446 5.71489 13.7578 5.45705C13.3773 5.20338 12.825 5 12 5C11.175 5 10.6227 5.20338 10.2422 5.45705C9.85544 5.71489 9.58511 6.06584 9.39443 6.44721C9.20178 6.8325 9.10048 7.22989 9.04889 7.5394C9.0235 7.69178 9.01118 7.81658 9.00527 7.89937C9.00233 7.9406 9.001 7.97089 9.00042 7.98839ZM14 19C14 20.1046 13.1046 21 12 21C10.8954 21 10 20.1046 10 19H14Z",fill:"currentColor"})])],-1),Cm=["src"],ym={key:1,class:"user-avatar"};function km(o,e,r,h,i,s){var oe;const n=w("router-link"),a=w("recent-boards-modal"),f=w("starred-boards-modal"),g=w("template-modal"),C=w("more-modal"),L=w("create-board-modal"),m=w("search"),p=w("search-modal"),B=w("logged-in-user-modal"),P=U("clickOutside");return l(),d("section",$1,[t("div",Y1,[A(n,{to:"/board",class:"logo-box"},{default:F(()=>[X1,Q1]),_:1}),t("a",{onClick:e[0]||(e[0]=R=>(s.openRecentBoardsModal(),s.calcPosOfBox())),class:"link recent",to:"/",ref:"recent"},sm,512),i.openRecentModal&&s.boards?_((l(),T(a,{key:0,boards:s.boards,style:b({top:"48px",left:i.posRecent.left+"px"}),onClose:s.closeRecentModal},null,8,["boards","style","onClose"])),[[P,s.closeRecentModal]]):c("",!0),t("a",{onClick:e[1]||(e[1]=R=>(s.openStarredBoardsModal(),s.calcPosOfBox())),ref:"starred",class:"link starred"},im,512),i.openStarredModal&&s.boards?_((l(),T(f,{key:1,boards:s.boards,style:b({top:"48px",left:i.pos.left+"px"}),onClose:s.closeEditMode},null,8,["boards","style","onClose"])),[[P,s.closeEditMode]]):c("",!0),t("a",{class:"link templates",to:"/",onClick:e[2]||(e[2]=R=>(s.openTemplateModal(),s.calcPosOfBox())),ref:"template"},am,512),i.openTemplate&&s.boards?_((l(),T(g,{key:2,boards:s.boards,style:b({top:"48px",left:i.posTemplate.left+"px"}),onClose:s.closeTemplate,onDuplicateTemplate:s.saveNewBoard},null,8,["boards","style","onClose","onDuplicateTemplate"])),[[P,s.closeTemplate]]):c("",!0),t("a",{ref:"create",class:"link create",to:"/",onClick:e[3]||(e[3]=R=>(s.openCreateModal(),s.calcPosOfBox()))},um,512),t("a",{ref:"more",class:"link more",to:"/",onClick:e[4]||(e[4]=R=>(s.openMoreModal(),s.calcPosOfBox()))},pm,512),i.openMore?_((l(),T(C,{key:3,class:"more-modal",boards:s.boards,style:b({top:"48px",left:i.posMore.left+"px"}),onClose:s.closeMoreModal},null,8,["boards","style","onClose"])),[[P,s.closeMoreModal]]):c("",!0),i.openCreate?_((l(),T(L,{key:4,class:"top-create-board",style:b({top:"48px",left:i.posCreate.left+"px"}),newBoard:i.newBoard,onAdd:s.saveNewBoard,onClose:s.closeCreateModal},null,8,["style","newBoard","onAdd","onClose"])),[[P,s.closeCreateModal]]):c("",!0),t("button",{class:"icon-btn btn-plus",to:"/",onClick:e[5]||(e[5]=R=>(s.openCreateModal(),s.calcPosOfBox())),ref:"create2"},vm,512)]),t("span",bm,[A(m,{onSetFilter:s.onSetFilter,onClick:e[6]||(e[6]=R=>s.openSearchModal())},null,8,["onSetFilter"]),_m,fm,i.openSearch?_((l(),T(p,{key:0,boards:s.filteredBoards,style:{top:"48px",right:"4px"},onClose:s.closeSearchModal},null,8,["boards","onClose"])),[[P,s.closeSearchModal]]):c("",!0),t("div",{onClick:e[7]||(e[7]=R=>(s.openLoggedInUserModal(),s.calcPosOfBox())),ref:"user",class:"user-avatar-in-app-header"},[(oe=s.loggedinUser)!=null&&oe.imgUrl?(l(),d("img",{key:0,src:s.loggedinUser.imgUrl,alt:""},null,8,Cm)):(l(),d("div",ym,v(s.loggedinUser?s.setMemberLetters(s.loggedinUser.fullname):"GU"),1))],512),i.openUserModal?_((l(),T(B,{key:1,boards:s.boards,style:{top:"48px",right:0},onClose:s.closeUserModal},null,8,["boards","onClose"])),[[P,s.closeUserModal]]):c("",!0)])],512)}var wm=y(q1,[["render",km]]);const Tm={name:"app",async created(){await this.$store.dispatch({type:"loadBoards"})},methods:{},computed:{boards(){return this.$store.getters.boards},board(){return this.$store.getters.board},isOnBoard(){const{boardId:o}=this.$route.params;return o}},components:{appHeader:wm}};function Bm(o,e,r,h,i,s){const n=w("app-header"),a=w("router-view");return l(),d("section",{class:"app-main",style:b(s.board&&s.isOnBoard&&s.board.backgroundPhoto?{"background-image":`url(${s.board.backgroundPhoto})`,"background-repeat":"no-repeat","background-size":"cover"}:null)},[this.$route.name!=="home"&&this.$route.name!=="login"&&this.$route.name!=="signup"?(l(),T(n,{key:0})):c("",!0),A(a)],4)}var Em=y(Tm,[["render",Bm]]),xm={state:{boards:null,selectedBoard:null,filterBy:{txt:""},loggedinUser:D.getLoggedinUser()},getters:{board(o){return o.selectedBoard},boards(o){return o.boards},starredBoards(o){if(o.boards)return o.boards.filter(e=>e.isStarred&&e.members.some(r=>r._id===o.loggedinUser._id))},recentlyBoards(o){return JSON.parse(JSON.stringify(o.boards)).filter(h=>!h.isTemplate&&h.members.some(i=>{var s;return i._id===((s=o.loggedinUser)==null?void 0:s._id)})).sort((h,i)=>i.lastTimeWatched-h.lastTimeWatched)},templates(o){return o.boards.filter(e=>e.isTemplate)},categoryBusiness(o){return o.boards.filter(e=>e.category==="business"&&e.isTemplate)},categoryDesign(o){return o.boards.filter(e=>e.category==="design"&&e.isTemplate)},categoryEducation(o){return o.boards.filter(e=>e.category==="education"&&e.isTemplate)},categoryLifestyle(o){return o.boards.filter(e=>e.category==="lifestyle"&&e.isTemplate)},allActivities(o){var e=[];return o.boards.forEach(r=>r.activities.forEach(h=>e.unshift(h))),e},filteredBoards(o){if(!o.filterBy.txt)return o.boards.filter(e=>!e.isTemplate);if(o.filterBy.txt){const e=new RegExp(o.filterBy.txt,"i");return o.boards.filter(r=>e.test(r.title)&&!r.isTemplate)}},loggedinUserBoards(o){return o.boards.filter(e=>e.createdBy._id===o.loggedinUser._id)}},mutations:{setBoards(o,{boards:e}){o.loggedinUser=D.getLoggedinUser(),o.boards=e},setBoard(o,{board:e}){o.selectedBoard=e},removeBoard(o,{id:e}){const r=o.boards.findIndex(h=>h._id===e);o.boards.splice(r,1)},saveBoard(o,{board:e}){const r=o.boards.findIndex(h=>h._id===e._id);r!==-1?o.boards.splice(r,1,e):o.boards.push(e)},setFilter(o,{filterBy:e}){o.filterBy=e},updateUser(o){o.loggedinUser=D.getLoggedinUser()}},actions:{async loadBoards({commit:o,state:e}){try{const r=await S.query();o({type:"setBoards",boards:r})}catch{console.log("err")}},async loadBoardById({commit:o},{newId:e}){try{const r=await S.getById(e);o({type:"setBoard",board:r})}catch{console.log("err!!")}},async removeBoard({commit:o},{id:e}){try{await S.remove(e),o({type:"removeBoard",id:e})}catch{console.log("err!!")}},async saveBoard({commit:o},{board:e}){if(!e.isTemplate)try{e._id&&o({type:"setBoard",board:e});const r=await S.save(e);o({type:"saveBoard",board:r})}catch{console.log("sorry user cannot do that!!!")}}}},Om={state:{loggedinUser:D.getLoggedinUser(),users:[],watchedUser:null},getters:{loggedinUser({loggedinUser:o}){return o},users({users:o}){return o},watchedUser({watchedUser:o}){return o}},mutations:{login(o,{user:e}){o.loggedinUser=e?K({},e):null},logout(o){o.loggedinUser=null},setUsers(o,{users:e}){o.users=e},setWatchedUser(o,{user:e}){o.watchedUser=e},removeUser(o,{userId:e}){o.users=o.users.filter(r=>r._id!==e)}},actions:{async login({commit:o},{user:e}){try{const r=await D.login(e);o({type:"login",user:r})}catch{console.log("err")}},async logout({commit:o}){try{await D.logout(),o({type:"logout"})}catch{console.log("err")}},async signup({commit:o},{user:e}){try{const r=await D.signup(e);o({type:"login",newUser:r})}catch{console.log("err")}},async loadUsers({commit:o}){try{const e=await D.getUsers();o({type:"setUsers",users:e})}catch(e){throw console.log("userStore: Error in loadUsers",e),e}},async loadAndWatchUser({commit:o},{userId:e}){try{const r=await D.getById(e);o({type:"setWatchedUser",user:r}),socketService.off(SOCKET_EVENT_USER_UPDATED),socketService.on(SOCKET_EVENT_USER_UPDATED,h=>{o({type:"setWatchedUser",user:h})})}catch(r){throw console.log("userStore: Error in loadAndWatchUser",r),r}},async removeUser({commit:o},{userId:e}){try{await D.remove(e),o({type:"removeUser",userId:e})}catch(r){throw console.log("userStore: Error in removeUser",r),r}},async updateUser({commit:o},{user:e}){try{e=await D.update(e),o({type:"setUser",user:e})}catch(r){throw console.log("userStore: Error in updateUser",r),r}}}};const Mm=Oe({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{boardStore:xm,userStore:Om}});const Sm={mounted:o=>{o.focus()}};const j=Me(Em);j.directive("clickOutside",Se.directive);j.directive("focus",Sm);j.component("datepicker",Ue);j.use(Ae);j.use(i1);j.use(Mm);j.mount("#app");
