var ge=Object.defineProperty;var se=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var oe=(o,e,r)=>e in o?ge(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r,H=(o,e)=>{for(var r in e||(e={}))ve.call(e,r)&&oe(o,r,e[r]);if(se)for(var r of se(e))be.call(e,r)&&oe(o,r,e[r]);return o};import{o as l,c as d,a as t,w as _,v as O,F as B,r as x,n as b,t as g,b as c,d as Z,e as J,f as u,g as S,h as w,i as A,j as E,k as G,l as k,m as _e,p as re,q as D,C as le,D as de,s as F,u as ae,T as V,x as Ce,y as K,z as fe,A as ye,B as ke,E as we,G as Te,U as Ee,H as Be}from"./vendor.6528daaa.js";const xe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))h(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&h(n)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function h(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}};xe();var y=(o,e)=>{const r=o.__vccOpts||o;for(const[h,i]of e)r[h]=i;return r};const Oe={name:"search",data(){return{filterBy:{txt:""}}},methods:{setFilter(){this.$emit("setFilter",H({},this.filterBy))}}},Se={class:"search-main"},Me={class:"search-box",for:"search"},Ae=t("svg",{width:"20",height:"20",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.5 18C6.35786 18 3 14.6421 3 10.5C3 6.35786 6.35786 3 10.5 3C14.6421 3 18 6.35786 18 10.5C18 12.2269 17.4164 13.8175 16.4356 15.0852L20.3769 19.0953C20.764 19.4892 20.7586 20.1223 20.3647 20.5095C19.9708 20.8966 19.3376 20.8911 18.9505 20.4972L15.0129 16.4909C13.7572 17.4383 12.1942 18 10.5 18ZM16 10.5C16 13.5376 13.5376 16 10.5 16C7.46243 16 5 13.5376 5 10.5C5 7.46243 7.46243 5 10.5 5C13.5376 5 16 7.46243 16 10.5Z",fill:"currentColor"})],-1);function De(o,e,r,h,i,s){return l(),d("section",Se,[t("label",Me,[_(t("input",{type:"search",name:"search",id:"search",placeholder:"Search","onUpdate:modelValue":e[0]||(e[0]=n=>i.filterBy.txt=n),onInput:e[1]||(e[1]=(...n)=>s.setFilter&&s.setFilter(...n))},null,544),[[O,i.filterBy.txt]]),Ae])])}var ne=y(Oe,[["render",De]]);const Le={props:{boards:{type:Array,required:!0}},methods:{closeModal(){this.$emit("close")},goToDetails(o){this.$emit("close"),this.$router.push(`/board/${o._id}`)}},computed:{starredBoards(){return this.$store.getters.starredBoards}}},Ue={class:"starred-boards-modal"},Ne={class:"starred-boards-header"},Ie=t("div",{class:"header-text-starred-boards-modal"},[t("h1",null,"Starred boards")],-1),Fe=t("span",{class:"icon-sm icon-closed"},null,-1),Je=[Fe],Pe={class:"modal-starred-boards-list"},Re={class:"modal-starred-board-list"},Ge=["onClick","board"],je={class:"modal-starred-board"};function We(o,e,r,h,i,s){return l(),d("div",Ue,[t("div",Ne,[Ie,t("div",{class:"header-close-starred-boards-modal",onClick:e[0]||(e[0]=(...n)=>s.closeModal&&s.closeModal(...n))},Je)]),t("div",Pe,[t("div",Re,[(l(!0),d(B,null,x(s.starredBoards,n=>(l(),d("div",{class:"boards-render-modal-starred",onClick:a=>s.goToDetails(n),board:n,key:n},[t("div",{class:"board-background-starred-modal",style:b(n.background?{backgroundColor:n.background}:{"background-image":`url(${n.backgroundThumb})`})},null,4),t("div",je,g(n.title),1)],8,Ge))),128))])])])}var Ve=y(Le,[["render",We]]);const ze={props:{boards:{type:Array,required:!0}},methods:{closeModal(){this.$emit("close")},goToDetails(o){this.$emit("close"),this.$router.push(`/board/${o._id}`)}},computed:{recentBoardsForDisplay(){let o=[];return o=JSON.parse(JSON.stringify(this.boards)),o.sort(function(e,r){return r.lastTimeWatched-e.lastTimeWatched}),o}}},He={class:"starred-boards-modal"},Ke={class:"starred-boards-header"},Ze=t("div",{class:"header-text-starred-boards-modal"},[t("h1",null,"Recent boards")],-1),qe=t("span",{class:"icon-sm icon-closed"},null,-1),$e=[qe],Ye={class:"modal-starred-boards-list"},Xe={class:"modal-starred-board-list"},Qe=["onClick","board"],et={class:"modal-starred-board"};function tt(o,e,r,h,i,s){return l(),d("div",He,[t("div",Ke,[Ze,t("div",{class:"header-close-starred-boards-modal",onClick:e[0]||(e[0]=(...n)=>s.closeModal&&s.closeModal(...n))},$e)]),t("div",Ye,[t("div",Xe,[(l(!0),d(B,null,x(s.recentBoardsForDisplay,n=>(l(),d("div",{class:"boards-render-modal-starred",onClick:a=>s.goToDetails(n),board:n,key:n},[t("div",{class:"board-background-starred-modal",style:b(n.background?{backgroundColor:n.background}:{"background-image":`url(${n.backgroundThumb})`})},null,4),t("div",et,g(n.title),1)],8,Qe))),128))])])])}var st=y(ze,[["render",tt]]);const ot={props:{},computed:{loggedinUser(){return this.$store.getters.loggedinUser}},methods:{closeModal(){this.$emit("close")},logout(){this.$emit("close"),this.$store.dispatch({type:"logout"}),this.$router.push("/")},login(){this.$emit("close"),this.$router.push("/login")},setMemberLetters(o){return o.split(" ").map(r=>r[0]).join("").toUpperCase()}}},rt={class:"user-boards-modal"},it={class:"user-boards-header"},lt=t("div",{class:"header-text-user-boards-modal"},[t("h1",null,"Account")],-1),dt=t("span",{class:"icon-sm icon-closed"},null,-1),at=[dt],nt={class:"user-info-modal"},ct={key:0,class:"user-avatar-in-modal"},ut={key:1,class:"user-avatar-in-modal"},ht={key:2,class:"user-details"},pt={key:3,class:"user-details"},mt=t("hr",null,null,-1);function gt(o,e,r,h,i,s){return l(),d("div",rt,[t("div",it,[lt,t("div",{class:"header-close-user-boards-modal",onClick:e[0]||(e[0]=(...n)=>s.closeModal&&s.closeModal(...n))},at)]),t("div",nt,[s.loggedinUser?(l(),d("div",ct,g(s.setMemberLetters(s.loggedinUser.fullname)),1)):c("",!0),s.loggedinUser?c("",!0):(l(),d("div",ut,"GU")),s.loggedinUser?(l(),d("div",ht,g(s.loggedinUser.username),1)):c("",!0),s.loggedinUser?c("",!0):(l(),d("div",pt,"Guest User"))]),mt,s.loggedinUser?c("",!0):(l(),d("div",{key:0,onClick:e[1]||(e[1]=(...n)=>s.login&&s.login(...n)),class:"login"},"Log in")),s.loggedinUser?(l(),d("div",{key:1,onClick:e[2]||(e[2]=(...n)=>s.logout&&s.logout(...n)),class:"logout"},"Log out")):c("",!0)])}var vt=y(ot,[["render",gt]]);const bt={props:{boards:{type:Array,required:!0}},methods:{closeModal(){this.$emit("close")},goToDetails(o){this.$emit("close"),this.$router.push(`/board/${o._id}`)}},computed:{templateBoards(){return this.$store.getters.templates}}},_t={class:"template-boards-modal"},Ct={class:"template-boards-header"},ft=t("div",{class:"header-text-template-boards-modal"},[t("h1",null,"Templates")],-1),yt=t("span",{class:"icon-sm icon-closed"},null,-1),kt=[yt],wt={class:"modal-template-boards-list"},Tt={class:"modal-template-board-list"},Et=["onClick","board"],Bt={class:"modal-template-board"};function xt(o,e,r,h,i,s){return l(),d("div",_t,[t("div",Ct,[ft,t("div",{class:"header-close-template-boards-modal",onClick:e[0]||(e[0]=(...n)=>s.closeModal&&s.closeModal(...n))},kt)]),t("div",wt,[t("div",Tt,[(l(!0),d(B,null,x(s.templateBoards,n=>(l(),d("div",{class:"boards-render-modal-template",onClick:a=>s.goToDetails(n),board:n,key:n},[t("div",{class:"board-background-template-modal",style:b(n.background?{backgroundColor:n.background}:{"background-image":`url(${n.backgroundThumb})`})},null,4),t("div",Bt,g(n.title),1)],8,Et))),128))])])])}var Ot=y(bt,[["render",xt]]);const q=async(o="background",e=30)=>{try{return(await Z.get(`https://api.unsplash.com/search/photos?&orientation=landscape&page=1&per_page=${e}&query=${o}&client_id=7J3v9FUMKbF2KbsE4NhWlimmR9EM6EhJEQb6e0lY1js&q=20&w=200`)).data}catch(r){console.error("ERROR!",r)}},St={props:{},data(){return{isLoading:!1,photos:null,searchInput:void 0,search:""}},created(){this.onUploadImg()},methods:{closeModal(){this.$emit("close")},async onUploadImg(){const o=await q(this.searchInput,50);this.photos=o.results},setBgc(o){console.log("photo:",o.thumb),this.$emit("changeBgc",o)},updateSearch(){console.log("this.search:",this.search),this.searchInput=this.search}},computed:{},components:{},emits:["changeBgc","close"]},Mt={class:"unsplash-boards-modal"},At={class:"side-bar-menu-header-background-img flex"},Dt=t("div",{class:"side-bar-menu-header-text-background-img"},[t("h3",null,[S(" Photos by "),t("a",{target:"_blank",href:"https://unsplash.com/?utm_source=trello&utm_medium=referral&utm_campaign=api-credit"},"Unsplash")])],-1),Lt=t("span",{class:"icon-md icon-closed"},null,-1),Ut=[Lt],Nt=t("hr",null,null,-1),It={tabindex:"0",class:"search-unsplash"},Ft=t("span",{class:"icon-sm icon-search"},null,-1),Jt={class:"side-bar-menu-background-container-img"},Pt=["onClick","src"];function Rt(o,e,r,h,i,s){return l(),d("div",Mt,[t("div",At,[Dt,t("div",{class:"header-close-img-boards-modal",onClick:e[0]||(e[0]=(...n)=>s.closeModal&&s.closeModal(...n))},Ut)]),Nt,t("div",It,[Ft,_(t("input",{onKeyup:e[1]||(e[1]=J(u((...n)=>s.onUploadImg&&s.onUploadImg(...n),["stop","prevent"]),["enter"])),"onUpdate:modelValue":e[2]||(e[2]=n=>i.searchInput=n),placeholder:"Photos",type:"text"},null,544),[[O,i.searchInput]])]),t("div",Jt,[(l(!0),d(B,null,x(i.photos,n=>(l(),d("div",{class:"unspash-imgs",key:n},[t("img",{onClick:a=>s.setBgc(n.urls),class:"unspash-img",src:n.urls.thumb,alt:""},null,8,Pt)]))),128))])])}var Gt=y(St,[["render",Rt]]);const jt={name:"board-app",props:{newBoard:{type:Object,required:!0}},data(){return{isEdit:!1,unsplashOpen:!1,setColor:"#0079BF",setPhoto:"",photos:null,num:4}},created(){this.onUploadImg()},computed:{boards(){return this.$store.getters.boards}},methods:{closeModal(){this.$emit("close")},saveNewBoard(){!this.newBoard.title||(!this.newBoard.background&&!this.newBoard.backgroundPhoto&&(this.newBoard.background="#0079BF"),this.$emit("add",this.newBoard),this.setColor="#0079BF",this.setPhoto="")},setBoardColor(o="#0079BF"){this.setColor=o,this.setPhoto="",this.newBoard.backgroundPhoto="",this.newBoard.background=o},async onUploadImg(){const o=await q("abstract",this.num);this.photos=o.results},setBoardPhoto(o){this.setPhoto=o.thumb,this.setColor="",this.newBoard.background="",this.newBoard.backgroundPhoto=o.full,this.newBoard.backgroundThumb=o.thumb},openUnsplash(){this.unsplashOpen=!0},closeUnsplash(){this.unsplashOpen=!1}},components:{unsplashModal:Gt}},Wt={class:"create-board-modal"},Vt={class:"create-board-modal-header"},zt=t("div",{class:"header-text-create-boards-modal"},[t("h1",null,"Create board")],-1),Ht=t("span",{class:"icon-sm icon-closed"},null,-1),Kt=[Ht],Zt={class:"create-board-background-preview"},qt=t("img",{src:"https://a.trellocdn.com/prgb/dist/images/board-preview-skeleton.14cda5dc635d1f13bc48.svg",alt:""},null,-1),$t=[qt],Yt=t("label",{class:"background-label"},"Background",-1),Xt={class:"create-background-photo"},Qt=["onClick"],es={class:"create-board-background-color"},ts={key:0,class:"checked"},ss={key:0,class:"checked"},os={key:0,class:"checked"},rs={key:0,class:"checked"},is={key:0,class:"checked"},ls=t("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5 14C6.10457 14 7 13.1046 7 12C7 10.8954 6.10457 10 5 10C3.89543 10 3 10.8954 3 12C3 13.1046 3.89543 14 5 14ZM12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14ZM21 12C21 13.1046 20.1046 14 19 14C17.8954 14 17 13.1046 17 12C17 10.8954 17.8954 10 19 10C20.1046 10 21 10.8954 21 12Z",fill:"currentColor"})],-1),ds=[ls],as=t("label",{for:""},"Board title",-1),ns={class:"create-board-title-add-btns"};function cs(o,e,r,h,i,s){const n=w("unsplash-modal"),a=A("clickOutside"),C=A("focus");return l(),d("div",Wt,[t("form",null,[t("div",Vt,[zt,t("div",{class:"header-close-create-boards-modal",onClick:e[0]||(e[0]=(...v)=>s.closeModal&&s.closeModal(...v))},Kt)]),t("div",Zt,[t("div",{class:"create-board-img-preview",style:b(i.setColor?{backgroundColor:i.setColor}:{"background-image":`url(${i.setPhoto})`,"background-size":"cover","background-repeat":"no-repeat"})},$t,4)]),Yt,t("div",Xt,[(l(!0),d(B,null,x(i.photos,v=>(l(),d("div",{class:"photos",key:v},[t("div",{onClick:T=>s.setBoardPhoto(v.urls),class:"photo-pref",style:b(i.setPhoto===v.urls.thumb?{"background-image":`linear-gradient(rgba(0, 0, 0, 0.527),rgba(0, 0, 0, 0.5)) , url(${v.urls.thumb})`,"background-size":"cover"}:{"background-image":`url(${v.urls.thumb})`,"background-size":"cover"}),alt:""},[i.setPhoto===v.urls.thumb?(l(),d("span",{key:0,class:"checked",style:b(i.setPhoto===v.urls.thumb?{"padding-top":"5px"}:null)},null,4)):c("",!0)],12,Qt)]))),128))]),t("div",es,[t("div",{onClick:e[1]||(e[1]=v=>s.setBoardColor("#0079BF")),class:"blue color-pref"},[i.setColor==="#0079BF"?(l(),d("span",ts)):c("",!0)]),t("div",{onClick:e[2]||(e[2]=v=>s.setBoardColor("#D29034")),class:"yellow color-pref"},[i.setColor==="#D29034"?(l(),d("span",ss)):c("",!0)]),t("div",{onClick:e[3]||(e[3]=v=>s.setBoardColor("#519839")),class:"green color-pref"},[i.setColor==="#519839"?(l(),d("span",os)):c("",!0)]),t("div",{onClick:e[4]||(e[4]=v=>s.setBoardColor("#B04632")),class:"red color-pref"},[i.setColor==="#B04632"?(l(),d("span",rs)):c("",!0)]),t("div",{onClick:e[5]||(e[5]=v=>s.setBoardColor("#89609E")),class:"purple color-pref"},[i.setColor==="#89609E"?(l(),d("span",is)):c("",!0)]),t("div",{onClick:e[6]||(e[6]=(...v)=>s.openUnsplash&&s.openUnsplash(...v)),class:"more color-pref"},ds)]),i.unsplashOpen?_((l(),E(n,{key:0,onClose:s.closeUnsplash,style:{left:"1040px",bottom:"0"},onChangeBgc:s.setBoardPhoto},null,8,["onClose","onChangeBgc"])),[[a,s.closeUnsplash]]):c("",!0),as,t("div",ns,[_(t("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=v=>r.newBoard.title=v)},null,512),[[C],[O,r.newBoard.title]]),t("button",{style:b(r.newBoard.title?null:{cursor:"no-drop","background-color":"#F5F6F8",color:"#BFC4CE"}),onClick:e[8]||(e[8]=u((...v)=>s.saveNewBoard&&s.saveNewBoard(...v),["stop","prevent"]))},"Create",4)])])])}var ce=y(jt,[["render",cs]]);const I={saveToStorage:us,loadFromStorage:hs,makeId:ps,getRandomInt:ms};function us(o,e){localStorage.setItem(o,JSON.stringify(e)||null)}function hs(o){let e=localStorage.getItem(o);return e?JSON.parse(e):void 0}function ps(o=8){for(var e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",h=0;h<o;h++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}function ms(o,e){return o=Math.ceil(o),e=Math.floor(e),Math.floor(Math.random()*(e-o+1))+o}var gs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEMAAABFCAYAAAARk1tuAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAFA0lEQVR42u2cX4hVVRTGf+vcM07jBCWFMvaHwOkhE0MQg17CoJdEBKWHIvEtspCkpwqyqTR8qKQi7DXozSwio54NCSEDCwoUw0ZNhMwsbdK5Z3093DujODPes+49c85tvB8cGO7M3mut7+69/u19BnroYTrYdB8u3KFF88U6S1gGLEQkVStaiLHGHzKOeZ19v75iP1+XjKWv6uZ/+nwH2DPAvKqVn2V84XXbOjpiv0wh474dGhqTf41YXrWWZUFwNlWy7tg2OzBJxvB76r98Pttv2KqqFayCkCRLVh4fseMpwPif/pzBKlDVupUOg9uUZO8A6w3J7nq9PgrcWbViFRIilA2nd4yMPyC7cYkAEBgkj6UmLZk+wN5gMBtOTXaL68bzFVOhBaksM9RbGmCk7oD1VoYk0uaPVevSBWiS0Y7LMNgn2UFJ4zlH3ERNq008HJBxFPjUnXO5xyS6F+xJYCBqUErmKFiGSbb1zJvz341TyGtDL114W4m9kEO5g7WL81ef3GVjUSFDL17crRoHgP7IuKRpXe5H0l9n5g283wYRAPSpvh1JLWVl/lY7RACc3jl4yORfRezCRTJO1tQt3wM6xYh5u2SM7rz1nEt/t5SFn2hXBkDdGY3Y5XhVDrQseTE5KRl4wGcUkZ9JrdVMOk19hCLL15zmyig9A83BRr1TGR5egGnmTlJ2U6/pP6+PzpaGlIfxqwdYM88omYtMks1ydehymeWXoUkH2vOfIEghQ5Gsq4g6RqAWmo516jTU3Cl5zUKNaEISpLBjMnLM0ekucofANkGQZkBS8j5xNOtNAzdkAbu8UajFtkkoeM84SY4F3OEuMbkUWV7upDiEzsuKWERlLEQnvNVSgFDbrwiX4crRXMs64yLoQJvRJLo0itjtJaS85orpKlIH8EgIKoYKteAjEgimg3vDwPxKeTO0xggsgI0cf1NAoRYd0mz75R/Xhoypc0gt56kXUKhFArgBaUaGlXz9wnPty6wjpRoZQOxLDrf9CmpotGz7mdnSjkQ490dtSvAquMghQ7atf8voknbmH9h88nGkNSG7Kmvu5JEn7k689uPA5lPfAmfzTm0wDKyI22SNPMNDrrvz4NrafU5iAHgkNnd7SCar1rKPF7vxoNuM1KP9jAIMUSxRLgWuNo4Xi8hAAwlvaZCoZpuYImleeUgbtWHZzZ3yZbaCTUST0i+rNBKJqu2/VqlmcyfWKiyEi267KyRro1ArRnL33SKzxiFSoyUcGFYEG1XbPi0azZ3A9xTpOM9IRdeti0ZW3EZotc7rfZ/108U4bKKRofyPpHvYeHiwbaFP/TQE3B6RWcYjh6ThM0Ij+5PawAdsORq6LwXAxsODtVrfh5VbPsOTNtKM4B4Wm5LzelSbjhxC+jfnqEGDlZIvDJNYBhq1iRO+7tfAYpMWV21DcbCKriR0KZqXVXpsXLmS0Ls7PnElIcPa8xlzDBM+oxu7LWXD5sjLu0XAgRRxqRtrhdIhu5wiP917Ewkw+y0lqx2E7BLB1xHmHJJsf8KeZRcw+7xqXaqFjZLVvpk4XtyGtJbo2ztzBv4ynyy/fMVZbPj+CbCPibW95gJ2s3fFs3BtD2/DobW4fYSxoGoNS8A4xnb2rnhjIgWfGkbW/LCA/vHnEeuBZXRfI7tTnAD7EsZ38dmDR67+xfUNffq7Pn6vL8Jq//9/LJKlTt/YGfY8NON7b/8BkXuLYs87Gy0AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjItMDMtMzFUMTU6Mzc6NDErMDA6MDClS8mdAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIyLTAzLTMxVDE1OjM3OjQxKzAwOjAw1BZxIQAAAABJRU5ErkJggg==",vs="/assets/hero-home-page.f5b958c8.png";const bs={data(){return{}},computed:{},methods:{goToSignup(){this.$router.push("/signup")},goTologin(){this.$router.push("/login")},goToBoards(){this.$router.push("/board")}},components:{}},_s={class:"home-main"},Cs=t("div",{class:"logo-box-home"},[t("div",null,[t("img",{src:gs,alt:"logo"})]),t("p",null,"Tasko")],-1),fs={class:"home-main-box"},ys={class:"img-txt"},ks=t("div",null,[t("h1",null,"Tasko helps teams move work forward."),t("p",null," Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique\u2014accomplish it all with Tasko. ")],-1),ws={class:"input-mail-box"},Ts=t("div",{class:"img-box"},[t("img",{src:vs,alt:"hero"})],-1);function Es(o,e,r,h,i,s){return l(),d("section",_s,[t("nav",null,[Cs,t("div",null,[t("a",{onClick:e[0]||(e[0]=(...n)=>s.goTologin&&s.goTologin(...n)),href:"#"},"Log in"),t("button",{onClick:e[1]||(e[1]=(...n)=>s.goToSignup&&s.goToSignup(...n))},"Sign up")])]),t("div",fs,[t("div",ys,[t("div",null,[ks,t("div",ws,[t("button",{type:"submit",onClick:e[2]||(e[2]=(...n)=>s.goToBoards&&s.goToBoards(...n))},"Let's start")])]),Ts])])])}var Bs=y(bs,[["render",Es]]);const xs={name:"board-preview",props:{board:Object},data(){return{boardToEdit:null,isStarred:!1}},methods:{goToDetails(){this.$router.push(`/board/${this.board._id}`),this.$emit("viewedBoard",this.board)},boardStared(){this.isStarred=!this.isStarred;const o=JSON.parse(JSON.stringify(this.board));o.isStarred=this.isStarred,this.$emit("starredChange",o)}},emits:["starredChange","viewedBoard","duplicateTemplate"]};function Os(o,e,r,h,i,s){return l(),d("div",{class:"board-preview-main",onClick:e[1]||(e[1]=u(n=>s.goToDetails(),["stop","prevent"])),style:b(r.board.background?{backgroundColor:r.board.background}:{"background-image":`linear-gradient(rgba(0, 0, 0, 0.527),rgba(0, 0, 0, 0.5)) , url(${r.board.backgroundThumb})`,"background-size":"cover"})},[t("h1",null,g(r.board.title),1),r.board.isStarred?(l(),d("span",{key:0,class:"icon-sm icon-starred-boards",onClick:e[0]||(e[0]=u((...n)=>s.boardStared&&s.boardStared(...n),["stop","prevent"]))})):c("",!0)],4)}var Ss=y(xs,[["render",Os]]);const Ms={props:{boards:{type:Array,required:!0}},methods:{onStarredChange(o){this.$emit("updateStarred",o)},addViewedBoard(o){let e=JSON.parse(JSON.stringify(o));e.lastTimeWatched=Date.now(),this.$emit("updateRecentlyWatched",e)},addBoard(o){console.log("board in list :",o),this.$emit("duplicateTemplate",o)}},components:{boardPreview:Ss},emits:["updateStarred","updateRecentlyWatched","duplicateTemplate"]},As={class:"board-list-main"};function Ds(o,e,r,h,i,s){const n=w("board-preview");return l(),d("div",As,[(l(!0),d(B,null,x(r.boards,a=>(l(),E(n,{onStarredChange:s.onStarredChange,onViewedBoard:s.addViewedBoard,onDuplicateTemplate:s.addBoard,board:a,key:a._id},null,8,["onStarredChange","onViewedBoard","onDuplicateTemplate","board"]))),128))])}var Ls=y(Ms,[["render",Ds]]);const Us={props:{searchInput:String},data(){return{isLoading:!1,photos:null}},created(){this.onUploadImg()},methods:{async onUploadImg(){const o=await q(this.searchInput);this.photos=o.results},setBgc(o){this.$emit("changeBgc",o)}},emits:["changeBgc"]},Ns=["onClick","src"];function Is(o,e,r,h,i,s){return l(!0),d(B,null,x(i.photos,n=>(l(),d("div",{class:"unspash-imgs",key:n},[t("img",{onClick:a=>s.setBgc(n.urls),class:"unspash-img",src:n.urls.thumb,alt:""},null,8,Ns)]))),128)}var ue=y(Us,[["render",Is]]),Fs="/assets/business-templates.105dc65a.svg",Js="/assets/design-templates.e6877446.svg",Ps="/assets/education-templates.d1701939.svg",Rs="/assets/project-management-templates.3751b069.svg";const Gs={name:"board-app",data(){return{preFolder:"",currFolder:"",isFolder:{boards:!1,templates:!1,home:!1},filterBy:null,isEdit:!1,newBoard:M.getEmptyBoard(),newActivity:M.getEmptyActivity(),setColor:"",pos:0}},created(){this.setFolder("boards")},methods:{calcPosOfBox(o){this.pos=this.$refs[o].getBoundingClientRect(),console.log("this.pos:",this.pos.right)},setFilter(o){this.$store.dispatch({type:"filter",filterBy:o})},openBoardEdit(){this.isEdit=!0},closeBoardEdit(){this.isEdit=!1},saveNewBoard(o){!o.title||(this.loggedinUser&&(o.createdBy=this.loggedinUser,o.members.push(this.loggedinUser),this.newActivity.byMember=this.loggedinUser),o.isTemplate=!1,this.newActivity.txt="created this board",o.activities.push(this.newActivity),this.$store.dispatch({type:"saveBoard",board:o}),this.isEdit=!1,console.log("board in save new board:",o),this.newBoard=M.getEmptyBoard())},setFolder(o){this.currFolder=o,this.isFolder[this.preFolder]=!this.isFolder[this.preFolder],this.preFolder=o,this.isFolder[o]=!this.isFolder[o]},setColors(o){return this.isFolder[o]?"selected-folder":"folder"},updateBoard(o){this.$store.dispatch({type:"saveBoard",board:o})},addLastTimeWatched(o){this.$store.dispatch({type:"saveBoard",board:o})},goToDetails(o){this.$emit("close"),this.$router.push(`/board/${o._id}`)},setMemberLetters(o){return o.split(" ").map(r=>r[0]).join("").toUpperCase()},generateTime(o){return G(o).fromNow()},setRightPos(o){if(console.log('screen.height + "px"',window.innerWidth),window.innerWidth-o<390){console.log("true");const e=window.innerWidth-390;return console.log("bottom",e),e}else return o+8}},computed:{loggedinUser(){return this.$store.getters.loggedinUser},boards(){return this.$store.getters.boards},starredBoards(){return this.$store.getters.starredBoards},recentlyBoards(){return this.$store.getters.recentlyBoards},templates(){return this.$store.getters.templates},categoryBusiness(){return this.$store.getters.categoryBusiness},categoryDesign(){return this.$store.getters.categoryDesign},categoryEducation(){return this.$store.getters.categoryEducation},categoryLifestyle(){return this.$store.getters.categoryLifestyle},allActivities(){return this.$store.getters.allActivities}},components:{boardList:Ls,unsplash:ue,createBoardModal:ce}},js={class:"board-app-main"},Ws={class:"main-container"},Vs={class:"contact"},zs={class:"folders"},Hs=t("span",{class:"icon-sm icon-board"},null,-1),Ks=t("p",null,"Boards",-1),Zs=[Hs,Ks],qs=t("span",{class:"icon-sm icon-template"},null,-1),$s=t("p",null,"Templates",-1),Ys=[qs,$s],Xs=t("span",{class:"icon-sm icon-home"},null,-1),Qs=t("p",null,"Home",-1),eo=[Xs,Qs],to={class:"folder-info"},so={key:0,class:"boards-info"},oo={class:"border-list"},ro=t("div",{class:"header"},[t("span",{class:"icon-lg icon-star-boards"}),t("p",null,"Starred boards")],-1),io={class:"border-list"},lo=t("div",{class:"header"},[t("span",{class:"icon-lg icon-clock-boards"}),t("p",null,"Recently viewed")],-1),ao={class:"border-list"},no=t("div",{class:"header"},[t("p",null,"YOUR WORKSPACES")],-1),co=t("p",null,"Create new board",-1),uo=[co],ho={key:1,class:"boards-info"},po={class:"border-list"},mo=t("div",{class:"header-templates"},[t("img",{class:"category-icon",src:Fs,alt:"business-icon"}),t("p",{class:"category-title"},"Business")],-1),go={class:"border-list"},vo=t("div",{class:"header-templates"},[t("img",{class:"category-icon",src:Js,alt:"business-icon"}),t("p",{class:"category-title"},"Design")],-1),bo={class:"border-list"},_o=t("div",{class:"header-templates"},[t("img",{class:"category-icon",src:Ps,alt:"business-icon"}),t("p",{class:"category-title"},"Education")],-1),Co={class:"border-list"},fo=t("div",{class:"header-templates"},[t("img",{class:"category-icon",src:Rs,alt:"business-icon"}),t("p",{class:"category-title"},"Life style")],-1),yo={key:2,class:"home-info"},ko={class:"activities"},wo={class:"side-bar-menu-activity-container"},To=t("div",{class:"activity-header flex"},[t("span",{class:"icon-sm icon-activity-home"}),t("h1",null,"Activity")],-1),Eo={class:"member-avatar-in-activity"},Bo={class:"activity-info"},xo={class:"activities-info-txt flex"},Oo={class:"activity-timestamp"},So={class:"boards"},Mo={class:"starred-boards"},Ao=t("div",{class:"starred-boards-header"},[t("span",{class:"icon-sm icon-star-home"}),t("p",null,"Starred")],-1),Do={class:"modal-starred-boards-list"},Lo={class:"modal-starred-board-list"},Uo=["onClick","board"],No={class:"modal-starred-board"},Io=t("span",{class:"icon-sm icon-star-home-board"},null,-1),Fo=t("br",null,null,-1),Jo=t("br",null,null,-1),Po={class:"starred-boards"},Ro=t("div",{class:"starred-boards-header"},[t("span",{class:"icon-sm icon-clock-home"}),t("p",null,"Recently viewed")],-1),Go={class:"modal-starred-boards-list"},jo={class:"modal-starred-board-list"},Wo=["onClick","board"],Vo={class:"modal-starred-board"};function zo(o,e,r,h,i,s){const n=w("board-list"),a=w("create-board-modal"),C=A("clickOutside");return l(),d("section",js,[t("div",Ws,[t("div",Vs,[t("div",null,[t("ul",zs,[t("li",{onClick:e[0]||(e[0]=v=>s.setFolder("boards")),class:k(s.setColors("boards"))},Zs,2),t("li",{onClick:e[1]||(e[1]=v=>s.setFolder("templates")),class:k(s.setColors("templates"))},Ys,2),t("li",{onClick:e[2]||(e[2]=v=>s.setFolder("home")),class:k(s.setColors("home"))},eo,2)])]),t("div",to,[i.isFolder.boards?(l(),d("div",so,[t("div",oo,[ro,s.starredBoards?(l(),E(n,{key:0,boards:s.starredBoards,onDuplicateTemplate:s.saveNewBoard,onUpdateRecentlyWatched:s.addLastTimeWatched,onUpdateStarred:s.updateBoard},null,8,["boards","onDuplicateTemplate","onUpdateRecentlyWatched","onUpdateStarred"])):c("",!0)]),t("div",io,[lo,s.recentlyBoards?(l(),E(n,{key:0,boards:s.recentlyBoards,onDuplicateTemplate:s.saveNewBoard,onUpdateRecentlyWatched:s.addLastTimeWatched,onUpdateStarred:s.updateBoard},null,8,["boards","onDuplicateTemplate","onUpdateRecentlyWatched","onUpdateStarred"])):c("",!0)]),t("div",ao,[no,s.boards?(l(),E(n,{key:0,boards:s.boards,onDuplicateTemplate:s.saveNewBoard,onUpdateRecentlyWatched:s.addLastTimeWatched,onUpdateStarred:s.updateBoard},null,8,["boards","onDuplicateTemplate","onUpdateRecentlyWatched","onUpdateStarred"])):c("",!0)]),t("button",{class:"create-btn",onClick:e[3]||(e[3]=v=>(s.openBoardEdit(),s.calcPosOfBox("button"))),ref:"button",type:"button"},uo,512),i.isEdit?_((l(),E(a,{key:0,onClose:s.closeBoardEdit,onAdd:s.saveNewBoard,style:b({right:s.setRightPos(i.pos.right)+"px",bottom:"0"}),newBoard:i.newBoard},null,8,["onClose","onAdd","style","newBoard"])),[[C,s.closeBoardEdit]]):c("",!0)])):c("",!0),i.isFolder.templates?(l(),d("div",ho,[t("div",po,[mo,s.boards?(l(),E(n,{key:0,boards:s.categoryBusiness,onDuplicateTemplate:s.saveNewBoard,onUpdateRecentlyWatched:s.addLastTimeWatched},null,8,["boards","onDuplicateTemplate","onUpdateRecentlyWatched"])):c("",!0)]),t("div",go,[vo,s.boards?(l(),E(n,{key:0,boards:s.categoryDesign,onDuplicateTemplate:s.saveNewBoard,onUpdateRecentlyWatched:s.addLastTimeWatched},null,8,["boards","onDuplicateTemplate","onUpdateRecentlyWatched"])):c("",!0)]),t("div",bo,[_o,s.boards?(l(),E(n,{key:0,boards:s.categoryEducation,onDuplicateTemplate:s.saveNewBoard,onUpdateRecentlyWatched:s.addLastTimeWatched},null,8,["boards","onDuplicateTemplate","onUpdateRecentlyWatched"])):c("",!0)]),t("div",Co,[fo,s.boards?(l(),E(n,{key:0,boards:s.categoryLifestyle,onDuplicateTemplate:s.saveNewBoard,onUpdateRecentlyWatched:s.addLastTimeWatched},null,8,["boards","onDuplicateTemplate","onUpdateRecentlyWatched"])):c("",!0)])])):c("",!0),i.isFolder.home?(l(),d("div",yo,[t("div",ko,[t("div",wo,[To,(l(!0),d(B,null,x(s.allActivities,v=>(l(),d("div",{class:"activities-render flex",key:v},[t("div",Eo,g(s.setMemberLetters(v.byMember.fullname)),1),t("div",Bo,[t("div",xo,[t("p",null,[t("span",null,g(v.byMember.username),1),S(" "+g(v.txt),1)])]),t("div",Oo,g(s.generateTime(v.createdAt)),1)])]))),128))])]),t("div",So,[t("div",Mo,[Ao,t("div",Do,[t("div",Lo,[(l(!0),d(B,null,x(s.starredBoards,v=>(l(),d("div",{class:"boards-render-modal-starred",onClick:T=>s.goToDetails(v),board:v,key:v},[t("div",{class:"board-background-starred-modal",style:b(v.background?{backgroundColor:v.background}:{"background-image":`url(${v.backgroundPhoto})`})},null,4),t("div",No,g(v.title),1),Io],8,Uo))),128))])])]),Fo,Jo,t("div",Po,[Ro,t("div",Go,[t("div",jo,[(l(!0),d(B,null,x(s.recentlyBoards,v=>(l(),d("div",{class:"boards-render-modal-starred",onClick:T=>s.goToDetails(v),board:v,key:v},[t("div",{class:"board-background-starred-modal",style:b(v.background?{backgroundColor:v.background}:{"background-image":`url(${v.backgroundPhoto})`})},null,4),t("div",Vo,g(v.title),1)],8,Wo))),128))])])])])])):c("",!0)])])])])}var Ho=y(Gs,[["render",zo]]);const Ko="",P=Zo();window.socketService=P;P.setup();function Zo(){var o=null;return{async setup(){o=_e(Ko),window.socket=o},on(r,h){o.on(r,h)},off(r,h=null){!o||(h?o.off(r,h):o.removeAllListeners(r))},emit(r,h){o.emit(r,h)},terminate(){o=null}}}const z="loggedinUser",N={login:Qo,logout:tr,signup:er,getLoggedinUser:he,getUsers:qo,getById:$o,remove:Yo,update:Xo};window.userService=N;function qo(){return U.get("user")}async function $o(o){return await U.get(`user/${o}`)}function Yo(o){return U.delete(`user/${o}`)}async function Xo(o){return o=await U.put(`user/${o._id}`,o),he()._id===o._id&&_saveLocalUser(o),o}async function Qo(o){try{const e=await U.post("auth/login",o);return sessionStorage.setItem(z,JSON.stringify(e)),e}catch(e){console.log("login err:",e)}}async function er(o){try{console.log("userInfo:",o);const e=await U.post("auth/signup",o);sessionStorage.setItem(z,JSON.stringify(e))}catch(e){console.log("signup err:",e)}}async function tr(){try{await U.post("auth/logout"),sessionStorage.setItem(z,null)}catch(o){console.log("logout err:",o)}}function he(){return JSON.parse(sessionStorage.getItem(z))}const ie=(o,e)=>{const{removedIndex:r,addedIndex:h,payload:i}=e;if(r===null&&h===null)return o;const s=[...o];let n=i;return r!==null&&(n=s.splice(r,1)[0]),h!==null&&s.splice(h,0,n),s},sr={name:"label-editor",props:{label:{type:Object},pos:{type:Object},board:{type:Object},new:{type:Boolean}},data(){return{name:"",color:"",labelToEdit:"",txt:"Create label",btnTxt:"Create",isCreate:this.new}},created(){this.new||(this.name=this.label.title,this.color=this.label.color,this.txt="Change label",this.btnTxt="Save")},methods:{setLabelColor(o){this.color=o},save(){this.new?(this.color||(this.color="#61BD4F"),this.labelToEdit={id:I.makeId(),title:this.name,color:this.color}):(this.labelToEdit=JSON.parse(JSON.stringify(this.label)),this.labelToEdit.title=this.name,this.labelToEdit.color=this.color),this.$emit("saveLabel",this.labelToEdit),this.closeEditLabel()},deleteLabel(){this.$emit("deleteLabel",this.label),this.closeEditLabel()},close(){this.$emit("closeBoth")},closeEditLabel(){this.$emit("closeEditLabel")}},emits:["closeBoth","closeEditLabel","saveLabel","deleteLabel"]},or={class:"main-title-container"},rr={class:"main-title"},ir={class:"actions-modal-main"},lr=t("span",{class:"mini-edit-title"},"Name",-1),dr=t("span",{class:"mini-edit-title"},"Color",-1),ar={class:"label-color-picker"},nr=t("div",{class:"no-color-container"},[t("span",{class:"no-color-title"},"No color."),t("span",{class:"no-color-text"},"This won't show up on the front of cards")],-1);function cr(o,e,r,h,i,s){const n=A("clickOutside");return _((l(),d("section",{style:b({top:r.pos.bottom+8+"px",left:r.pos.left+"px"}),class:"label-modal"},[t("div",or,[t("div",{class:"icon-sm icon-back",type:"button",onClick:e[0]||(e[0]=u((...a)=>s.closeEditLabel&&s.closeEditLabel(...a),["stop","prevent"]))}),t("div",{class:"icon-sm icon-close",onClick:e[1]||(e[1]=u((...a)=>s.close&&s.close(...a),["stop","prevent"]))}),t("span",rr,g(i.txt),1)]),t("section",ir,[lr,_(t("input",{onClick:e[2]||(e[2]=u(()=>{},["stop","prevent"])),class:"edit-input",onSubmit:e[3]||(e[3]=u(()=>{},["prevent"])),type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>i.name=a)},null,544),[[O,i.name]]),dr,t("section",ar,[t("div",{class:k([{checked:i.color==="#61BD4F"},"green color-pref"]),onClick:e[5]||(e[5]=u(a=>s.setLabelColor("#61BD4F"),["stop","prevent"]))},null,2),t("div",{class:k([{checked:i.color==="#F2D600"},"yellow color-pref"]),onClick:e[6]||(e[6]=u(a=>s.setLabelColor("#F2D600"),["stop","prevent"]))},null,2),t("div",{class:k([{checked:i.color==="#FF9F1A"},"orange color-pref"]),onClick:e[7]||(e[7]=u(a=>s.setLabelColor("#FF9F1A"),["stop","prevent"]))},null,2),t("div",{class:k([{checked:i.color==="#EB5A46"},"red color-pref"]),onClick:e[8]||(e[8]=u(a=>s.setLabelColor("#EB5A46"),["stop","prevent"]))},null,2),t("div",{class:k([{checked:i.color==="#C377E0"},"purple color-pref"]),onClick:e[9]||(e[9]=u(a=>s.setLabelColor("#C377E0"),["stop","prevent"]))},null,2),t("div",{class:k([{checked:i.color==="#0079BF"},"blue color-pref"]),onClick:e[10]||(e[10]=u(a=>s.setLabelColor("#0079BF"),["stop","prevent"]))},null,2),t("div",{class:k([{checked:i.color==="#00C2E0"},"light-blue color-pref"]),onClick:e[11]||(e[11]=u(a=>s.setLabelColor("#00C2E0"),["stop","prevent"]))},null,2),t("div",{class:k([{checked:i.color==="#51E898"},"light-green color-pref"]),onClick:e[12]||(e[12]=u(a=>s.setLabelColor("#51E898"),["stop","prevent"]))},null,2),t("div",{class:k([{checked:i.color==="#FF78CB"},"pink color-pref"]),onClick:e[13]||(e[13]=u(a=>s.setLabelColor("#FF78CB"),["stop","prevent"]))},null,2),t("div",{class:k([{checked:i.color==="#344563"},"dark-blue color-pref"]),onClick:e[14]||(e[14]=u(a=>s.setLabelColor("#344563"),["stop","prevent"]))},null,2),t("div",{class:k([{checked:i.color==="#B3BAC5"},"no-color color-pref"]),onClick:e[15]||(e[15]=u(a=>s.setLabelColor("#B3BAC5"),["stop","prevent"]))},null,2),nr]),t("button",{class:"save-btn",onClick:e[16]||(e[16]=u((...a)=>s.save&&s.save(...a),["stop","prevent"]))},g(i.btnTxt),1),i.isCreate?c("",!0):(l(),d("button",{key:0,class:"delete-btn",onClick:e[17]||(e[17]=u((...a)=>s.deleteLabel&&s.deleteLabel(...a),["stop","prevent"]))},"Delete"))])],4)),[[n,s.close]])}var pe=y(sr,[["render",cr]]);const ur={components:{labelEditorModalCmp:pe},name:"label-modal",props:{board:{type:Object},card:{type:Object},group:{type:Object},pos:{type:Object}},data(){return{cardToEdit:null,isLabelEditOpen:!1,currLabelIdx:null,labelsToEdit:null,isCreate:!1}},computed:{currLabel(){return this.board.labels[this.currLabelIdx]}},created(){},methods:{setBottomPos(o){if(console.log('screen.height + "px"',window.innerHeight),window.innerHeight-o<455){console.log("true");const e=window.innerHeight-455;return console.log("bottom",e),e}else return o+8},closeLabelEdit(){this.isLabelEditOpen=!1,this.isCreate=!1},closeModal(){this.isLabelEditOpen=!1,this.close()},close(){this.isCreate=!1,this.$emit("actionsClose")},addLabelToCard(o){if(this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.cardToEdit.labels.length){const e=this.board.labels.findIndex(h=>h.id===o),r=this.cardToEdit.labels.findIndex(h=>h===o);r===-1?this.cardToEdit.labels.splice(e,0,o):this.cardToEdit.labels.splice(r,1)}else this.cardToEdit.labels.push(o);this.$emit("cardEdit",this.cardToEdit)},openEditLabel(o){this.isLabelEditOpen=!0,this.currLabelIdx=this.board.labels.findIndex(e=>e.id===o.id)},saveLabelToBoard(o){this.currLabelIdx=this.board.labels.findIndex(e=>e.id===o.id),this.labelsToEdit=JSON.parse(JSON.stringify(this.board.labels)),this.currLabelIdx===-1?this.labelsToEdit.push(o):this.labelsToEdit[this.currLabelIdx]=o,this.$emit("boardEdit",{key:"labels",val:this.labelsToEdit})},deleteLabelFromBoard(o){this.currLabelIdx=this.board.labels.findIndex(e=>e.id===o.id),this.labelsToEdit=JSON.parse(JSON.stringify(this.board.labels)),this.labelsToEdit.splice(this.currLabelIdx,1),this.$emit("boardEdit",{key:"labels",val:this.labelsToEdit})},createNewLabel(){this.isLabelEditOpen=!0,this.isCreate=!0},lightenDarkenColor(o,e){if(o==="#0079BF")return"#0066A0";if(o==="#00AECC")return"#0092AB";if(o==="")return"rgba(0,0,0,.32)";var r=!1;o[0]=="#"&&(o=o.slice(1),r=!0);var h=parseInt(o,16),i=(h>>16)+e;i>255?i=255:i<0&&(i=0);var s=(h>>8&255)+e;s>255?s=255:s<0&&(s=0);var n=(h&255)+e;return n>255?n=255:n<0&&(n=0),(r?"#":"")+(n|s<<8|i<<16).toString(16)}},emits:["uploadComplete","uploading","actionsClose","cardEdit","boardEdit","cardCopySave"]},hr={class:"main-title-container"},pr=t("span",{class:"main-title"},"Labels",-1),mr={class:"actions-modal-main"},gr=t("input",{class:"main-input",type:"text"},null,-1),vr=t("span",{class:"mini-title"},"Labels",-1),br=["onClick"],_r={key:0,class:"icon-sm icon-check"},Cr=["onClick"];function fr(o,e,r,h,i,s){const n=w("label-editor-modal-cmp"),a=A("clickOutside");return l(),d("section",null,[i.isLabelEditOpen?c("",!0):_((l(),d("section",{key:0,style:b({top:s.setBottomPos(r.pos.bottom)+"px",left:r.pos.left+"px"}),class:"label-modal"},[t("div",hr,[t("div",{class:"icon-sm icon-close",onClick:e[0]||(e[0]=u((...C)=>s.close&&s.close(...C),["stop","prevent"]))}),pr]),t("section",mr,[gr,vr,(l(!0),d(B,null,x(r.board.labels,C=>(l(),d("section",{key:C.id,class:"label-container flex"},[t("div",{style:b({backgroundColor:s.lightenDarkenColor(C.color,-30)}),class:"label-color-hover"},[t("div",{class:"label-color",style:b({backgroundColor:C.color}),onClick:u(v=>s.addLabelToCard(C.id),["stop","prevent"])},[S(g(C.title)+" ",1),r.card.labels.includes(C.id)?(l(),d("div",_r)):c("",!0)],12,br)],4),t("button",{class:"icon-sm icon-edited",onClick:u(v=>s.openEditLabel(C),["stop","prevent"])},null,8,Cr)]))),128)),t("button",{type:"button",onClick:e[1]||(e[1]=u((...C)=>s.createNewLabel&&s.createNewLabel(...C),["stop","prevent"])),class:"create-btn"},"Create a new label")])],4)),[[a,s.close]]),i.isLabelEditOpen?(l(),E(n,{key:1,board:r.board,label:s.currLabel,pos:r.pos,new:i.isCreate,onSaveLabel:s.saveLabelToBoard,onDeleteLabel:s.deleteLabelFromBoard,onCloseEditLabel:s.closeLabelEdit,onCloseBoth:s.closeModal},null,8,["board","label","pos","new","onSaveLabel","onDeleteLabel","onCloseEditLabel","onCloseBoth"])):c("",!0)])}var $=y(ur,[["render",fr]]);const yr={components:{},name:"members-modal",props:{board:{type:Object},card:{type:Object},group:{type:Object},pos:{type:Object}},data(){return{cardToEdit:JSON.parse(JSON.stringify(this.card)),isLabelEditOpen:!1}},computed:{membersToEdit(){return this.card.members.map(o=>o._id)}},created(){},methods:{setBottomPos(o){if(console.log('screen.height + "px"',window.innerHeight),window.innerHeight-o<310){console.log("true");const e=window.innerHeight-310;return console.log("bottom",e),e}else return o+8},close(){this.$emit("actionsClose")},addMemberToCard(o){if(this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.cardToEdit.members.length){const e=this.cardToEdit.members.findIndex(r=>r._id===o._id);e===-1?this.cardToEdit.members.push(o):this.cardToEdit.members.splice(e,1)}else this.cardToEdit.members.push(o);this.$emit("cardEdit",this.cardToEdit)},setMemberLetters(o){return o.split(" ").map(r=>r[0]).join("").toUpperCase()}},emits:["actionsClose","cardEdit","boardEdit"]},kr={class:"main-title-container"},wr=t("span",{class:"main-title"},"Members",-1),Tr=t("input",{class:"main-input",type:"text"},null,-1),Er=t("span",{class:"mini-title"},"Board members",-1),Br=["onClick"],xr={class:"member-div"},Or={class:"member"},Sr={key:0,class:"icon-sm icon-check"};function Mr(o,e,r,h,i,s){const n=A("clickOutside");return i.isLabelEditOpen?c("",!0):_((l(),d("section",{key:0,style:b({top:s.setBottomPos(r.pos.bottom)+"px",left:r.pos.left+"px"}),class:"label-modal"},[t("div",kr,[t("div",{class:"icon-sm icon-close",onClick:e[0]||(e[0]=u((...a)=>s.close&&s.close(...a),["stop","prevent"]))}),wr]),Tr,t("section",null,[Er,(l(!0),d(B,null,x(r.board.members,a=>(l(),d("section",{onClick:u(C=>s.addMemberToCard(a),["stop","prevent"]),key:a._id,class:"member-container"},[t("div",xr,[t("div",Or,g(s.setMemberLetters(a.fullname)),1),t("span",null,g(a.fullname),1),s.membersToEdit.includes(a._id)?(l(),d("div",Sr)):c("",!0)])],8,Br))),128))])],4)),[[n,s.close]])}var Y=y(yr,[["render",Mr]]);const Ar={components:{search:ne},name:"dates-modal",setup(){const o=re(new Date),e=re(new Date);return{date:o,startDate:e}},props:{board:{type:Object},card:{type:Object},group:{type:Object},pos:{type:Object}},data(){return{isStartDate:!1}},computed:{cardToEdit(){return JSON.parse(JSON.stringify(this.card))}},created(){},methods:{setBottomPos(o){if(console.log('screen.height + "px"',window.innerHeight),window.innerHeight-o<480){console.log("true");const e=window.innerHeight-480;return console.log("bottom",e),e}else return o+8},close(){this.$emit("actionsClose")},saveDate(){this.cardToEdit.date=this.date.getTime(),this.$emit("cardEdit",this.cardToEdit),this.$emit("actionsClose")},startDateInit(){this.isStartDate=!this.isStartDate}},emits:["actionsClose","cardEdit"]},Dr={class:"main-title-container"},Lr=t("span",{class:"main-title"},"Dates",-1),Ur={class:"actions-modal-main"},Nr={class:"date-picker"};function Ir(o,e,r,h,i,s){const n=w("datepicker"),a=A("clickOutside");return _((l(),d("section",{style:b({top:s.setBottomPos(r.pos.bottom)+"px",left:r.pos.left+"px"}),class:"label-modal"},[t("div",Dr,[t("div",{class:"icon-sm icon-close",onClick:e[0]||(e[0]=u((...C)=>s.close&&s.close(...C),["stop","prevent"]))}),Lr]),t("section",Ur,[t("section",Nr,[D(n,{modelValue:h.date,"onUpdate:modelValue":e[1]||(e[1]=C=>h.date=C),inline:"",autoApply:"",typeabble:""},null,8,["modelValue"]),t("button",{type:"button",onClick:e[2]||(e[2]=u((...C)=>s.saveDate&&s.saveDate(...C),["stop","prevent"])),class:"create-btn date-modal-btn"},"Save"),t("button",{type:"button",onClick:e[3]||(e[3]=u((...C)=>o.remove&&o.remove(...C),["stop","prevent"])),class:"create-btn delete-date"},"Remove")])])],4)),[[a,s.close]])}var X=y(Ar,[["render",Ir]]);const Fr={name:"delete-modal",props:{title:{},pos:{type:Object}},data(){return{}},computed:{},created(){},methods:{setBottomPos(o){if(console.log('screen.height + "px"',window.innerHeight),window.innerHeight-o<175){console.log("true");const e=window.innerHeight-175;return console.log("bottom",e),e}else return o+8},close(){this.$emit("closeDeleteWarning")},confirmDelete(){this.$emit("deleteConfirmed")}},emits:["closeDeleteWarning","deleteConfirmed"]},Jr={class:"main-title-container"},Pr={class:"main-title"},Rr={class:"delete-modal-main"},Gr={class:"delete-txt"};function jr(o,e,r,h,i,s){const n=A("clickOutside");return _((l(),d("section",{style:b({top:s.setBottomPos(r.pos.bottom)+"px",left:r.pos.left+"px"}),class:"label-modal"},[t("div",Jr,[t("div",{class:"icon-sm icon-close",onClick:e[0]||(e[0]=(...a)=>s.close&&s.close(...a))}),t("span",Pr,"Delete "+g(r.title)+"?",1)]),t("section",Rr,[t("span",Gr,"There is no undo. This will remove this "+g(r.title)+" and destroy its history.",1),t("button",{type:"button",onClick:e[1]||(e[1]=(...a)=>s.confirmDelete&&s.confirmDelete(...a)),class:"delete-btn"},"Delete")])],4)),[[n,s.close]])}var Q=y(Fr,[["render",jr]]);const me={uploadFromSystem:Wr};async function Wr(o){this.file=o.target.files[0];let e=new FormData;e.append("file",this.file),e.append("upload_preset","cajan_2022");try{return(await Z.post("https://api.cloudinary.com/v1_1/dw85wdwsw/image/upload",e)).data}catch(r){console.log("ERROR",r)}}const Vr={components:{},name:"cover-modal",props:{board:{type:Object},card:{type:Object},group:{type:Object},pos:{type:Object}},data(){return{cardToEdit:null,color:"",isSmall:!0,file:"",isDark:!0,attachmentIdx:"",isLoading:!1}},computed:{},created(){this.card.cover.type==="color"&&(this.color=this.card.cover.value,this.isSmall=this.card.cover.size==="small",this.isDark=this.card.cover.theme==="dark"),this.card.cover.type==="attachment"&&(this.attachmentIdx=this.card.attachments.findIndex(o=>o.link===this.card.cover.value),this.isSmall=this.card.cover.size==="small",this.isDark=this.card.cover.theme==="dark")},computed:{isColorPicked(){return this.color!==""},isAttachmentPicked(){return this.attachmentIdx!==""}},methods:{close(){this.$emit("actionsClose")},setCoverColor(o){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.color===o?(this.color="",this.cardToEdit.cover={}):(this.color=o,this.cardToEdit.cover.type="color",this.cardToEdit.cover.value=this.color,this.cardToEdit.cover.size=this.isSmall?"small":"large"),this.attachmentIdx="",this.$emit("cardEdit",this.cardToEdit)},setSize(){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.cardToEdit.cover.size=this.isSmall?"small":"large",this.$emit("cardEdit",this.cardToEdit)},setTheme(o){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.isDark=o==="dark",this.cardToEdit.cover.theme=this.isDark?"dark":"light",this.$emit("cardEdit",this.cardToEdit)},async attachFileFromSystem(o){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.isLoading=!0;const e=await me.uploadFromSystem(o);this.isLoading=!1,this.cardToEdit.attachments.unshift({id:I.makeId(),name:e.original_filename,link:e.secure_url}),this.$emit("cardEdit",this.cardToEdit)},setAttachmentAsCover(o){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.attachmentIdx===o?(this.attachmentIdx="",this.cardToEdit.cover={}):(this.attachmentIdx=o,this.cardToEdit.cover.type="attachment",this.cardToEdit.cover.value=this.cardToEdit.attachments[o].link,this.cardToEdit.cover.size=this.isSmall?"small":"large",this.cardToEdit.cover.theme=this.isDark?"dark":"light"),this.color="",this.$emit("cardEdit",this.cardToEdit)},removeCover(){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.cardToEdit.cover={},this.color="",this.attachmentIdx="",this.$emit("cardEdit",this.cardToEdit)}},emits:["actionsClose","cardEdit"]},zr={class:"main-title-container"},Hr=t("span",{class:"main-title"},"Cover",-1),Kr={class:"actions-modal-main"},Zr=t("span",{class:"mini-title"},"Size",-1),qr={class:"cover-size-select"},$r={class:"cover-main"},Yr={class:"cover-footer"},Xr={class:"cover-main"},Qr={key:1},ei=t("span",{class:"mini-title"},"Text color",-1),ti={class:"cover-mode-container"},si=t("span",{class:"mini-title"},"Colors",-1),oi={class:"cover-colors"},ri=t("span",{class:"mini-title"},"Attachments",-1),ii={key:2,class:"attachment-container"},li=["onClick","src"],di={key:3,class:"cover-loading"},ai=t("img",{class:"loading-svg",src:"https://res.cloudinary.com/dw85wdwsw/image/upload/v1648563503/dlcjcnpz0afvbj2mgrqj.svg"},null,-1),ni=[ai];function ci(o,e,r,h,i,s){const n=A("clickOutside");return _((l(),d("section",{style:b({top:r.pos.bottom+8+"px",left:r.pos.left+"px"}),class:"label-modal"},[t("div",zr,[t("div",{class:"icon-sm icon-close",onClick:e[0]||(e[0]=u((...a)=>s.close&&s.close(...a),["stop","prevent","stop","prevent"]))}),Hr]),t("section",Kr,[Zr,t("section",qr,[t("section",{onClick:e[1]||(e[1]=u(a=>(i.isSmall=!0,s.setSize()),["stop","prevent"])),class:k([{selected:(s.isColorPicked||s.isAttachmentPicked)&&i.isSmall===!0,nonselected:(s.isColorPicked||s.isAttachmentPicked)&&i.isSmall===!1},"cover-size-small"]),style:b([s.isColorPicked||s.isAttachmentPicked?{cursor:"pointer"}:{}])},[t("div",{class:"cover-header",style:b([s.isColorPicked?{backgroundColor:i.color}:s.isAttachmentPicked?{backgroundImage:"url("+r.card.attachments[i.attachmentIdx].link+")"}:{backgroundColor:"#CFD3DA"}])},null,4),t("div",$r,[t("div",{class:"line-1",style:b([s.isColorPicked?{backgroundColor:"#6B778C"}:{backgroundColor:"#CFD3DA"}])},null,4),t("div",{class:"line-2",style:b([s.isColorPicked?{backgroundColor:"#6B778C"}:{backgroundColor:"#CFD3DA"}])},null,4),t("div",Yr,[t("div",{class:"box-1",style:b([s.isColorPicked?{backgroundColor:"#6B778C"}:{backgroundColor:"#CFD3DA"}])},null,4),t("div",{class:"box-2",style:b([s.isColorPicked?{backgroundColor:"#6B778C"}:{backgroundColor:"#CFD3DA"}])},null,4),t("div",{class:"circle",style:b([s.isColorPicked?{backgroundColor:"#6B778C"}:{backgroundColor:"#CFD3DA"}])},null,4)])])],6),t("section",{class:k(["cover-size-all",{selected:(s.isColorPicked||s.isAttachmentPicked)&&i.isSmall===!1,nonselected:(s.isColorPicked||s.isAttachmentPicked)&&i.isSmall===!0}]),onClick:e[2]||(e[2]=u(a=>(i.isSmall=!1,s.setSize()),["stop","prevent"])),style:b([s.isColorPicked?{backgroundColor:i.color,cursor:"pointer"}:s.isAttachmentPicked?{backgroundImage:"url("+r.card.attachments[i.attachmentIdx].link+")",cursor:"pointer"}:{backgroundColor:"#CFD3DA"}])},[t("div",Xr,[t("div",{class:"line-1",style:b([s.isColorPicked&&i.color!=="#172B4D"?{backgroundColor:"rgba(9, 30, 66, 0.6)"}:{backgroundColor:"#FFFFFF"}])},null,4),t("div",{class:"line-2",style:b([s.isColorPicked&&i.color!=="#172B4D"?{backgroundColor:"rgba(9, 30, 66, 0.6)"}:{backgroundColor:"#FFFFFF"}])},null,4)])],6)]),s.isColorPicked||s.isAttachmentPicked?(l(),d("button",{key:0,type:"button",onClick:e[3]||(e[3]=u((...a)=>s.removeCover&&s.removeCover(...a),["stop","prevent"])),class:"create-btn"},"Remove cover")):c("",!0),s.isAttachmentPicked&&!i.isSmall?(l(),d("section",Qr,[ei,t("div",ti,[t("div",{class:k(["dark",{selected:i.isDark}]),onClick:e[4]||(e[4]=u(a=>s.setTheme("dark"),["stop","prevent"])),style:b({backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+r.card.cover.value+")"})},[t("span",null,g(r.card.title),1)],6),t("div",{class:k(["light",{selected:!i.isDark}]),onClick:e[5]||(e[5]=u(a=>s.setTheme("light"),["stop","prevent"])),style:b({backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5)), url("+r.card.cover.value+")"})},[t("span",null,g(r.card.title),1)],6)])])):c("",!0),si,t("section",oi,[t("div",{onClick:e[6]||(e[6]=u(a=>s.setCoverColor("#7BC86C"),["stop","prevent"])),class:k([{selected:i.color==="#7BC86C"},"green color-pref-cover"])},null,2),t("div",{onClick:e[7]||(e[7]=u(a=>s.setCoverColor("#F5DD29"),["stop","prevent"])),class:k([{selected:i.color==="#F5DD29"},"yellow color-pref-cover"])},null,2),t("div",{onClick:e[8]||(e[8]=u(a=>s.setCoverColor("#FFAF3F"),["stop","prevent"])),class:k([{selected:i.color==="#FFAF3F"},"orange color-pref-cover"])},null,2),t("div",{onClick:e[9]||(e[9]=u(a=>s.setCoverColor("#EF7564"),["stop","prevent"])),class:k([{selected:i.color==="#EF7564"},"red color-pref-cover"])},null,2),t("div",{onClick:e[10]||(e[10]=u(a=>s.setCoverColor("#CD8DE5"),["stop","prevent"])),class:k([{selected:i.color==="#CD8DE5"},"purple color-pref-cover"])},null,2),t("div",{onClick:e[11]||(e[11]=u(a=>s.setCoverColor("#5BA4CF"),["stop","prevent"])),class:k([{selected:i.color==="#5BA4CF"},"blue color-pref-cover"])},null,2),t("div",{onClick:e[12]||(e[12]=u(a=>s.setCoverColor("#29CCE5"),["stop","prevent"])),class:k([{selected:i.color==="#29CCE5"},"light-blue color-pref-cover"])},null,2),t("div",{onClick:e[13]||(e[13]=u(a=>s.setCoverColor("#6DECA9"),["stop","prevent"])),class:k([{selected:i.color==="#6DECA9"},"light-green color-pref-cover"])},null,2),t("div",{onClick:e[14]||(e[14]=u(a=>s.setCoverColor("#FF8ED4"),["stop","prevent"])),class:k([{selected:i.color==="#FF8ED4"},"pink color-pref-cover"])},null,2),t("div",{onClick:e[15]||(e[15]=u(a=>s.setCoverColor("#172B4D"),["stop","prevent"])),class:k([{selected:i.color==="#172B4D"},"dark-blue color-pref-cover"])},null,2)]),ri,r.card.attachments.length?(l(),d("section",ii,[(l(!0),d(B,null,x(r.card.attachments,(a,C)=>(l(),d("section",{key:a.link},[t("img",{class:k([{selected:i.attachmentIdx===C},"attachment"]),onClick:u(v=>s.setAttachmentAsCover(C),["stop","prevent"]),src:a.link},null,10,li)]))),128))])):c("",!0),i.isLoading?(l(),d("section",di,ni)):c("",!0),t("input",{onChange:e[16]||(e[16]=a=>s.attachFileFromSystem(a)),type:"file",ref:"file",style:{display:"none"}},null,544),t("button",{type:"button",onClick:e[17]||(e[17]=a=>o.$refs.file.click()),class:"create-btn"},"Upload a cover image")])],4)),[[n,s.close]])}var ee=y(Vr,[["render",ci]]);const ui={name:"copy-modal",props:{board:{type:Object},card:{type:Object},group:{type:Object},pos:{type:Object}},data(){return{keepList:{labels:!0,members:!0},positions:[],cardToCopy:null,copyToPos:{group:"",position:1}}},created(){this.setCardToCopy()},methods:{setBottomPos(o){if(console.log('screen.height + "px"',window.innerHeight),window.innerHeight-o<290){console.log("true");const e=window.innerHeight-290;return console.log("bottom",e),e}else return o+8},setCardToCopy(){this.cardToCopy=JSON.parse(JSON.stringify(this.card))},close(){this.$emit("actionsClose")},toggleCardKeep(o){this.keepList[o]=!this.keepList[o]},setGroupPosition(o){const e=o.target.value,r=this.board.groups.find(s=>s.id===e);this.copyToPos.group=r,this.positions=[];for(var h=0,i=r.cards.length?r.cards.length:1;h<i;)h++,this.positions.push(h)},setCardPosition(o){const e=o.target.value;this.copyToPos.position=e},setCardKeeps(){this.keepList.labels?this.cardToCopy.labels=JSON.parse(JSON.stringify(this.card.labels)):this.cardToCopy.labels=[],this.keepList.members?this.cardToCopy.members=JSON.parse(JSON.stringify(this.card.members)):this.cardToCopy.members=[],this.copyCard(),this.close()},copyCard(){this.$emit("cardCopySave",{cardCopy:this.cardToCopy,posCopy:this.copyToPos})}},emits:["actionsClose","cardCopySave"]},hi={class:"header-modal"},pi=t("p",null,"Copy card",-1),mi=t("p",{class:"header-second"},"Title",-1),gi={key:0},vi=t("p",{class:"header-second"},"Keep",-1),bi={class:"keep-list"},_i={key:0,class:"keep-checkbox"},Ci=S(" Labels "),fi={class:"length"},yi={key:1,class:"keep-checkbox"},ki=S(" Members "),wi={class:"length"},Ti=t("p",{class:"header-second"},"Copy to...",-1),Ei={class:"selects-box-main"},Bi={class:"select-box"},xi=t("label",{for:"group"},"List",-1),Oi=["value"],Si={class:"select-box"},Mi=t("label",{for:"position"},"Position",-1),Ai=["value"];function Di(o,e,r,h,i,s){const n=A("clickOutside");return _((l(),d("section",{style:b({top:s.setBottomPos(r.pos.bottom)+"px",left:r.pos.left+"px"}),class:"copy-modal-main"},[t("div",hi,[t("div",null,[pi,t("span",{class:"icon-sm icon-close",onClick:e[0]||(e[0]=u((...a)=>s.close&&s.close(...a),["stop","prevent"]))})])]),t("div",null,[mi,_(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=a=>i.cardToCopy.title=a),name:"copy-card",id:"copy-card"},null,512),[[O,i.cardToCopy.title]])]),r.card.labels.length||r.card.members.length?(l(),d("div",gi,[vi,t("div",bi,[r.card.labels.length?(l(),d("div",_i,[i.keepList.labels?c("",!0):(l(),d("div",{key:0,onClick:e[2]||(e[2]=u(a=>s.toggleCardKeep("labels"),["stop","prevent"])),class:"checkbox"})),i.keepList.labels?(l(),d("img",{key:1,onClick:e[3]||(e[3]=u(a=>s.toggleCardKeep("labels"),["stop","prevent"])),class:"done-img",src:"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23fff' viewBox='-3 -4 16 16'%3E%3Cpath d='M1.49 3.215a.667.667 0 0 0-.98.903l2.408 2.613c.358.351.892.351 1.223.02l.243-.239a1689.645 1689.645 0 0 0 2.625-2.589l.027-.026a328.23 328.23 0 0 0 2.439-2.429.667.667 0 1 0-.95-.936c-.469.476-1.314 1.316-2.426 2.417l-.027.026a1368.126 1368.126 0 0 1-2.517 2.482L1.49 3.215z'/%3E%3C/svg%3E"})):c("",!0),t("p",null,[Ci,t("span",fi,"("+g(r.card.labels.length)+")",1)])])):c("",!0),r.card.members.length?(l(),d("div",yi,[i.keepList.members?c("",!0):(l(),d("div",{key:0,onClick:e[4]||(e[4]=u(a=>s.toggleCardKeep("members"),["stop","prevent"])),class:"checkbox"})),i.keepList.members?(l(),d("img",{key:1,onClick:e[5]||(e[5]=u(a=>s.toggleCardKeep("members"),["stop","prevent"])),class:"done-img",src:"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23fff' viewBox='-3 -4 16 16'%3E%3Cpath d='M1.49 3.215a.667.667 0 0 0-.98.903l2.408 2.613c.358.351.892.351 1.223.02l.243-.239a1689.645 1689.645 0 0 0 2.625-2.589l.027-.026a328.23 328.23 0 0 0 2.439-2.429.667.667 0 1 0-.95-.936c-.469.476-1.314 1.316-2.426 2.417l-.027.026a1368.126 1368.126 0 0 1-2.517 2.482L1.49 3.215z'/%3E%3C/svg%3E"})):c("",!0),t("p",null,[ki,t("span",wi,"("+g(r.card.members.length)+")",1)])])):c("",!0)])])):c("",!0),t("div",null,[Ti,t("div",Ei,[t("div",Bi,[xi,t("select",{placeholder:"List",class:"select-board",onChange:e[6]||(e[6]=a=>s.setGroupPosition(a)),id:"group",name:"group"},[(l(!0),d(B,null,x(r.board.groups,a=>(l(),d("option",{selected:"selected",key:a.id,value:a.id},g(a.title),9,Oi))),128))],32)]),t("div",Si,[Mi,t("select",{id:"position",name:"position",placeholder:"Position",class:"select-pos-card",onChange:e[7]||(e[7]=a=>s.setCardPosition(a))},[(l(!0),d(B,null,x(i.positions,a=>(l(),d("option",{key:a,value:a},g(a),9,Ai))),128))],32)])])]),t("button",{onClick:e[8]||(e[8]=u((...a)=>s.setCardKeeps&&s.setCardKeeps(...a),["stop","prevent"]))},"Create card")],4)),[[n,s.close]])}var te=y(ui,[["render",Di]]);const Li={name:"card-preview",props:{board:{type:Object},group:{type:Object},card:{type:Object,required:!0},isLabelOpen:{type:Boolean}},components:{Container:le,Draggable:de,labelModal:$,membersModal:Y,datesModal:X,moment:G,coverModal:ee,deleteWarning:Q,copyModal:te},data(){return{currModal:null,isModalShown:!1,pos:0,posOfEditor:0,isLabelDark:!1,modalOpen:!1,titleIsOpen:!1,warningOpen:!1,warningTitle:"",groupToEdit:{},cardToDisplay:JSON.parse(JSON.stringify(this.card)),cardToEdit:{title:""},isActionsOpen:!1,activeComponent:null,isLabelClicked:!1,timeCalc:null}},created(){},methods:{setChecklistPreview(o){var e=JSON.parse(JSON.stringify(o)),r=0,h=[];return e.forEach(i=>r+=i.todos.length),e.forEach(i=>i.todos.forEach(s=>h.push(s))),h=h.filter(i=>i.isComplete),h.length+"/"+r},openThisModal(o,e){if(this.isModalShown===!0&&o===this.currModal)this.isModalShown=!1;else{const r=this.$refs[e].getBoundingClientRect();this.posOfEditor=JSON.parse(JSON.stringify(r)),this.posOfEditor.left-=5,this.posOfEditor.bottom-=4,this.isModalShown=!0,this.currModal=o}},openTitleEdit(){},editBoard(o){this.$emit("boardUpdated",o)},CopyNewCard(o){this.$emit("copyCardToGroup",o),this.closeModal()},changeTitle(o){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.cardToEdit.title=o,this.$emit("editCard",{card:this.cardToEdit,group:this.group}),this.titleIsOpen=!1},calcPosOfModal(){this.pos=this.$refs["card-modal"].getBoundingClientRect()},openMiniEdit(){this.pos=this.$refs["card-modal"].getBoundingClientRect(),this.cardToDisplay=JSON.parse(JSON.stringify(this.card)),this.$emit("toggleQuickEdit",{card:this.cardToDisplay,group:this.group,pos:this.pos})},openDetails(){this.modalOpen=!1,this.isModalShown=!1,this.$emit("openCard",{card:this.card,group:this.group})},openAllLabels(){this.isLabelClicked=!this.isLabelClicked,this.$emit("openAllLabels",this.isLabelClicked)},closeModal(){this.modalOpen=!1,this.isModalShown=!1,this.$emit("toggleQuickEdit")},deleteWarn(){this.posOfEditor=this.$refs.deleteBtn.getBoundingClientRect(),this.warningTitle="card",this.warningOpen=!0},closeWarning(){this.warningOpen=!1},deleteCard(){this.groupToEdit=JSON.parse(JSON.stringify(this.group));const o=this.groupToEdit.cards.findIndex(e=>e.id===this.card.id);this.groupToEdit.cards.splice(o,1),this.$emit("deleteCard",this.groupToEdit),this.modalOpen=!1},showEditedCard(o){this.cardToDisplay=o},saveCard(){this.$emit("editCard",{card:this.cardToDisplay,group:this.group}),this.isModalShown=!1,this.closeModal()},setMemberLetters(o){return o.split(" ").map(r=>r[0]).join("").toUpperCase()},closeMenu(){this.isModalShown=!1},onDateClicked(){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.cardToEdit.isComplete=!this.cardToEdit.isComplete,this.$emit("editCard",{card:this.cardToEdit,group:this.group})},darkenLabels(){this.isLabelDark=!0},lightenLabels(){this.isLabelDark=!1},lightenDarkenColor(o){if(o==="#61BD4F")return"#519839";if(o==="#F2D600")return"#d9b51c";if(o==="#FF9F1A")return"#cd8313";if(o==="#EB5A46")return"#b04632";if(o==="#C377E0")return"#89609e";if(o==="#0079BF")return"#055a8c";if(o==="#00C2E0")return"#0098b7";if(o==="#51E898")return"#4bbf6b";if(o==="#FF78CB")return"#c9558f";if(o==="#344563")return"#091e42"}},computed:{openLabels(){return{labelOpen:this.isLabelOpen}},setDateFormat(){const o=Date.now()-this.card.date;this.timeCalc=o;const e=new Date(this.card.date);return Intl.DateTimeFormat("en-Us",{month:"short",day:"numeric"}).format(e)},updateDateStyle(){return{dateUncompleted:!this.cardToDisplay.isComplete,dateCompleted:this.cardToDisplay.isComplete,datePast:this.timeCalc>0}}},emits:["copyCardToGroup","openCard","editCard","openAllLabels","deleteCard","boardUpdated","toggleQuickEdit"]},Ui={ref:"card-modal",class:"card-preview cursor-pointer flex"},Ni={key:0},Ii={class:"card-title"},Fi={key:1},Ji=["src"],Pi={key:2},Ri={key:3},Gi=["src"],ji={key:4,class:"card-preview-main"},Wi={key:0,class:"labels"},Vi={class:"card-title cursor-pointer"},zi={class:"card-bar"},Hi={class:"card-bar-icon"},Ki=t("span",{class:"icon-sm icon-clock-in-date"},null,-1),Zi={class:"date-txt"},qi={key:0,class:"attachments"},$i=t("span",{class:"icon-sm icon-attachment-pre"},null,-1),Yi={class:"attachments-length"},Xi={key:1,class:"description"},Qi=t("span",{class:"icon-sm icon-description"},null,-1),el=[Qi],tl={key:2,class:"comments"},sl=t("span",{class:"icon-sm icon-comments-pre"},null,-1),ol={class:"length"},rl={key:3,class:"checklists"},il=t("span",{class:"icon-sm icon-checklists-pre"},null,-1),ll={class:"nums"},dl={class:"card-bar-members"},al={key:0,class:"members"};function nl(o,e,r,h,i,s){return l(),d("section",{onClick:e[5]||(e[5]=u((...n)=>s.openDetails&&s.openDetails(...n),["stop","prevent"]))},[t("section",Ui,[r.card.cover.type==="color"&&r.card.cover.size==="large"?(l(),d("section",Ni,[t("div",{class:"card-cover-color-large cursor-pointer",style:b({backgroundColor:r.card.cover.value})},[t("div",Ii,[t("span",{style:b(r.card.cover.value==="#172B4D"?{color:"#FFFFFF"}:{color:"#172B4D"})},g(r.card.title),5)])],4)])):c("",!0),r.card.cover.type==="attachment"&&r.card.cover.size==="large"?(l(),d("section",Fi,[t("div",{class:"card-cover-attachment-large cursor-pointer",style:b({backgroundImage:"url("+r.card.cover.value+")"})},[t("img",{src:r.card.cover.value,style:{visibility:"hidden"}},null,8,Ji),t("div",{class:k({coverlight:r.card.cover.theme==="light",coverdark:r.card.cover.theme==="dark"})},null,2),t("div",{class:k(["card-title",{covertitlelight:r.card.cover.theme==="light",covertitledark:r.card.cover.theme==="dark"}])},[t("span",null,g(r.card.title),1)],2)],4)])):c("",!0),r.card.cover.type==="color"&&r.card.cover.size==="small"?(l(),d("section",Pi,[t("div",{class:"card-cover-color-small",style:b({backgroundColor:r.card.cover.value})},null,4)])):c("",!0),r.card.cover.type==="attachment"&&r.card.cover.size==="small"?(l(),d("section",Ri,[t("div",{class:"card-cover-attachment-small",style:b({backgroundImage:"url("+r.card.cover.value+")"})},[t("img",{src:r.card.cover.value,style:{visibility:"hidden"}},null,8,Gi)],4)])):c("",!0),t("button",{class:"icon-sm icon-edit",onClick:e[0]||(e[0]=u(n=>s.openMiniEdit(n),["stop","prevent"]))}),r.card.cover.size!=="large"?(l(),d("section",ji,[r.card.labels.length&&r.board.labels.length?(l(),d("div",Wi,[(l(!0),d(B,null,x(r.card.labels,n=>(l(),d("div",{key:n,class:k(["label",s.openLabels]),onMouseover:e[1]||(e[1]=(...a)=>s.darkenLabels&&s.darkenLabels(...a)),onMouseleave:e[2]||(e[2]=(...a)=>s.lightenLabels&&s.lightenLabels(...a)),onClick:e[3]||(e[3]=u((...a)=>s.openAllLabels&&s.openAllLabels(...a),["stop","prevent"])),style:b(i.isLabelDark?{backgroundColor:s.lightenDarkenColor(r.board.labels[r.board.labels.findIndex(a=>a.id===n)].color)}:{backgroundColor:r.board.labels[r.board.labels.findIndex(a=>a.id===n)].color})},g(r.board.labels[r.board.labels.findIndex(a=>a.id===n)].title),39))),128))])):c("",!0),t("div",null,[t("p",Vi,g(r.card.title),1)]),t("div",zi,[t("div",Hi,[r.card.date?(l(),d("div",{key:0,class:k(["date",s.updateDateStyle]),onClick:e[4]||(e[4]=u((...n)=>s.onDateClicked&&s.onDateClicked(...n),["stop","prevent"]))},[Ki,t("span",Zi,g(s.setDateFormat),1)],2)):c("",!0)]),r.card.attachments.length?(l(),d("div",qi,[$i,t("span",Yi,g(r.card.attachments.length),1)])):c("",!0),r.card.description?(l(),d("div",Xi,el)):c("",!0),r.card.comments.length?(l(),d("div",tl,[sl,t("span",ol,g(r.card.comments.length),1)])):c("",!0),r.card.checklists.length?(l(),d("div",rl,[il,t("span",ll,g(s.setChecklistPreview(r.card.checklists)),1)])):c("",!0),t("div",dl,[r.card.members.length&&r.board.members.length?(l(),d("div",al,[(l(!0),d(B,null,x(r.card.members,n=>(l(),d("div",{class:"member-in-card",key:n._id},g(s.setMemberLetters(n.fullname)),1))),128))])):c("",!0)])])])):c("",!0)],512)])}var cl=y(Li,[["render",nl]]);const ul={props:{id:{type:String}},methods:{closeModal(){this.$emit("close")},removeList(o){this.$emit("remove",o)}}},hl={class:"group-edit-modal"},pl={class:"group-modal-header"},ml=t("div",{class:"header-text-group-modal"},[t("h1",null,"List actions")],-1),gl=t("svg",{width:"10",height:"10",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.58579 7L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683418 0.292893 0.292893C0.683418 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L7 5.58579L12.2929 0.292893C12.6834 -0.0976311 13.3166 -0.0976311 13.7071 0.292893C14.0976 0.683418 14.0976 1.31658 13.7071 1.70711L8.41421 7L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L7 8.41421L1.70711 13.7071C1.31658 14.0976 0.683418 14.0976 0.292893 13.7071C-0.0976311 13.3166 -0.0976311 12.6834 0.292893 12.2929L5.58579 7Z",fill:"currentColor"})],-1),vl=[gl],bl={class:"group-modal-actions-list"};function _l(o,e,r,h,i,s){return l(),d("div",hl,[t("div",pl,[ml,t("div",{class:"header-close-edit-group-modal",onClick:e[0]||(e[0]=(...n)=>s.closeModal&&s.closeModal(...n))},vl)]),t("div",bl,[t("div",{class:"group-modal-action",onClick:e[1]||(e[1]=n=>s.removeList(r.id))},"Remove this list")])])}var Cl=y(ul,[["render",_l]]);const fl={name:"toggle-input",props:{id:{type:String},title:{type:String}},data(){return{txt:"",titleIsOpen:!1,openGroupEdit:!1,pos:0,boardToEdit:null}},created(){this.txt=this.title},methods:{openTitleEdit(){this.titleIsOpen=!0},change(){!this.txt||(this.titleIsOpen=!1,this.$emit("titleChange",{txt:this.txt,id:this.id}))},openEditGroupModal(){this.openGroupEdit=!0},closeEditMode(){this.openGroupEdit=!1},removeGroup(o){this.$emit("groupDelete",o),this.closeEditMode()},calcPosOfBox(){this.pos=this.$refs.box.getBoundingClientRect()}},components:{groupEdit:Cl},emits:["titleChange","groupDelete"]},yl={class:"toggle-input"};function kl(o,e,r,h,i,s){const n=w("group-edit"),a=A("focus"),C=A("clickOutside");return l(),d("section",yl,[i.titleIsOpen?c("",!0):(l(),d("p",{key:0,class:"group-title cursor-pointer",onClick:e[0]||(e[0]=u((...v)=>s.openTitleEdit&&s.openTitleEdit(...v),["stop","prevent"]))},g(i.txt),1)),i.titleIsOpen?_((l(),d("input",{key:1,"onUpdate:modelValue":e[1]||(e[1]=v=>i.txt=v),type:"text",onSubmit:e[2]||(e[2]=u((...v)=>s.change&&s.change(...v),["prevent"]))},null,544)),[[a],[C,s.change],[O,i.txt]]):c("",!0),t("span",{onClick:e[3]||(e[3]=u(v=>(s.calcPosOfBox(),s.openEditGroupModal()),["stop","prevent"])),ref:"box",class:"icon-sm icon-overflow-menu-horizontal"},null,512),i.openGroupEdit?_((l(),E(n,{key:2,style:b({top:"138px",left:i.pos.left+"px"}),onClose:s.closeEditMode,id:r.id,onRemove:s.removeGroup},null,8,["style","onClose","id","onRemove"])),[[C,s.closeEditMode]]):c("",!0)])}var wl=y(fl,[["render",kl]]);const Tl={name:"group-list",components:{cardPreview:cl,toggleInputCmp:wl,Container:le,Draggable:de,labelModal:$,membersModal:Y,datesModal:X,coverModal:ee,deleteWarning:Q,copyModal:te},props:{groups:{type:Array},newGroup:{type:Object},board:{type:Object,required:!0}},data(){return{show:!1,groupToDisplay:{title:""},groupToEdit:null,titleIsOpen:!1,isLabelOpen:!1,isQuickEditOpen:!1,currModal:null,isModalShown:!1,pos:0,posOfEditor:0,isLabelDark:!1,modalOpen:!1,titleIsOpen:!1,warningOpen:!1,warningTitle:"",groupToEdit:{},cardToDisplay:{},cardToEdit:{title:""},timeCalc:null,newCard:{},isAddingCard:!1}},created(){},computed:{boardToEdit(){return JSON.parse(JSON.stringify(this.board))},pointerEvents(){return this.isQuickEditOpen},setDateFormat(){const o=Date.now()-this.cardToDisplay.date;this.timeCalc=o;const e=new Date(this.cardToDisplay.date);return Intl.DateTimeFormat("en-Us",{month:"short",day:"numeric"}).format(e)},updateDateStyle(){return{dateUncompleted:!this.cardToDisplay.isComplete,dateCompleted:this.cardToDisplay.isComplete,datePast:this.timeCalc>0}}},methods:{openCardAdder(o){this.newCard.id||(this.newCard=M.getEmptyCard()),this.groupToEdit=JSON.parse(JSON.stringify(o)),this.isAddingCard=!0},saveNewCard(o){this.newCard.title!==""&&(console.log(this.newCard.title),this.groupToEdit=JSON.parse(JSON.stringify(o)),this.groupToEdit.cards.push(this.newCard),this.$emit("groupUpdated",this.groupToEdit),this.newCard=M.getEmptyCard())},saveNewCardAndClose(){if(this.newCard.title===""){this.isAddingCard=!1;return}this.groupToEdit.cards.push(this.newCard),this.$emit("groupUpdated",this.groupToEdit),this.newCard=M.getEmptyCard(),this.isAddingCard=!1},closeAddACard(){this.isAddingCard=!1},setChecklistPreview(o){var e=JSON.parse(JSON.stringify(o)),r=0,h=[];return e.forEach(i=>r+=i.todos.length),e.forEach(i=>i.todos.forEach(s=>h.push(s))),h=h.filter(i=>i.isComplete),console.log("completedTodos",h),console.log("completed length",h.length),h.length+"/"+r},openThisModal(o,e){if(this.isModalShown===!0&&o===this.currModal)this.isModalShown=!1;else{const r=this.$refs[e].getBoundingClientRect();this.posOfEditor=JSON.parse(JSON.stringify(r)),this.posOfEditor.left-=5,this.posOfEditor.bottom-=4,this.isModalShown=!0,this.currModal=o}},CopyNewCard(o){this.$emit("saveCopy",o),this.closeModal()},calcPosOfModal(){this.pos=this.$refs["card-modal"].getBoundingClientRect()},openMiniEdit({card:o,group:e,pos:r}){this.cardToDisplay=o,this.groupToEdit=e,this.pos=r,this.modalOpen=!0},closeModal(){this.modalOpen=!1,this.isModalShown=!1},deleteWarn(){this.posOfEditor=this.$refs.deleteBtn.getBoundingClientRect(),this.warningTitle="card",this.warningOpen=!0},closeWarning(){this.warningOpen=!1},deleteCard(){this.groupToEdit=JSON.parse(JSON.stringify(this.groupToEdit));const o=this.groupToEdit.cards.findIndex(e=>e.id===this.cardToDisplay.id);this.groupToEdit.cards.splice(o,1),this.$emit("groupUpdated",this.groupToEdit),this.warningOpen=!1,this.modalOpen=!1},showEditedCard(o){this.cardToDisplay=o},setMemberLetters(o){return o.split(" ").map(r=>r[0]).join("").toUpperCase()},closeMenu(){this.isModalShown=!1},modCard({card:o,group:e}){this.groupToEdit=JSON.parse(JSON.stringify(e));const r=this.groupToEdit.cards.findIndex(h=>h.id===o.id);this.groupToEdit.cards[r]=o,this.$emit("groupUpdated",this.groupToEdit)},changeTitle({txt:o,id:e}){this.groupToEdit=JSON.parse(JSON.stringify(this.groups.find(r=>r.id===e))),this.groupToEdit.title=o,this.$emit("groupUpdated",this.groupToEdit),this.groupToEdit=null,this.titleIsOpen=!1},modifyBoard(o){this.$emit("boardModified",o)},addNewCard({newCard:o,group:e}){this.groupToEdit=JSON.parse(JSON.stringify(this.groups.find(r=>r.id===e.id))),this.groupToEdit.cards.push(o),this.$emit("groupUpdated",this.groupToEdit),this.groupToEdit=null},cardDelete(o){this.$emit("groupUpdated",o)},openCardModal(){this.isQuickEditOpen=!1,this.modalOpen=!1,this.isModalShown=!1,this.$emit("openCardDetails",{card:this.cardToDisplay,group:this.groupToEdit})},openCardModalFromPreview({card:o,group:e}){this.isQuickEditOpen=!1,this.modalOpen=!1,this.isModalShown=!1,this.$emit("openCardDetails",{card:o,group:e})},onOpenAllLabels(o){this.isLabelOpen=o},saveCard(){const o=this.groupToEdit.cards.findIndex(e=>e.id===this.cardToDisplay.id);this.groupToEdit=JSON.parse(JSON.stringify(this.groupToEdit)),this.groupToEdit.cards.splice(o,1,this.cardToDisplay),this.$emit("groupUpdated",this.groupToEdit),this.isModalShown=!1,this.closeModal()},deleteGroup(o){this.$emit("removeGroup",o)},close(){this.show=!1,this.newGroup.title=""},addNewGroup(){this.$emit("addGroup",this.newGroup)},onGroupDrop(o){this.boardToEdit.groups=ie(this.boardToEdit.groups,o),this.$emit("groupDnd",this.boardToEdit)},onCardDrop(o,e){if(e.removedIndex!==null||e.addedIndex!==null){const r=this.boardToEdit.groups.filter(s=>s.id===o)[0],h=this.boardToEdit.groups.indexOf(r),i=JSON.parse(JSON.stringify(r));i.cards=ie(i.cards,e),this.boardToEdit.groups.splice(h,1,i),this.$emit("groupDnd",this.boardToEdit)}},getCardPayload(o){return e=>this.boardToEdit.groups.filter(r=>r.id===o)[0].cards[e]},log(...o){}},emits:["boardUpdated","saveCopy","activitySave","openCardDetails","removeGroup","groupUpdated","addGroup","groupDnd","boardModified"]},El={class:"group-preview"},Bl={key:0,class:"add-new-card-input"},xl={class:"txt-box"},Ol=["onKeydown"],Sl={class:"add-card-cmp"},Ml=["onClick"],Al=t("span",{class:"icon-sm icon-add-gray"},null,-1),Dl=t("p",null,"Add a card",-1),Ll=[Al,Dl],Ul={key:1,class:"btn-card-add"},Nl=t("span",{class:"icon-sm icon-add-light"},null,-1),Il=S("Add another list "),Fl=[Nl,Il],Jl={key:1,class:"add-new-group-in"},Pl={class:"controls-add-list"},Rl=["src"],Gl={class:"modal-card-main"},jl={key:0,class:"labels"},Wl={class:"card-bar"},Vl={class:"card-bar-icon"},zl=t("span",{class:"icon-sm icon-clock-in-date"},null,-1),Hl={class:"date-txt"},Kl={key:0,class:"attachments"},Zl=t("span",{class:"icon-sm icon-attachment-pre"},null,-1),ql={class:"attachments-length"},$l={key:1,class:"description"},Yl=t("span",{class:"icon-sm icon-description"},null,-1),Xl=[Yl],Ql={key:2,class:"comments"},ed=t("span",{class:"icon-sm icon-comments-pre"},null,-1),td={class:"length"},sd={key:3,class:"checklists"},od=t("span",{class:"icon-sm icon-checklists-pre"},null,-1),rd={class:"nums"},id={class:"card-bar-members"},ld={key:0,class:"members"},dd=t("span",{class:"icon-sm icon-card-pen"},null,-1),ad=t("p",null,"Open card",-1),nd=[dd,ad],cd=t("span",{class:"icon-sm icon-label-pen"},null,-1),ud=t("p",null,"Edit labels",-1),hd=[cd,ud],pd=t("span",{class:"icon-sm icon-member-pen"},null,-1),md=t("p",null,"Change members",-1),gd=[pd,md],vd=t("span",{class:"icon-sm icon-card-cover-pen"},null,-1),bd=t("p",null,"Change cover",-1),_d=[vd,bd],Cd=t("span",{class:"icon-sm icon-card-copy-pen"},null,-1),fd=t("p",null,"Copy",-1),yd=[Cd,fd],kd=t("span",{class:"icon-sm icon-clock-pen"},null,-1),wd=t("p",null,"Edit dates",-1),Td=[kd,wd],Ed=t("span",{class:"icon-sm icon-delete-pen"},null,-1),Bd=t("p",null,"Delete",-1),xd=[Ed,Bd],Od={key:1};function Sd(o,e,r,h,i,s){const n=w("toggle-input-cmp"),a=w("card-preview"),C=w("Draggable"),v=w("Container"),T=w("delete-warning"),L=A("focus"),p=A("clickOutside");return l(),d("section",null,[D(v,{class:"group-list-main scroll-groups",orientation:"horizontal",onDrop:e[10]||(e[10]=m=>s.onGroupDrop(m)),"drag-handle-selector":".group-preview-main"},{default:F(()=>[(l(!0),d(B,null,x(r.board.groups,m=>(l(),E(C,{key:m,class:"group-preview-main cursor-pointer","drag-class":"tilt"},{default:F(()=>[t("div",null,[t("div",El,[D(n,{class:"title",onGroupDelete:s.deleteGroup,onTitleChange:s.changeTitle,title:m.title,id:m.id},null,8,["onGroupDelete","onTitleChange","title","id"]),D(v,{class:"scroller-group","drag-class":"tilt","group-name":"col",orientation:"vertical","get-child-payload":s.getCardPayload(m.id),onDragStart:e[1]||(e[1]=f=>s.log("drag start",f)),onDragEnd:e[2]||(e[2]=f=>s.log("drag end",f)),onDrop:f=>s.onCardDrop(m.id,f)},{default:F(()=>[(l(!0),d(B,null,x(m.cards,f=>(l(),E(C,{key:f.id},{default:F(()=>[D(a,{onCopyCardToGroup:s.CopyNewCard,onToggleQuickEdit:s.openMiniEdit,onBoardUpdated:s.modifyBoard,onDeleteCard:s.cardDelete,onEditCard:s.modCard,onOpenCard:s.openCardModalFromPreview,onOpenAllLabels:s.onOpenAllLabels,group:m,card:f,board:r.board,isLabelOpen:i.isLabelOpen},null,8,["onCopyCardToGroup","onToggleQuickEdit","onBoardUpdated","onDeleteCard","onEditCard","onOpenCard","onOpenAllLabels","group","card","board","isLabelOpen"])]),_:2},1024))),128)),i.isAddingCard&&i.groupToEdit.id===m.id?_((l(),d("div",Bl,[t("div",xl,[_(t("textarea",{onKeydown:J(u(f=>s.saveNewCard(m),["stop","prevent"]),["enter"]),placeholder:"Enter a title for this card...",type:"text","onUpdate:modelValue":e[0]||(e[0]=f=>i.newCard.title=f)},null,40,Ol),[[L],[O,i.newCard.title]])])])),[[p,s.saveNewCardAndClose]]):c("",!0)]),_:2},1032,["get-child-payload","onDrop"]),t("section",Sl,[!i.isAddingCard||i.groupToEdit.id!==m.id?(l(),d("button",{key:0,class:"btn-add-card-out",onClick:u(f=>s.openCardAdder(m),["stop","prevent"])},Ll,8,Ml)):c("",!0),i.isAddingCard&&i.groupToEdit.id===m.id?(l(),d("div",Ul,[t("button",{type:"button",class:"btn-add-card-in",onClick:e[3]||(e[3]=u((...f)=>s.saveNewCardAndClose&&s.saveNewCardAndClose(...f),["stop","prevent"]))},"Add card"),t("span",{type:"button",class:"icon-lg icon-close-close",onClick:e[4]||(e[4]=u((...f)=>o.closeAdder&&o.closeAdder(...f),["stop","prevent"]))})])):c("",!0)])])])]),_:2},1024))),128)),t("div",{class:"add-new-group",style:b(i.show?{height:"100px"}:null)},[i.show?c("",!0):(l(),d("button",{key:0,class:"add-another-list-btn",onClick:e[5]||(e[5]=m=>i.show=!0)},Fl)),i.show?_((l(),d("div",Jl,[_(t("textarea",{onKeyup:e[6]||(e[6]=J((...m)=>s.addNewGroup&&s.addNewGroup(...m),["enter"])),placeholder:"Enter list title...",type:"text","onUpdate:modelValue":e[7]||(e[7]=m=>r.newGroup.title=m)},null,544),[[O,r.newGroup.title]]),t("div",Pl,[t("button",{class:"btn-add-card-in",onClick:e[8]||(e[8]=(...m)=>s.addNewGroup&&s.addNewGroup(...m))},"Add List"),t("span",{class:"icon-lg icon-close-close",onClick:e[9]||(e[9]=m=>i.show=!1)})])])),[[p,s.close]]):c("",!0)],4)]),_:1}),i.modalOpen?(l(),d("section",{key:0,onClick:e[28]||(e[28]=u((...m)=>s.closeModal&&s.closeModal(...m),["stop","prevent"])),class:"mini-edit-modal-main flex"},[t("span",{class:"icon-xl icon-close-in-pencil-modal",onClick:e[11]||(e[11]=u((...m)=>s.closeModal&&s.closeModal(...m),["stop","prevent"]))}),t("section",{onClick:e[25]||(e[25]=u(()=>{},["prevent","stop"])),class:"mini-edit-modal-second",style:b([{position:"fixed"},{top:i.pos.top+"px",left:i.pos.left+"px"}])},[t("section",{class:"modal-edit",onClick:e[16]||(e[16]=u(()=>{},["prevent","stop"]))},[t("div",{class:"modal-card",onClick:e[14]||(e[14]=u(()=>{},["prevent","stop"]))},[i.cardToDisplay.cover.type==="color"?(l(),d("div",{key:0,class:"mini-edit-cover-color",style:b({backgroundColor:i.cardToDisplay.cover.value})},null,4)):c("",!0),i.cardToDisplay.cover.type==="attachment"?(l(),d("div",{key:1,class:"mini-edit-cover-attach",style:b({backgroundImage:"url("+i.cardToDisplay.cover.value+")"})},[t("img",{src:i.cardToDisplay.cover.value,style:{visibility:"hidden"}},null,8,Rl)],4)):c("",!0),t("div",Gl,[i.cardToDisplay.labels.length&&i.cardToDisplay.labels.length?(l(),d("div",jl,[(l(!0),d(B,null,x(i.cardToDisplay.labels,m=>(l(),d("div",{class:"label",key:m,style:b({backgroundColor:r.board.labels[r.board.labels.findIndex(f=>f.id===m)].color})},g(r.board.labels[r.board.labels.findIndex(f=>f.id===m)].title),5))),128))])):c("",!0),t("div",null,[_(t("textarea",{name:"mini-edit-ta",style:{resize:"none"},"onUpdate:modelValue":e[12]||(e[12]=m=>i.cardToDisplay.title=m)},null,512),[[O,i.cardToDisplay.title]])]),t("div",Wl,[t("div",Vl,[i.cardToDisplay.date?(l(),d("div",{key:0,class:k(["date",s.updateDateStyle]),onClick:e[13]||(e[13]=u((...m)=>o.onDateClicked&&o.onDateClicked(...m),["stop","prevent"]))},[zl,t("span",Hl,g(s.setDateFormat),1)],2)):c("",!0)]),i.cardToDisplay.attachments.length?(l(),d("div",Kl,[Zl,t("span",ql,g(i.cardToDisplay.attachments.length),1)])):c("",!0),i.cardToDisplay.description?(l(),d("div",$l,Xl)):c("",!0),i.cardToDisplay.comments.length?(l(),d("div",Ql,[ed,t("span",td,g(i.cardToDisplay.comments.length),1)])):c("",!0),i.cardToDisplay.checklists.length?(l(),d("div",sd,[od,t("span",rd,g(s.setChecklistPreview(i.cardToDisplay.checklists)),1)])):c("",!0),t("div",id,[i.cardToDisplay.members.length&&r.board.members.length?(l(),d("div",ld,[(l(!0),d(B,null,x(i.cardToDisplay.members,m=>(l(),d("div",{class:"member",key:m._id},g(s.setMemberLetters(m.fullname)),1))),128))])):c("",!0)])])])]),t("div",null,[t("button",{class:"mini-edit-save",onClick:e[15]||(e[15]=u((...m)=>s.saveCard&&s.saveCard(...m),["stop","prevent"]))},"Save")])]),t("section",{class:"modal-actions-btns",onClick:e[24]||(e[24]=u(()=>{},["prevent","stop"]))},[t("button",{onClick:e[17]||(e[17]=u((...m)=>s.openCardModal&&s.openCardModal(...m),["stop","prevent"]))},nd),t("button",{type:"button",ref:"labelBtn",onClick:e[18]||(e[18]=u(m=>s.openThisModal("labelModal","labelBtn"),["stop","prevent"]))},hd,512),t("button",{type:"button",ref:"membersBtn",onClick:e[19]||(e[19]=u(m=>s.openThisModal("membersModal","membersBtn"),["stop","prevent"]))},gd,512),t("button",{type:"button",ref:"coverBtn",onClick:e[20]||(e[20]=u(m=>s.openThisModal("coverModal","coverBtn"),["stop","prevent"]))},_d,512),t("button",{type:"button",ref:"copyBtn",onClick:e[21]||(e[21]=u(m=>s.openThisModal("copyModal","copyBtn"),["stop","prevent"]))},yd,512),t("button",{ref:"datesBtn",onClick:e[22]||(e[22]=u(m=>s.openThisModal("datesModal","datesBtn"),["stop","prevent"]))},Td,512),t("button",{ref:"deleteBtn",onClick:e[23]||(e[23]=u((...m)=>s.deleteWarn&&s.deleteWarn(...m),["stop","prevent"]))},xd,512)])],4),i.warningOpen?(l(),E(T,{key:0,onClick:e[26]||(e[26]=u(()=>{},["prevent","stop"])),onCloseDeleteWarning:s.closeWarning,onDeleteConfirmed:s.deleteCard,title:i.warningTitle,pos:i.posOfEditor},null,8,["onCloseDeleteWarning","onDeleteConfirmed","title","pos"])):c("",!0),i.isModalShown?(l(),d("section",Od,[(l(),E(ae(i.currModal),{onClick:e[27]||(e[27]=u(()=>{},["prevent","stop"])),onCardCopySave:s.CopyNewCard,onBoardEdit:s.modifyBoard,onCardEdit:s.showEditedCard,onActionsClose:s.closeMenu,board:r.board,card:i.cardToDisplay,group:i.groupToEdit,pos:i.posOfEditor},null,8,["onCardCopySave","onBoardEdit","onCardEdit","onActionsClose","board","card","group","pos"]))])):c("",!0)])):c("",!0)])}var Md=y(Tl,[["render",Sd]]);const Ad={props:{board:Object},data(){return{menuBackground:!1,showMenuBgc:!1,showMenuBgcRegular:!1,showMenuBgcImg:!1,searchInput:"",unsplashSearch:"background",unsplashOpen:!0}},created(){},methods:{generateTime(o){return G(o).fromNow()},closeModal(){this.$emit("close")},closeBgcBar(){this.showMenuBgc=!1},openBgcBar(){this.showMenuBgc=!0},closeBgcBarRegular(){this.showMenuBgcRegular=!1},openBgcBarRegular(){this.showMenuBgcRegular=!0},closeBgcBarImg(){this.showMenuBgcImg=!1},openBgcBarImg(){this.showMenuBgcImg=!0},setColor(o){this.$emit("changeBgcColor",o)},async updateSearchinput(){this.unsplashOpen=!this.unsplashOpen,this.unsplashOpen=await!this.unsplashOpen,this.unsplashSearch=this.searchInput},updateBgc(o){console.log("photo:",o),this.$emit("changeBgcPhoto",o)},setMemberLetters(o){return o.split(" ").map(r=>r[0]).join("").toUpperCase()}},computed:{},components:{unsplash:ue,moment:G},emits:["changeBgcPhoto","changeBgcColor"]},Dd={class:"side-bar-menu-main"},Ld={key:0,class:"side-bar-menu-start"},Ud={class:"side-bar-menu-header"},Nd=t("div",{class:"side-bar-menu-header-text"},[t("h3",null,"Menu")],-1),Id=t("span",{class:"icon-md icon-closed"},null,-1),Fd=[Id],Jd=t("hr",null,null,-1),Pd={class:"side-bar-menu-container flex"},Rd=t("hr",null,null,-1),Gd={class:"side-bar-menu-activity-container"},jd=t("div",{class:"activity-header flex"},[t("span",{class:"icon-sm icon-activity"}),t("h1",null,"Activity")],-1),Wd={class:"member-avatar-in-activity"},Vd={class:"activity-info"},zd={class:"activities-info-txt flex"},Hd={class:"activity-timestamp"},Kd={key:0,class:"side-bar-menu-background"},Zd={class:"side-bar-menu-header-background"},qd=t("div",{class:"side-bar-menu-header-text-background"},[t("h3",null,"Change background")],-1),$d=t("span",{class:"icon-md icon-closed"},null,-1),Yd=[$d],Xd=t("hr",null,null,-1),Qd={class:"side-bar-menu-background-container flex"},ea={class:"bgc-photos"},ta=t("p",null,"Photos",-1),sa={class:"regular-bgc-color"},oa=t("p",null,"Colors",-1),ra={key:0,class:"side-bar-menu-background-regular"},ia={class:"side-bar-menu-header-background-regular"},la=t("div",{class:"side-bar-menu-header-text-background-regular"},[t("h3",null,"Colors")],-1),da=t("span",{class:"icon-md icon-closed"},null,-1),aa=[da],na=t("hr",null,null,-1),ca={class:"side-bar-menu-background-container-regular flex"},ua={key:0,class:"side-bar-menu-background-img"},ha={class:"side-bar-menu-header-background-img flex"},pa=t("div",{class:"side-bar-menu-header-text-background-img"},[t("h3",null,[S(" Photos by "),t("a",{target:"_blank",href:"https://unsplash.com/?utm_source=trello&utm_medium=referral&utm_campaign=api-credit"},"Unsplash")])],-1),ma=t("span",{class:"icon-md icon-closed"},null,-1),ga=[ma],va=t("hr",null,null,-1),ba={tabindex:"0",class:"search-unsplash"},_a=t("span",{class:"icon-sm icon-search"},null,-1),Ca={class:"side-bar-menu-background-container-img flex"};function fa(o,e,r,h,i,s){const n=w("unsplash");return l(),d("section",Dd,[!i.showMenuBgc&&!i.showMenuBgcRegular&&!i.showMenuBgcImg?(l(),d("section",Ld,[t("div",Ud,[Nd,t("div",{class:"header-close-side-bar-menu",onClick:e[0]||(e[0]=(...a)=>s.closeModal&&s.closeModal(...a))},Fd)]),Jd,t("div",Pd,[t("div",{style:b(r.board.background?{backgroundColor:r.board.background}:{"background-image":`url(${r.board.backgroundThumb})`}),class:"board-background"},null,4),t("p",{onClick:e[1]||(e[1]=(...a)=>s.openBgcBar&&s.openBgcBar(...a))},"Change background")]),Rd,t("div",Gd,[jd,(l(!0),d(B,null,x(r.board.activities,a=>(l(),d("div",{class:"activities-render flex",key:a},[t("div",Wd,g(s.setMemberLetters(a.byMember.fullname)),1),t("div",Vd,[t("div",zd,[t("p",null,[t("span",null,g(a.byMember.username),1),S(" "+g(a.txt),1)])]),t("div",Hd,g(s.generateTime(a.createdAt)),1)])]))),128))])])):c("",!0),D(V,{name:"slide"},{default:F(()=>[i.showMenuBgc&&!i.showMenuBgcRegular&&!i.showMenuBgcImg?(l(),d("section",Kd,[t("div",Zd,[t("span",{onClick:e[2]||(e[2]=(...a)=>s.closeBgcBar&&s.closeBgcBar(...a)),class:"icon-md icon-back"}),qd,t("div",{class:"header-close-background-boards-modal",onClick:e[3]||(e[3]=(...a)=>s.closeModal&&s.closeModal(...a))},Yd)]),Xd,t("div",Qd,[t("div",ea,[t("img",{onClick:e[4]||(e[4]=(...a)=>s.openBgcBarImg&&s.openBgcBarImg(...a)),src:"https://a.trellocdn.com/prgb/dist/images/photos-thumbnail@3x.8f9c1323c9c16601a9a4.jpg",alt:""}),ta]),t("div",sa,[t("img",{onClick:e[5]||(e[5]=(...a)=>s.openBgcBarRegular&&s.openBgcBarRegular(...a)),src:"https://a.trellocdn.com/prgb/dist/images/colors@2x.ec32a2ed8dd8198b8ef0.jpg",alt:""}),oa])])])):c("",!0)]),_:1}),D(V,{name:"slide"},{default:F(()=>[i.showMenuBgcRegular&&!i.showMenuBgcImg?(l(),d("section",ra,[t("div",ia,[t("span",{onClick:e[6]||(e[6]=(...a)=>s.closeBgcBarRegular&&s.closeBgcBarRegular(...a)),class:"icon-md icon-back"}),la,t("div",{class:"header-close-img-boards-modal",onClick:e[7]||(e[7]=(...a)=>s.closeModal&&s.closeModal(...a))},aa)]),na,t("div",ca,[t("div",{onClick:e[8]||(e[8]=a=>s.setColor("#0079BF")),class:"color-menu blue"}),t("div",{onClick:e[9]||(e[9]=a=>s.setColor("#D29034")),class:"color-menu yellow"}),t("div",{onClick:e[10]||(e[10]=a=>s.setColor("#519839")),class:"color-menu green"}),t("div",{onClick:e[11]||(e[11]=a=>s.setColor("#B04632")),class:"color-menu red"}),t("div",{onClick:e[12]||(e[12]=a=>s.setColor("#89609E")),class:"color-menu purple"}),t("div",{onClick:e[13]||(e[13]=a=>s.setColor("#CD5A91")),class:"color-menu pink"}),t("div",{onClick:e[14]||(e[14]=a=>s.setColor("#4BBF6B")),class:"color-menu light-green"}),t("div",{onClick:e[15]||(e[15]=a=>s.setColor("#00AECC")),class:"color-menu light-blue"}),t("div",{onClick:e[16]||(e[16]=a=>s.setColor("#838C91")),class:"color-menu grey"})])])):c("",!0)]),_:1}),D(V,{name:"slide"},{default:F(()=>[i.showMenuBgcImg?(l(),d("section",ua,[t("div",ha,[t("span",{onClick:e[17]||(e[17]=(...a)=>s.closeBgcBarImg&&s.closeBgcBarImg(...a)),class:"icon-md icon-back"}),pa,t("div",{class:"header-close-img-boards-modal",onClick:e[18]||(e[18]=(...a)=>s.closeModal&&s.closeModal(...a))},ga)]),va,t("div",ba,[_a,_(t("input",{"onUpdate:modelValue":e[19]||(e[19]=a=>i.searchInput=a),onKeyup:e[20]||(e[20]=J((...a)=>s.updateSearchinput&&s.updateSearchinput(...a),["enter"])),placeholder:"Photos",type:"text"},null,544),[[O,i.searchInput]])]),t("div",Ca,[i.unsplashOpen?(l(),E(n,{key:0,searchInput:i.unsplashSearch,onChangeBgc:s.updateBgc},null,8,["searchInput","onChangeBgc"])):c("",!0)])])):c("",!0)]),_:1})])}var ya=y(Ad,[["render",fa]]);const ka={props:{currUser:{type:Object,required:!0}},methods:{closeModal(){this.$emit("close")},removeMember(o){this.$emit("remove",o)}},computed:{starredBoards(){return this.$store.getters.starredBoards}}},wa={class:"starred-boards-modal"},Ta={class:"starred-boards-header"},Ea=t("div",{class:"header-text-starred-boards-modal"},[t("h1",null,"Remove from board...")],-1),Ba=t("span",{class:"icon-sm icon-closed"},null,-1),xa=[Ba],Oa={class:"remove-member-info"},Sa=S(" will be removed from all cards on this board. They will recieve a notification. ");function Ma(o,e,r,h,i,s){return l(),d("div",wa,[t("div",Ta,[Ea,t("div",{class:"header-close-starred-boards-modal",onClick:e[0]||(e[0]=(...n)=>s.closeModal&&s.closeModal(...n))},xa)]),t("div",Oa,[t("p",null,[t("span",null,g(r.currUser.fullname),1),Sa]),t("button",{onClick:e[1]||(e[1]=n=>s.removeMember(r.currUser))},"Remove member")])])}var Aa=y(ka,[["render",Ma]]);const Da={props:{board:Object},data(){return{isStarred:!1,titleIsOpen:!1,titleLength:0,title:"",showMenu:!1,removeUser:!1,filterByName:null,pos:0,currUser:""}},created(){this.$store.dispatch({type:"loadUsers"})},methods:{setUser(o){this.currUser=o},calcPosOfBox(){this.pos=this.$refs.user[0].getBoundingClientRect()},boardStared(){this.isStarred=!this.isStarred,this.$emit("starredChange",this.isStarred)},openTitleEdit(){this.titleIsOpen=!0,this.title=this.board.title,this.calculateTxtLen()},changeTitle(){!this.title||(this.$emit("titleChange",this.title),this.titleIsOpen=!1)},calculateTxtLen(){this.titleLength=this.title.length},closeMenuBar(){this.showMenu=!1},openMenuBar(){this.showMenu=!0},closeRemoveUser(){this.removeUser=!1},openRemoveUser(){this.removeUser=!0},changeBoardBgcColor(o){this.$emit("changeBgcColor",o)},updatePhoto(o){this.$emit("changeBoardBgc",o)},updateWidth(){return`width: ${24+this.titleLength*8+"px"};`},setMemberLetters(o){return o.split(" ").map(r=>r[0]).join("").toUpperCase()},inviteUser(o){this.board.members.find(r=>r._id===o._id)||this.$emit("makeMember",o)},removeMember(o){this.removeUser=!1,this.$emit("removeInvitedUser",o)}},computed:{updateStar(){return this.board.isStarred?"icon-sm icon-starred":"icon-sm icon-star"},updateLength(){return`width: ${24+this.titleLength*8+"px"};`},users(){return this.$store.getters.users},usersForDisplay(){const o=this.$store.getters.users;if(!this.filterByName)return o.filter(r=>r._id!==this.board.createdBy._id&&!this.board.members.some(h=>r._id===h._id));const e=new RegExp(this.filterByName,"i");return o.filter(r=>e.test(r.username)&&r._id!==this.board.createdBy._id&&!this.board.members.some(h=>r._id===h._id))},membersForDisplay(){return this.board.members.filter(o=>o._id!==this.board.createdBy._id)},loggedinUser(){return this.$store.getters.loggedinUser}},watch:{"$route.params.boardId":{async handler(o){this.title=JSON.parse(JSON.stringify(this.board.title)),this.calculateTxtLen(),this.updateWidth()}}},components:{menuBar:ya,removeUserModal:Aa},emits:["changeBoardBgc","changeBgcColor","starredChange","titleChange","makeMember","removeInvitedUser"]},La=t("button",{class:"board-btn"},[t("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2 7V15C2 16.1046 2.89543 17 4 17H6C7.10457 17 8 16.1046 8 15V7C8 5.89543 7.10457 5 6 5H4C2.89543 5 2 5.89543 2 7ZM4 7V15H6V7L4 7Z",fill:"currentColor"}),t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9 7V13C9 14.1046 9.89543 15 11 15H13C14.1046 15 15 14.1046 15 13V7C15 5.89543 14.1046 5 13 5H11C9.89543 5 9 5.89543 9 7ZM11 7V13H13V7L11 7Z",fill:"currentColor"}),t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16 17V7C16 5.89543 16.8954 5 18 5H20C21.1046 5 22 5.89543 22 7V17C22 18.1046 21.1046 19 20 19H18C16.8954 19 16 18.1046 16 17ZM18 17V7L20 7V17H18Z",fill:"currentColor"})]),t("span",null,"Board"),t("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})])],-1),Ua={class:"board-name-edit"},Na={class:"users-avatar-admin"},Ia={class:"users-avatar"},Fa=t("img",{class:"admin-img",src:"https://a.trellocdn.com/prgb/dist/images/chevron.88a4454280d68a816b89.png",alt:""},null,-1),Ja=t("div",{class:"empty-div"},null,-1),Pa={class:"users-avatar-name"},Ra=["onClick"],Ga=t("div",{class:"invite"},[t("div",{class:"icon-sm icon-add-member"}),t("a",{href:"#modal1"},"Share")],-1),ja={key:1,id:"modal1",class:"overlay"},Wa=t("a",{class:"cancel",href:"#"},null,-1),Va={class:"invite-modal-container"},za={class:"invite-modal"},Ha=t("div",{class:"invite-modal-header"},[t("h1",null,"Share"),t("span",{class:"icon-lg icon-closed"},[t("a",{class:"cancel",href:"#"})])],-1),Ka={class:"content"},Za={class:"user-render-container"},qa=["onClick"],$a={class:"users-avatar-name"},Ya={class:"users-avatar member"},Xa={class:"admin-info flex"},Qa={class:"admin-avatar-name"},en={class:"admin-avatar member"},tn=t("div",{class:"admin-btn"},"Admin",-1),sn=t("div",{class:"icon-sm icon-overflow-menu-horizontal"},null,-1),on=t("p",null,"Show menu",-1),rn=[sn,on];function ln(o,e,r,h,i,s){const n=w("remove-user-modal"),a=w("menu-bar"),C=A("clickOutside"),v=A("focus");return r.board?(l(),d("section",{key:0,class:"board-header-main",style:b({backgroundColor:r.board.background})},[t("nav",null,[La,t("div",Ua,[i.titleIsOpen?c("",!0):(l(),d("p",{key:0,style:b(s.updateWidth),class:"board-name",onClick:e[0]||(e[0]=u((...T)=>s.openTitleEdit&&s.openTitleEdit(...T),["stop","prevent"]))},g(r.board.title),5)),i.titleIsOpen?_((l(),d("input",{key:1,maxlength:"512","onUpdate:modelValue":e[1]||(e[1]=T=>i.title=T),type:"text",onSubmit:e[2]||(e[2]=u((...T)=>o.changeBoardTitle&&o.changeBoardTitle(...T),["prevent"])),onKeyup:e[3]||(e[3]=(...T)=>s.calculateTxtLen&&s.calculateTxtLen(...T)),style:b(s.updateLength)},null,36)),[[C,s.changeTitle],[O,i.title]]):c("",!0)]),t("button",{onClick:e[4]||(e[4]=u((...T)=>s.boardStared&&s.boardStared(...T),["stop","prevent"]))},[t("div",{class:k(s.updateStar)},null,2)]),t("div",Na,[t("div",Ia,g(s.setMemberLetters(r.board.createdBy.fullname)),1),Fa]),Ja,(l(!0),d(B,null,x(s.membersForDisplay,T=>(l(),d("div",{class:"board-members-render",key:T.fullname},[t("div",Pa,[t("div",{onClick:L=>{s.openRemoveUser(),s.calcPosOfBox(),s.setUser(T)},ref_for:!0,ref:"user",class:"users-avatar"},g(s.setMemberLetters(T.fullname)),9,Ra)])]))),128)),i.removeUser&&s.loggedinUser._id===r.board.createdBy._id?_((l(),E(n,{key:0,style:b({top:"90px",left:i.pos.left+"px"}),onClose:s.closeRemoveUser,currUser:i.currUser,onRemove:s.removeMember},null,8,["style","onClose","currUser","onRemove"])),[[C,s.closeRemoveUser]]):c("",!0),Ga,s.loggedinUser._id===r.board.createdBy._id?(l(),d("div",ja,[Wa,t("div",Va,[t("div",za,[Ha,t("div",Ka,[_(t("input",{placeholder:"Search by name",type:"text","onUpdate:modelValue":e[5]||(e[5]=T=>i.filterByName=T)},null,512),[[v],[O,i.filterByName]]),t("div",Za,[(l(!0),d(B,null,x(s.usersForDisplay,T=>(l(),d("div",{class:"users-render",key:T,onClick:L=>s.inviteUser(T)},[t("div",$a,[t("div",Ya,g(s.setMemberLetters(T.fullname)),1),t("p",null,g(T.fullname),1)])],8,qa))),128))]),t("div",Xa,[t("div",Qa,[t("div",en,g(s.setMemberLetters(r.board.createdBy.fullname)),1),t("p",null,g(r.board.createdBy.fullname),1)]),tn])])])])])):c("",!0)]),t("nav",null,[t("button",{onClick:e[6]||(e[6]=u((...T)=>s.openMenuBar&&s.openMenuBar(...T),["stop","prevent"]))},rn)]),D(V,{name:"slide"},{default:F(()=>[i.showMenu?(l(),E(a,{key:0,board:r.board,onClose:s.closeMenuBar,onChangeBgcColor:s.changeBoardBgcColor,onChangeBgcPhoto:s.updatePhoto},null,8,["board","onClose","onChangeBgcColor","onChangeBgcPhoto"])):c("",!0)]),_:1})],4)):c("",!0)}var dn=y(Da,[["render",ln]]);const an={props:{board:Object},data(){return{}},created(){},methods:{duplicateTemplate(){const o=JSON.parse(JSON.stringify(this.board));delete o._id,this.$emit("duplicateTemplate",o),this.$router.push("/board")}},computed:{},watch:{},components:{}},nn={class:"template-header flex"},cn=t("span",{class:"icon-sm icon-world"},null,-1),un=t("p",null,"This is a public template for anyone on the internet to copy.",-1);function hn(o,e,r,h,i,s){return l(),d("section",nn,[cn,un,t("button",{onClick:e[0]||(e[0]=(...n)=>s.duplicateTemplate&&s.duplicateTemplate(...n))},"Create board from template")])}var pn=y(an,[["render",hn]]);const mn={name:"attachment-modal",props:{board:{type:Object},card:{type:Object},group:{type:Object},pos:{type:Object}},data(){return{link:"",name:"",cardToEdit:null}},computed:{},created(){},methods:{setBottomPos(o){if(console.log('screen.height + "px"',window.innerHeight),window.innerHeight-o<240){console.log("true");const e=window.innerHeight-240;return console.log("bottom",e),e}else return o+8},close(){this.$emit("actionsClose")},addAttachment(){if(this.link==="")return;this.cardToEdit=JSON.parse(JSON.stringify(this.card));const o={};this.name!==""?o.name=this.name:o.name=this.link,o.link=this.link,o.id=I.makeId(),this.cardToEdit.attachments.push(o),this.$emit("cardEdit",this.cardToEdit)},async attachFileFromSystem(o){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.$emit("uploading");const e=await me.uploadFromSystem(o);this.$emit("uploadComplete"),this.cardToEdit.attachments.unshift({id:I.makeId(),name:e.original_filename,link:e.secure_url}),this.$emit("cardEdit",this.cardToEdit)}},emits:["actionsClose","cardEdit","uploadComplete","uploading"]},gn={class:"main-title-container"},vn=t("span",{class:"main-title"},"Attach from...",-1),bn=t("span",{class:"mini-edit-title"},"Attach a link",-1),_n={key:0},Cn=t("span",{class:"mini-edit-title"},"Link name (optional)",-1);function fn(o,e,r,h,i,s){const n=A("clickOutside");return _((l(),d("section",{style:b({top:s.setBottomPos(r.pos.bottom)+"px",left:r.pos.left+"px"}),class:"label-modal"},[t("div",gn,[t("div",{class:"icon-sm icon-close",onClick:e[0]||(e[0]=u((...a)=>s.close&&s.close(...a),["stop","prevent"]))}),vn]),t("input",{onChange:e[1]||(e[1]=a=>s.attachFileFromSystem(a)),type:"file",ref:"file",style:{display:"none"}},null,544),t("button",{type:"button",onClick:e[2]||(e[2]=u(a=>o.$refs.file.click(),["stop","prevent"])),class:"create-btn"},"Computer"),bn,_(t("input",{placeholder:"Paste any link here...","onUpdate:modelValue":e[3]||(e[3]=a=>i.link=a),type:"text",class:"main-input"},null,512),[[O,i.link]]),i.link!==""?(l(),d("section",_n,[Cn,_(t("input",{placeholder:"","onUpdate:modelValue":e[4]||(e[4]=a=>i.name=a),type:"text",class:"main-input"},null,512),[[O,i.name]])])):c("",!0),t("button",{class:"save-btn",onClick:e[5]||(e[5]=u((...a)=>s.addAttachment&&s.addAttachment(...a),["stop","prevent"]))},"Attach")],4)),[[n,s.close]])}var yn=y(mn,[["render",fn]]);const kn={components:{labelEditorModalCmp:pe},name:"label-modal",props:{board:{type:Object},card:{type:Object},group:{type:Object},pos:{type:Object}},data(){return{cardToEdit:null,name:"Checklist"}},computed:{},created(){},methods:{setBottomPos(o){if(console.log('screen.height + "px"',window.innerHeight),window.innerHeight-o<186){console.log("true");const e=window.innerHeight-186;return console.log("bottom",e),e}else return o+8},close(){this.$emit("actionsClose")},addChecklist(){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.cardToEdit.checklists||(this.cardToEdit.checklists=[]),this.cardToEdit.checklists.push({id:I.makeId(),title:this.name,todos:[]}),this.$emit("cardEdit",this.cardToEdit),this.name="Checklist"}},emits:["actionsClose","cardEdit","boardEdit"]},wn={class:"main-title-container"},Tn=t("span",{class:"main-title"},"Checklist",-1),En={class:"actions-modal-main"},Bn=t("span",{class:"mini-title"},"Title",-1);function xn(o,e,r,h,i,s){const n=A("clickOutside");return l(),d("section",null,[_((l(),d("section",{style:b({top:s.setBottomPos(r.pos.bottom)+"px",left:r.pos.left+"px"}),class:"label-modal"},[t("div",wn,[t("div",{class:"icon-sm icon-close",onClick:e[0]||(e[0]=u((...a)=>s.close&&s.close(...a),["stop","prevent"]))}),Tn]),t("section",En,[Bn,_(t("input",{onClick:e[1]||(e[1]=u(()=>{},["stop","prevent"])),class:"edit-input",onSubmit:e[2]||(e[2]=u(()=>{},["prevent"])),type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>i.name=a)},null,544),[[O,i.name]]),t("button",{type:"button",onClick:e[4]||(e[4]=u((...a)=>s.addChecklist&&s.addChecklist(...a),["stop","prevent"])),class:"create-btn"},"Add")])],4)),[[n,s.close]])])}var On=y(kn,[["render",xn]]);const Sn={components:{},name:"label-modal",props:{linkName:{type:String},pos:{type:Object}},data(){return{name:this.linkName}},computed:{},created(){},methods:{setBottomPos(o){if(console.log('screen.height + "px"',window.innerHeight),window.innerHeight-o<186){console.log("true");const e=window.innerHeight-186;return console.log("bottom",e),e}else return o+8},close(){this.$emit("close")},changeName(){this.name!==""&&this.$emit("changeAttachmentName",this.name)}},emits:["close","changeAttachmentName"]},Mn={class:"main-title-container"},An=t("span",{class:"main-title"},"Edit attachment",-1),Dn={class:"actions-modal-main"},Ln=t("span",{class:"mini-title"},"Link name",-1);function Un(o,e,r,h,i,s){const n=A("clickOutside");return l(),d("section",null,[_((l(),d("section",{style:b({top:s.setBottomPos(r.pos.bottom)+"px",left:r.pos.left+"px"}),class:"label-modal"},[t("div",Mn,[t("div",{class:"icon-sm icon-close",onClick:e[0]||(e[0]=u((...a)=>s.close&&s.close(...a),["stop","prevent"]))}),An]),t("section",Dn,[Ln,_(t("input",{onClick:e[1]||(e[1]=u(()=>{},["stop","prevent"])),class:"edit-input",onSubmit:e[2]||(e[2]=u(()=>{},["prevent"])),type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>i.name=a)},null,544),[[O,i.name]]),t("button",{type:"button",onClick:e[4]||(e[4]=u((...a)=>s.changeName&&s.changeName(...a),["stop","prevent"])),class:"save-btn"},"Update")])],4)),[[n,s.close]])])}var Nn=y(Sn,[["render",Un]]);const In={props:{todoId:{type:String},checklistId:{type:String},pos:{type:Object}},methods:{closeModal(){this.$emit("close")},convertToCard(){this.$emit("convertToCard",{checklistId:this.checklistId,todoId:this.todoId}),this.$emit("close")},removeTodo(){this.$emit("removeTodo",{checklistId:this.checklistId,todoId:this.todoId}),this.$emit("close")}},emits:["close","convertToCard","removeTodo"]},Fn={class:"group-modal-header"},Jn=t("div",{class:"header-text-group-modal"},[t("h1",null,"Item actions")],-1),Pn=t("svg",{width:"10",height:"10",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.58579 7L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683418 0.292893 0.292893C0.683418 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L7 5.58579L12.2929 0.292893C12.6834 -0.0976311 13.3166 -0.0976311 13.7071 0.292893C14.0976 0.683418 14.0976 1.31658 13.7071 1.70711L8.41421 7L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L7 8.41421L1.70711 13.7071C1.31658 14.0976 0.683418 14.0976 0.292893 13.7071C-0.0976311 13.3166 -0.0976311 12.6834 0.292893 12.2929L5.58579 7Z",fill:"currentColor"})],-1),Rn=[Pn],Gn={class:"group-modal-actions-list"};function jn(o,e,r,h,i,s){const n=A("clickOutside");return _((l(),d("div",{class:"group-edit-modal",style:b({top:r.pos.bottom+6+"px",left:r.pos.left+"px"})},[t("div",Fn,[Jn,t("div",{class:"header-close-edit-group-modal",onClick:e[0]||(e[0]=(...a)=>s.closeModal&&s.closeModal(...a))},Rn)]),t("div",Gn,[t("div",{class:"group-modal-action",onClick:e[1]||(e[1]=(...a)=>s.convertToCard&&s.convertToCard(...a))},"Convert to card"),t("div",{class:"group-modal-action",onClick:e[2]||(e[2]=(...a)=>s.removeTodo&&s.removeTodo(...a))},"Delete")])],4)),[[n,s.closeModal,void 0,{stop:!0,prevent:!0}]])}var Wn=y(In,[["render",jn]]);const Vn={name:"card-details",props:{card:{type:Object},group:{type:Object},board:{type:Object}},components:{labelModal:$,membersModal:Y,datesModal:X,deleteWarning:Q,coverModal:ee,attachmentModal:yn,copyModal:te,checklistModal:On,moment:G,todoOptions:Wn,attachEditModal:Nn},created(){this.description=this.card.description},mounted(){},data(){return{currModal:null,isModalShown:!1,warningOpen:!1,warningTitle:"",pos:0,showInput:!1,showDesc:!1,description:"",newComment:M.getEmptyComment(),isLoading:!1,currOpenTodo:{},currChecklist:{},isChecklistOpen:!1,addingNewTodo:!1,optionsOpen:!1,checklistId:"",todoId:"",edditingAttachName:!1,currAttach:{}}},computed:{cardToEdit(){return JSON.parse(JSON.stringify(this.card))},loggedinUser(){return this.$store.getters.loggedinUser},async backgroundCoverColor(){if(this.card.cover.type&&this.card.cover.type==="attachment"){const o=new K;try{const e=await o.getColorAsync(this.card.cover.value);return this.$refs.headerCover.style.backgroundColor=e.hex,e.hex}catch(e){console.log(e)}}}},watch:{backgroundCoverColor:{async handler(o){Object.keys(this.card.cover).length&&(this.$refs.headerCover.style.backgroundColor=o)}}},methods:{removeCover(){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.cardToEdit.cover={},this.$emit("cardModified",{card:this.cardToEdit,group:this.group})},makeAttachCover(o){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.cardToEdit.cover.type="attachment",this.cardToEdit.cover.value=o.link,this.cardToEdit.cover.size="small",this.$emit("cardModified",{card:this.cardToEdit,group:this.group})},closeAttachModal(){this.edditingAttachName=!1},deleteAttachment(o){this.cardToEdit=JSON.parse(JSON.stringify(this.card));const e=this.cardToEdit.attachments.findIndex(r=>r.id===o);this.cardToEdit.attachments.splice(e,1),this.$emit("cardModified",{card:this.cardToEdit,group:this.group})},editAttachName(o,e){this.currAttach=JSON.parse(JSON.stringify(o)),this.edditingAttachName=!0,this.pos=e.target.getBoundingClientRect()},changeAttachName(o){this.cardToEdit=JSON.parse(JSON.stringify(this.card));const e=this.cardToEdit.attachments.findIndex(r=>r.id===this.currAttach.id);this.cardToEdit.attachments[e].name=o,this.$emit("cardModified",{card:this.cardToEdit,group:this.group}),this.edditingAttachName=!1},setMemberLetters(o){return o.split(" ").map(r=>r[0]).join("").toUpperCase()},closeModal(){this.$emit("closeDialog")},openThisModal(o,e){this.isModalShown===!0&&o===this.currModal?this.isModalShown=!1:(this.pos=e.target.getBoundingClientRect(),this.pos=JSON.parse(JSON.stringify(this.pos)),this.pos.top>430&&(this.pos.top=430),this.isModalShown=!0,this.currModal=o)},closeMenu(){this.isModalShown=!1},editCard(o){this.$emit("cardModified",{card:o,group:this.group})},async attachmentBGC(o){const e=new K,r=o.props.src;try{const h=await e.getColorAsync(r);o.props["background-color"]=h.hex}catch(h){console.log(h)}},sendCardCopyToStore(o){this.$emit("saveCopy",o)},deleteWarn(){this.pos=this.$refs.deleteBtn.getBoundingClientRect(),this.warningTitle="card",this.warningOpen=!0},closeWarning(){this.warningOpen=!1},deleteCard(){this.$emit("deleteCardFromGroup",{card:this.cardToEdit,group:this.group}),this.closeModal()},closeInput(){this.showInput=!1},closeTextArea(){this.showDesc=!1},openTextArea(){this.showDesc=!0},editBoard(o){this.$emit("boardModified",o)},updateCardDesc(){this.cardToEdit.description=this.description,this.$emit("cardModified",{card:this.cardToEdit,group:this.group}),this.showDesc=!1},generateTime(o){return G(o).fromNow()},addCardComment(){!this.newComment.txt||(this.newComment.byMember=this.loggedinUser,this.cardToEdit.comments.unshift(this.newComment),this.$emit("cardModified",{card:this.cardToEdit,group:this.group}),this.newComment=M.getEmptyComment(),this.showInput=!1)},setDateFormat(o){let e=new Date(o);return Intl.DateTimeFormat("en-Us",{month:"short",day:"numeric"}).format(e)},setHourFormat(o){return new Date(o).toLocaleTimeString().replace(/(.*)\D\d+/,"$1")},toggleCardComplete(){this.cardToEdit.isComplete=!this.cardToEdit.isComplete,this.$emit("cardModified",{card:this.cardToEdit,group:this.group})},notifyUploading(){this.isLoading=!0},notifyComplete(){this.isLoading=!1},deleteComment(o){const e=this.cardToEdit.comments.findIndex(r=>r.id===o);this.cardToEdit.comments.splice(e,1),this.$emit("cardModified",{card:this.cardToEdit,group:this.group})},isOpen(o,e){return!!(Object.keys(this.currChecklist).length&&Object.keys(this.currOpenTodo).length&&this.currChecklist.id===o.id&&this.currOpenTodo.id===e.id)},openTodo(o,e){this.currChecklist=JSON.parse(JSON.stringify(o)),this.currOpenTodo=JSON.parse(JSON.stringify(e)),this.closeAdder()},async checkboxTodo(o,e){this.cardToEdit=JSON.parse(JSON.stringify(this.card)),this.currChecklist=JSON.parse(JSON.stringify(o)),this.currOpenTodo=JSON.parse(JSON.stringify(e)),this.currOpenTodo.isComplete=!this.currOpenTodo.isComplete;const r=this.cardToEdit.checklists.findIndex(i=>i.id===this.currChecklist.id),h=this.cardToEdit.checklists[r].todos.findIndex(i=>i.id===this.currOpenTodo.id);this.cardToEdit.checklists[r].todos[h]=this.currOpenTodo,this.$emit("cardModified",{card:this.cardToEdit,group:this.group}),this.closeTodo(),this.closeAdder()},closeTodo(){this.currChecklist={},this.currOpenTodo={},this.closeAdder()},openChecklist(o){this.currChecklist=JSON.parse(JSON.stringify(o)),this.isChecklistOpen=!0,this.closeAdder()},saveChecklistTitle(){this.closeAdder(),this.cardToEdit=JSON.parse(JSON.stringify(this.card));const o=this.cardToEdit.checklists.findIndex(e=>e.id===this.currChecklist.id);this.cardToEdit.checklists[o]=this.currChecklist,this.$emit("cardModified",{card:this.cardToEdit,group:this.group}),this.currChecklist={}},closeChecklist(){this.currChecklist={},this.isChecklistOpen=!1,this.closeAdder()},openChecklistInput(o){this.currChecklist=JSON.parse(JSON.stringify(o)),this.addingNewTodo=!0,this.currOpenTodo=M.getEmptyTodo()},saveTodo(){this.cardToEdit=JSON.parse(JSON.stringify(this.card));const o=this.cardToEdit.checklists.findIndex(r=>r.id===this.currChecklist.id),e=this.cardToEdit.checklists[o].todos.findIndex(r=>r.id===this.currOpenTodo.id);console.log(o,e),this.cardToEdit.checklists[o].todos[e]=this.currOpenTodo,this.$emit("cardModified",{card:this.cardToEdit,group:this.group}),this.currChecklist={},this.currOpenTodo={}},deleteChecklist(o){this.currChecklist={},this.cardToEdit=JSON.parse(JSON.stringify(this.card));const e=this.cardToEdit.checklists.findIndex(r=>r.id===o);this.cardToEdit.checklists.splice(e,1),this.$emit("cardModified",{card:this.cardToEdit,group:this.group})},createTodo(){if(this.currOpenTodo.text==="")return;this.cardToEdit=JSON.parse(JSON.stringify(this.card));const o=this.cardToEdit.checklists.findIndex(e=>e.id===this.currChecklist.id);this.cardToEdit.checklists[o].todos.push(this.currOpenTodo),this.$emit("cardModified",{card:this.cardToEdit,group:this.group}),this.currOpenTodo=M.getEmptyTodo()},closeAdder(){this.addingNewTodo=!1},todoPercentage(o){var e=0;return o.todos.length&&(o.todos.forEach(r=>{r.isComplete&&e++}),e=parseInt(e/o.todos.length*100)),e},calcBarColor(o){return this.todoPercentage(o)===100?"#61bd4f":"#5ba4cf"},openChecklistOptions(o,e,r){this.checklistId=o.id,this.todoId=e.id,this.pos=r.target.getBoundingClientRect(),this.optionsOpen=!0},convertTodoToCard({checklistId:o,todoId:e}){const r=JSON.parse(JSON.stringify(this.group));this.cardToEdit=JSON.parse(JSON.stringify(this.card));const h=r.cards.findIndex(a=>a.id===this.cardToEdit.id),i=this.cardToEdit.checklists.findIndex(a=>a.id===o),s=this.cardToEdit.checklists[i].todos.findIndex(a=>a.id===e),n=M.getEmptyCard();n.title=this.cardToEdit.checklists[i].todos[s].text,r.cards.push(n),r.cards[h].checklists[i].todos.splice(s,1),this.$emit("groupUpdate",r)},deleteTodo({checklistId:o,todoId:e}){this.cardToEdit=JSON.parse(JSON.stringify(this.card));const r=this.cardToEdit.checklists.findIndex(i=>i.id===o),h=this.cardToEdit.checklists[r].todos.findIndex(i=>i.id===e);this.cardToEdit.checklists[r].todos.splice(h,1),this.$emit("cardModified",{card:this.cardToEdit,group:this.group}),this.currOpenTodo={},this.currChecklist={}}},emits:["groupUpdate","cardCopySave","closeDialog","cardModified","boardModified","deleteCardFromGroup","saveCopy"]},zn=t("span",{class:"icon-md icon-closed"},null,-1),Hn=[zn],Kn=t("span",{class:"icon-sm icon-cover"},null,-1),Zn=S(" Cover "),qn=[Kn,Zn],$n={class:"card-details-container flex"},Yn={class:"card-details-header"},Xn={class:"card-details-header-icon"},Qn=t("span",{class:"icon-lg icon-card"},null,-1),ec={class:"card-details-title flex"},tc=t("span",{class:"icon-md icon-closed"},null,-1),sc=[tc],oc={class:"card-details-list-name"},rc={class:"card-details-actions-container-edit-btns flex"},ic={class:"card-details-actions-container"},lc={class:"card-details-main flex"},dc={key:0,class:"card-details-members-labels-date"},ac={key:0,class:"card-detail-member-container-main"},nc={key:0,for:""},cc={key:1,class:"card-details-members-container",for:""},uc={class:"card-details-member-img"},hc={class:"member"},pc={class:"card-detail-labels-container-main"},mc={key:0,for:""},gc={key:1,class:"card-details-labels-container",for:""},vc={class:"card-detail-date-container-main"},bc={key:0,for:""},_c={key:1,class:"card-details-dates-container",for:""},Cc={class:"card-details-dates"},fc={class:"card-details-date"},yc={key:0,class:"overdue"},kc={key:1,class:"complete"},wc=t("svg",{class:"down",width:"20",height:"20",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),Tc={class:"card-details-description"},Ec=t("span",{class:"icon-lg icon-desc"},null,-1),Bc=t("h3",null,"Description",-1),xc={key:3,class:"card-details-text-add-btn"},Oc={key:1,class:"card-details-activity-show-attachments"},Sc=t("div",{class:"card-details-attachments"},[t("span",{class:"icon-lg icon-attachment"}),t("h3",null,"Attachments")],-1),Mc={key:0,class:"loading-attachment"},Ac=t("div",{class:"loading-container"},[t("img",{class:"loading-svg",src:"https://res.cloudinary.com/dw85wdwsw/image/upload/v1648563503/dlcjcnpz0afvbj2mgrqj.svg"}),S(" processing... ")],-1),Dc=[Ac],Lc={key:1},Uc=["src"],Nc={class:"card-attachment-area-main"},Ic={class:"card-attachment-area-header"},Fc=t("span",{class:"icon-sm icon-link-arrow"},null,-1),Jc={class:"attachment-area-body flex"},Pc=["onClick"],Rc=t("span",null,"-",-1),Gc=["onClick"],jc={class:"attachment-area-footer"},Wc=t("span",{class:"icon-sm icon-cover"},null,-1),Vc=["onClick"],zc={class:"checklist"},Hc={key:0,class:"card-details-checklist-show-details"},Kc={class:"checklist-header"},Zc={class:"checklist-title"},qc=t("div",{class:"icon-lg icon-checklist"},null,-1),$c=["onClick"],Yc={key:1},Xc={class:"edit-options"},Qc={class:"main-actions"},eu=t("div",{class:"todo-discard"},[t("div",{class:"icon-lg icon-closed"})],-1),tu=["onClick"],su={class:"todo-bar"},ou={class:"bar-percentage"},ru={key:0,class:"todos-container"},iu={class:"todo-checkbox"},lu=["onClick"],du={style:{"z-index":"40"},src:"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23fff' viewBox='-3 -4 16 16'%3E%3Cpath d='M1.49 3.215a.667.667 0 0 0-.98.903l2.408 2.613c.358.351.892.351 1.223.02l.243-.239a1689.645 1689.645 0 0 0 2.625-2.589l.027-.026a328.23 328.23 0 0 0 2.439-2.429.667.667 0 1 0-.95-.936c-.469.476-1.314 1.316-2.426 2.417l-.027.026a1368.126 1368.126 0 0 1-2.517 2.482L1.49 3.215z'/%3E%3C/svg%3E"},au=["onClick"],nu={key:0,class:"todo-text"},cu=["onClick"],uu=t("div",{class:"icon-sm icon-overflow-menu-horizontal"},null,-1),hu=[uu],pu={key:2},mu={class:"main-actions"},gu=t("div",{class:"todo-discard"},[t("div",{class:"icon-lg icon-closed"})],-1),vu=["onClick"],bu=t("div",{class:"icon-sm icon-overflow-menu-horizontal"},null,-1),_u=[bu],Cu={class:"add-todo-container"},fu=["onClick"],yu={key:1,class:"checklist-input-container"},ku={class:"edit-options"},wu={class:"main-actions"},Tu=t("div",{class:"todo-discard"},[t("div",{class:"icon-lg icon-closed cursor-pointer"})],-1),Eu=t("div",{class:"card-details-activity-show-details"},[t("div",{class:"card-details-activity"},[t("span",{class:"icon-lg icon-activity"}),t("h3",null,"Activity")]),t("button",null,"Show details")],-1),Bu={class:"card-details-user-comment flex"},xu={class:"card-details-user-avatar member"},Ou=S("Write a comment..."),Su=[Ou],Mu={key:1,class:"card-details-input-show"},Au={class:"card-details-all-btns flex"},Du={key:2},Lu={class:"card-details-user-avatar member"},Uu={class:"comment-info"},Nu={class:"comment-info-name-date"},Iu={class:"comment-info-txt"},Fu={class:"comment-info-btns flex"},Ju=["onClick"],Pu={class:"card-details-edit"},Ru=t("label",{for:""},"Add to card",-1),Gu=t("span",{class:"icon-sm icon-member"},null,-1),ju=S(" Members "),Wu=[Gu,ju],Vu=t("span",{class:"icon-sm icon-label"},null,-1),zu=S(" Labels "),Hu=[Vu,zu],Ku=t("span",{class:"icon-sm icon-checklist"},null,-1),Zu=S(" Checklist "),qu=[Ku,Zu],$u=t("svg",{class:"date-svg",width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M13 6C13 5.44772 12.5523 5 12 5C11.4477 5 11 5.44772 11 6V12C11 12.2652 11.1054 12.5196 11.2929 12.7071L13.7929 15.2071C14.1834 15.5976 14.8166 15.5976 15.2071 15.2071C15.5976 14.8166 15.5976 14.1834 15.2071 13.7929L13 11.5858V6Z",fill:"currentColor"}),t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20Z",fill:"currentColor"})],-1),Yu=S(" Dates "),Xu=[$u,Yu],Qu=t("span",{class:"icon-sm icon-attachment"},null,-1),eh=S(" Attachment "),th=[Qu,eh],sh=t("span",{class:"icon-sm icon-cover"},null,-1),oh=S(" Cover "),rh=[sh,oh],ih=t("label",{for:""},"Actions",-1),lh=t("span",{class:"icon-sm icon-copy"},null,-1),dh=S(" Copy "),ah=[lh,dh],nh=t("span",{class:"icon-sm icon-archive"},null,-1),ch=S(" Delete "),uh=[nh,ch],hh={key:1};function ph(o,e,r,h,i,s){const n=w("el-progress"),a=w("todo-options"),C=w("attach-edit-modal"),v=w("delete-warning"),T=A("focus"),L=A("clickOutside");return l(),d("section",null,[Object.keys(r.card.cover).length?(l(),d("section",{key:0,class:k(["card-details-cover",{color:r.card.cover.type==="color",attachmentofdetails:r.card.cover.type==="attachment"}]),ref:"headerCover",style:b([r.card.cover.type==="color"?{backgroundColor:r.card.cover.value}:{backgroundImage:"url("+r.card.cover.value+")"}])},[r.card.cover.type?(l(),d("div",{key:0,class:"card-details-cover-close",onClick:e[0]||(e[0]=u((...p)=>s.closeModal&&s.closeModal(...p),["stop","prevent"]))},Hn)):c("",!0),t("button",{class:"card-details-btn-header",onClick:e[1]||(e[1]=u(p=>s.openThisModal("coverModal",p),["stop","prevent"]))},qn)],6)):c("",!0),t("section",$n,[t("div",Yn,[t("div",Xn,[Qn,t("div",ec,[t("p",null,g(r.card.title),1)])]),Object.keys(r.card.cover).length?c("",!0):(l(),d("div",{key:0,class:"card-details-no-cover-close",onClick:e[2]||(e[2]=u((...p)=>s.closeModal&&s.closeModal(...p),["stop","prevent"]))},sc))]),t("div",oc,[t("p",null,"in list "+g(r.group.title),1)]),t("section",rc,[t("section",ic,[t("section",lc,[r.card.members.length>0||r.card.labels.length>0||r.card.date?(l(),d("div",dc,[r.card.members.length>0?(l(),d("div",ac,[r.card.members.length>0?(l(),d("label",nc,"Members")):c("",!0),r.card.members.length>0?(l(),d("div",cc,[(l(!0),d(B,null,x(r.card.members,p=>(l(),d("section",{class:"card-details-members",key:p._id},[t("div",uc,[t("div",hc,g(s.setMemberLetters(p.fullname)),1)])]))),128))])):c("",!0)])):c("",!0),t("div",pc,[r.card.labels.length>0?(l(),d("label",mc,"Labels")):c("",!0),r.card.labels.length>0?(l(),d("div",gc,[(l(!0),d(B,null,x(r.card.labels,p=>(l(),d("section",{class:"card-details-labels",key:p},[t("div",{class:"card-details-label",style:b({backgroundColor:r.board.labels[r.board.labels.findIndex(m=>m.id===p)].color})},[t("p",null,g(r.board.labels[r.board.labels.findIndex(m=>m.id===p)].title),1)],4)]))),128))])):c("",!0)]),t("div",vc,[r.card.date?(l(),d("label",bc,"Due date")):c("",!0),r.card.date?(l(),d("div",_c,[t("section",Cc,[r.card.isComplete?c("",!0):(l(),d("div",{key:0,onClick:e[3]||(e[3]=u((...p)=>s.toggleCardComplete&&s.toggleCardComplete(...p),["stop","prevent"])),class:"checkbox"})),r.card.isComplete?(l(),d("img",{key:1,onClick:e[4]||(e[4]=u((...p)=>s.toggleCardComplete&&s.toggleCardComplete(...p),["stop","prevent"])),class:"done-img",src:"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23fff' viewBox='-3 -4 16 16'%3E%3Cpath d='M1.49 3.215a.667.667 0 0 0-.98.903l2.408 2.613c.358.351.892.351 1.223.02l.243-.239a1689.645 1689.645 0 0 0 2.625-2.589l.027-.026a328.23 328.23 0 0 0 2.439-2.429.667.667 0 1 0-.95-.936c-.469.476-1.314 1.316-2.426 2.417l-.027.026a1368.126 1368.126 0 0 1-2.517 2.482L1.49 3.215z'/%3E%3C/svg%3E",alt:""})):c("",!0),t("div",fc,[t("p",null,g(s.setDateFormat(r.card.date))+" at "+g(s.setHourFormat(r.card.date)),1),r.card.date<Date.now()&&!r.card.isComplete?(l(),d("span",yc,"overdue")):c("",!0),r.card.isComplete?(l(),d("span",kc,"complete")):c("",!0),wc])])])):c("",!0)])])):c("",!0),_((l(),d("section",null,[t("div",Tc,[Ec,Bc,r.card.description?(l(),d("button",{key:0,onClick:e[5]||(e[5]=u((...p)=>s.openTextArea&&s.openTextArea(...p),["stop","prevent"]))},"Edit")):c("",!0)]),t("div",{class:"card-details-input",style:b(i.showDesc?{"padding-left":"42px","padding-top":"18px"}:null)},[!i.showDesc&&!r.card.description?(l(),d("div",{key:0,onClick:e[6]||(e[6]=u((...p)=>s.openTextArea&&s.openTextArea(...p),["stop","prevent"])),class:"open-input-btn"},"Add a more detailed description...")):c("",!0),i.showDesc?c("",!0):(l(),d("div",{key:1,class:"card-description",onClick:e[7]||(e[7]=u((...p)=>s.openTextArea&&s.openTextArea(...p),["stop","prevent"]))},g(r.card.description),1)),i.showDesc?_((l(),d("textarea",{key:2,placeholder:"Add a more detailed description...","onUpdate:modelValue":e[8]||(e[8]=p=>i.description=p),name:"description",id:"",cols:"60",rows:"4"},null,512)),[[T],[O,i.description]]):c("",!0),i.showDesc?(l(),d("div",xc,[t("button",{onClick:e[9]||(e[9]=u((...p)=>s.updateCardDesc&&s.updateCardDesc(...p),["stop","prevent"]))},"Save"),t("span",{onClick:e[10]||(e[10]=u((...p)=>s.closeTextArea&&s.closeTextArea(...p),["stop","prevent"])),class:"icon-xl icon-closed"})])):c("",!0)],4)])),[[L,s.closeTextArea]]),i.isLoading||r.card.attachments.length>0?(l(),d("div",Oc,[Sc,i.isLoading?(l(),d("div",Mc,Dc)):c("",!0),r.card.attachments.length?(l(),d("div",Lc,[(l(!0),d(B,null,x(r.card.attachments,p=>(l(),d("div",{class:"card-attachments-area",key:p.link},[t("img",{onVnodeMounted:e[11]||(e[11]=m=>s.attachmentBGC(m)),src:p.link,alt:""},null,8,Uc),t("div",Nc,[t("div",Ic,[t("p",null,g(p.name),1),Fc]),t("div",Jc,[t("a",{onClick:u(m=>s.deleteAttachment(p.id),["stop","prevent"])},"Delete",8,Pc),Rc,t("a",{onClick:u(m=>s.editAttachName(p,m),["stop","prevent"])},"Edit",8,Gc)]),t("div",jc,[Wc,r.card.cover.value!==p.link?(l(),d("p",{key:0,onClick:u(m=>s.makeAttachCover(p),["stop","prevent"])},"Make cover",8,Vc)):c("",!0),r.card.cover.value===p.link?(l(),d("p",{key:1,onClick:e[12]||(e[12]=u((...m)=>s.removeCover&&s.removeCover(...m),["stop","prevent"]))},"Remove cover")):c("",!0)])])]))),128))])):c("",!0)])):c("",!0),t("div",zc,[r.card.checklists.length?(l(),d("div",Hc,[(l(!0),d(B,null,x(r.card.checklists,p=>(l(),d("div",{key:p.id,class:"card-details-checklist"},[t("div",Kc,[t("div",Zc,[qc,!i.isChecklistOpen||i.currChecklist.id!==p.id?(l(),d("h3",{key:0,onClick:u(m=>s.openChecklist(p),["stop","prevent"])},g(p.title),9,$c)):c("",!0),i.isChecklistOpen&&i.currChecklist.id===p.id?(l(),d("div",Yc,[_(t("textarea",{style:b({height:parseInt(i.currChecklist.title.length/64+1)*24+"px"}),class:"edit-todo-text","onUpdate:modelValue":e[13]||(e[13]=m=>i.currChecklist.title=m),onKeydown:e[14]||(e[14]=J(u((...m)=>s.saveChecklistTitle&&s.saveChecklistTitle(...m),["stop","prevent"]),["enter"]))},null,36),[[L,s.closeChecklist],[O,i.currChecklist.title]]),t("div",Xc,[t("div",Qc,[t("button",{onClick:e[15]||(e[15]=u((...m)=>s.saveChecklistTitle&&s.saveChecklistTitle(...m),["stop","prevent"])),class:"checklist-btn save-btn"},"Save"),eu])])])):c("",!0)]),i.isChecklistOpen?c("",!0):(l(),d("button",{key:0,onClick:u(m=>s.deleteChecklist(p.id),["stop","prevent"]),class:"checklist-btn checklkist-delete"},"Delete",8,tu))]),t("div",su,[t("div",ou,g(s.todoPercentage(p))+"%",1),D(n,{class:"bar","stroke-width":8,"show-text":!1,percentage:s.todoPercentage(p),color:s.calcBarColor(p)},null,8,["percentage","color"])]),p.todos?(l(),d("div",ru,[(l(!0),d(B,null,x(p.todos,m=>(l(),d("div",{class:"checklist-todo",key:m.id},[t("div",iu,[t("div",{class:k(["checkbox",{checkboxchecked:m.isComplete===!0}]),onClick:u(f=>s.checkboxTodo(p,m),["stop","prevent"])},[_(t("img",du,null,512),[[Ce,m.isComplete]])],10,lu)]),t("div",{class:"todo-preview",onClick:u(f=>s.openTodo(p,m),["stop","prevent"])},[s.isOpen(p,m)?c("",!0):(l(),d("span",nu,g(m.text),1)),s.isOpen(p,m)?c("",!0):(l(),d("div",{key:1,onClick:u(f=>s.openChecklistOptions(p,m,f),["stop","prevent"]),class:"todo-options"},hu,8,cu)),s.isOpen(p,m)?(l(),d("div",pu,[_(t("textarea",{onKeydown:e[16]||(e[16]=J(u((...f)=>s.saveTodo&&s.saveTodo(...f),["prevent"]),["enter"])),style:b({height:parseInt(i.currOpenTodo.text.length/64+1)*24+"px"}),"onUpdate:modelValue":e[17]||(e[17]=f=>i.currOpenTodo.text=f),class:"edit-todo-text"},null,36),[[L,s.closeTodo,void 0,{stop:!0,prevent:!0}],[O,i.currOpenTodo.text]]),t("div",{onClick:e[19]||(e[19]=u((...f)=>s.closeTodo&&s.closeTodo(...f),["stop","prevent"])),class:"edit-options"},[t("div",mu,[t("button",{onClick:e[18]||(e[18]=u((...f)=>s.saveTodo&&s.saveTodo(...f),["stop","prevent"])),class:"checklist-btn save-btn"},"Save"),gu]),t("div",{onClick:u(f=>s.openChecklistOptions(p,m,f),["stop","prevent"]),class:"more-options"},_u,8,vu)])])):c("",!0)],8,au)]))),128))])):c("",!0),_((l(),d("div",Cu,[!i.addingNewTodo||i.currChecklist.id!==p.id?(l(),d("button",{key:0,onClick:u(m=>s.openChecklistInput(p),["stop","prevent"]),class:"checklist-btn checklist-add-item"},"Add an item",8,fu)):c("",!0),i.addingNewTodo&&i.currChecklist.id===p.id?(l(),d("div",yu,[_(t("textarea",{onKeydown:e[20]||(e[20]=J(u(m=>s.createTodo(),["stop","prevent"]),["enter"])),class:"add-todo-text",style:b({minHeight:parseInt(i.currOpenTodo.text.length/64+1)*24+"px"}),"onUpdate:modelValue":e[21]||(e[21]=m=>i.currOpenTodo.text=m),placeholder:"Add an item",type:"text",ref_for:!0,ref:"addingtextarea"},null,36),[[L,s.closeAdder],[O,i.currOpenTodo.text],[T]]),t("div",ku,[t("div",wu,[t("button",{onClick:e[22]||(e[22]=u(m=>s.createTodo(),["stop","prevent"])),class:"checklist-btn save-btn"},"Add"),Tu])])])):c("",!0)])),[[L,s.closeAdder]])]))),128))])):c("",!0)]),Eu,t("div",Bu,[t("div",xu,[t("div",null,g(s.loggedinUser?s.setMemberLetters(s.loggedinUser.fullname):"GU"),1)]),i.showInput?c("",!0):_((l(),d("div",{key:0,class:"card-details-input",onClick:e[23]||(e[23]=p=>i.showInput=!0)},Su)),[[L,s.closeInput]]),i.showInput?_((l(),d("div",Mu,[_(t("input",{placeholder:"Write a comment...",type:"text",onKeydown:e[24]||(e[24]=J((...p)=>s.addCardComment&&s.addCardComment(...p),["enter"])),"onUpdate:modelValue":e[25]||(e[25]=p=>i.newComment.txt=p)},null,544),[[O,i.newComment.txt]]),t("div",Au,[i.showInput?(l(),d("button",{key:0,class:"card-details-save-btn",onClick:e[26]||(e[26]=u((...p)=>s.addCardComment&&s.addCardComment(...p),["stop","prevent"]))},"Save")):c("",!0)])])),[[L,s.closeInput]]):c("",!0)]),r.card.comments?(l(),d("div",Du,[(l(!0),d(B,null,x(r.card.comments,p=>(l(),d("div",{class:"comments-rendering flex",key:p},[t("div",Lu,[t("div",null,g(s.setMemberLetters(p.byMember.fullname)),1)]),t("div",Uu,[t("div",Nu,[t("p",null,[t("span",null,g(p.byMember.username),1),S(" "+g(s.generateTime(p.createdAt)),1)])]),t("div",Iu,[t("p",null,g(p.txt),1)]),t("div",Fu,[t("p",{onClick:m=>s.deleteComment(p.id)},"Delete",8,Ju)])])]))),128))])):c("",!0)])]),t("section",Pu,[Ru,t("button",{ref:"membersBtn",class:"card-details-btn",onClick:e[27]||(e[27]=u(p=>s.openThisModal("membersModal",p),["stop","prevent"]))},Wu,512),t("button",{ref:"labelBtn",class:"card-details-btn",onClick:e[28]||(e[28]=u(p=>s.openThisModal("labelModal",p),["stop","prevent"]))},Hu,512),t("button",{ref:"checklistBtn",onClick:e[29]||(e[29]=u(p=>s.openThisModal("checklistModal",p),["stop","prevent"])),class:"card-details-btn"},qu,512),t("button",{ref:"datesBtn",class:"card-details-btn",onClick:e[30]||(e[30]=u(p=>s.openThisModal("datesModal",p),["stop","prevent"]))},Xu,512),t("button",{ref:"attachmentBtn",class:"card-details-btn",onClick:e[31]||(e[31]=u(p=>s.openThisModal("attachmentModal",p),["stop","prevent"]))},th,512),r.card.cover.type?c("",!0):(l(),d("button",{key:0,ref:"coverBtn",class:"card-details-btn",onClick:e[32]||(e[32]=u(p=>s.openThisModal("coverModal",p),["stop","prevent"]))},rh,512)),ih,t("button",{ref:"copyBtn",class:"card-details-btn",onClick:e[33]||(e[33]=u(p=>s.openThisModal("copyModal",p),["stop","prevent"]))},ah,512),t("button",{ref:"deleteBtn",class:"card-details-btn",onClick:e[34]||(e[34]=u((...p)=>s.deleteWarn&&s.deleteWarn(...p),["stop","prevent"]))},uh,512)])])]),i.isModalShown?(l(),d("section",hh,[(l(),E(ae(i.currModal),{onUploadComplete:s.notifyComplete,onUploading:s.notifyUploading,onBoardEdit:s.editBoard,onCardEdit:s.editCard,onActionsClose:s.closeMenu,onCardCopySave:s.sendCardCopyToStore,board:r.board,card:r.card,group:r.group,pos:i.pos},null,8,["onUploadComplete","onUploading","onBoardEdit","onCardEdit","onActionsClose","onCardCopySave","board","card","group","pos"]))])):c("",!0),i.optionsOpen?(l(),E(a,{key:2,onConvertToCard:s.convertTodoToCard,onRemoveTodo:s.deleteTodo,onClose:e[35]||(e[35]=p=>i.optionsOpen=!1),checklistId:i.checklistId,todoId:i.todoId,pos:i.pos},null,8,["onConvertToCard","onRemoveTodo","checklistId","todoId","pos"])):c("",!0),i.edditingAttachName?(l(),E(C,{key:3,pos:i.pos,linkName:i.currAttach.name,onClose:s.closeAttachModal,onChangeAttachmentName:s.changeAttachName},null,8,["pos","linkName","onClose","onChangeAttachmentName"])):c("",!0),i.warningOpen?(l(),E(v,{key:4,onCloseDeleteWarning:s.closeWarning,onDeleteConfirmed:s.deleteCard,title:i.warningTitle,pos:i.pos},null,8,["onCloseDeleteWarning","onDeleteConfirmed","title","pos"])):c("",!0)])}var mh=y(Vn,[["render",ph]]);const gh={components:{groupList:Md,boardHeader:dn,cardDetails:mh,socketService:P,templateHeader:pn},data(){return{isCardOpen:!1,selectedCardIdx:null,selectedCardGroupIdx:null,boardToEdit:null,groupToEdit:null,newGroup:M.getEmptyGroup(),newActivity:M.getEmptyActivity()}},created(){},mounted(){P.on("board-changed",this.socketBoardUpdate)},methods:{socketBoardUpdate(o){this.$store.commit({type:"setBoard",board:o})},groupRemoveFromBoard(o){this.boardToEdit=JSON.parse(JSON.stringify(this.board)),this.newActivity=M.getEmptyActivity(),this.loggedinUser&&(this.newActivity.byMember=this.loggedinUser);const e=this.boardToEdit.groups.findIndex(r=>r.id===o);this.saveActivity("removed list "+this.boardToEdit.groups[e].title),this.boardToEdit.groups.splice(e,1),this.$store.dispatch({type:"saveBoard",board:this.boardToEdit})},addNewGroup(o){!o.title||(this.boardToEdit=JSON.parse(JSON.stringify(this.board)),this.saveActivity("added "+o.title+"  to this board"),this.boardToEdit.groups.push(o),this.$store.dispatch({type:"saveBoard",board:this.boardToEdit}),this.newGroup=M.getEmptyGroup(),this.show=!1)},close(){this.show=!1,this.newGroup.title=""},updateCard({card:o,group:e}){this.groupToEdit=JSON.parse(JSON.stringify(e));const r=this.groupToEdit.cards.findIndex(h=>h.id===o.id);this.groupToEdit.cards[r]=o,this.updateGroup(this.groupToEdit)},deleteCardFromGroup({card:o,group:e}){this.groupToEdit=JSON.parse(JSON.stringify(e));const r=this.groupToEdit.cards.findIndex(h=>h.id===o.id);this.groupToEdit.cards.splice(r,1),this.updateGroup(this.groupToEdit)},updateGroup(o){this.boardToEdit=JSON.parse(JSON.stringify(this.board));const e=this.boardToEdit.groups.findIndex(r=>r.id===o.id);this.boardToEdit.groups[e]=o,this.$store.dispatch({type:"saveBoard",board:this.boardToEdit})},updateBoard({key:o,val:e}){this.boardToEdit=JSON.parse(JSON.stringify(this.board)),this.boardToEdit[o]=e,this.$store.dispatch({type:"saveBoard",board:this.boardToEdit})},openCardDetailsModal(o){this.selectedCardIdx=this.board.groups.find(e=>e.id===o.group.id).cards.findIndex(e=>e.id===o.card.id),this.selectedCardGroupIdx=this.board.groups.findIndex(e=>e.id===o.group.id),this.isCardOpen=!0},closeDiag(){this.isCardOpen=!1},saveCopyToBoard(o){this.groupToEdit=JSON.parse(JSON.stringify(o.posCopy.group)),this.groupToEdit.cards.splice(o.posCopy.position-1,0,o.cardCopy),this.updateGroup(this.groupToEdit),P.emit("update board",o)},updateBoardDnd(o){this.$store.dispatch({type:"saveBoard",board:o})},updateBoardTitle(o){this.boardToEdit=JSON.parse(JSON.stringify(this.board)),this.saveActivity("renamed this board from ("+this.board.title+")"),this.boardToEdit.title=o,this.$store.dispatch({type:"saveBoard",board:this.boardToEdit})},isStarredBoard(o){this.boardToEdit=JSON.parse(JSON.stringify(this.board)),this.boardToEdit.isStarred=o,this.$store.dispatch({type:"saveBoard",board:this.boardToEdit})},changeBoardBgcColor(o){this.boardToEdit=JSON.parse(JSON.stringify(this.board)),this.saveActivity("changed the background of this board"),this.boardToEdit.background=o,this.boardToEdit.backgroundPhoto="",this.$store.dispatch({type:"saveBoard",board:this.boardToEdit})},changeBoardPhoto(o){this.boardToEdit=JSON.parse(JSON.stringify(this.board)),this.saveActivity("changed the background of this board"),this.boardToEdit.background="",this.boardToEdit.backgroundPhoto=o.full,this.boardToEdit.backgroundThumb=o.thumb,this.$store.dispatch({type:"saveBoard",board:this.boardToEdit})},saveActivity(o){this.loggedinUser&&(this.newActivity.byMember=this.loggedinUser),this.newActivity.txt=o,this.boardToEdit.activities.unshift(this.newActivity),this.newActivity=M.getEmptyActivity()},inviteUser(o){this.boardToEdit=JSON.parse(JSON.stringify(this.board)),this.boardToEdit.members.push(o),this.saveActivity(" added "+o.fullname+" to this board"),this.$store.dispatch({type:"saveBoard",board:this.boardToEdit})},removeMember(o){this.boardToEdit=JSON.parse(JSON.stringify(this.board));const e=this.boardToEdit.members.findIndex(r=>r._id===o._id);this.boardToEdit.members.splice(e,1),this.saveActivity(" removed "+o.fullname+" from this board"),this.$store.dispatch({type:"saveBoard",board:this.boardToEdit})},addTemplateBoard(o){this.loggedinUser&&(o.createdBy=this.loggedinUser,o.members.push(this.loggedinUser),this.newActivity.byMember=this.loggedinUser),o.isTemplate=!1,this.newActivity.txt="created this board",o.activities.push(this.newActivity),this.newActivity=M.getEmptyActivity(),this.$store.dispatch({type:"saveBoard",board:o}),console.log("board in save new board:",o)}},computed:{board(){return this.$store.getters.board},cardToShow(){return this.board.groups[this.selectedCardGroupIdx].cards[this.selectedCardIdx]},groupToShow(){return this.board.groups[this.selectedCardGroupIdx]},loggedinUser(){return this.$store.getters.loggedinUser}},watch:{"$route.params.boardId":{async handler(o){o&&(await this.$store.dispatch({type:"loadBoardById",newId:o}),this.loggedinUser&&(P.emit("watch board",o),P.emit("set-user-socket",this.loggedinUser._id)))},immediate:!0}}},vh={key:1,class:"dialog-container card-details-scroll"};function bh(o,e,r,h,i,s){const n=w("template-header"),a=w("board-header"),C=w("group-list"),v=w("card-details");return l(),d("section",null,[t("section",null,[s.board&&s.board.isTemplate?(l(),E(n,{key:0,board:s.board,onDuplicateTemplate:s.addTemplateBoard},null,8,["board","onDuplicateTemplate"])):c("",!0),s.board?(l(),E(a,{key:1,board:s.board,onTitleChange:s.updateBoardTitle,onStarredChange:s.isStarredBoard,onChangeBgcColor:s.changeBoardBgcColor,onChangeBoardBgc:s.changeBoardPhoto,onMakeMember:s.inviteUser,onRemoveInvitedUser:s.removeMember},null,8,["board","onTitleChange","onStarredChange","onChangeBgcColor","onChangeBoardBgc","onMakeMember","onRemoveInvitedUser"])):c("",!0)]),s.board?(l(),d("section",{key:0,class:"board-details-main",style:b({backgroundColor:s.board.background})},[D(C,{onSaveCopy:s.saveCopyToBoard,onBoardModified:s.updateBoard,onRemoveGroup:s.groupRemoveFromBoard,onOpenCardDetails:s.openCardDetailsModal,onGroupUpdated:s.updateGroup,groups:s.board.groups,board:s.board,newGroup:i.newGroup,onAddGroup:s.addNewGroup,onGroupDnd:s.updateBoardDnd},null,8,["onSaveCopy","onBoardModified","onRemoveGroup","onOpenCardDetails","onGroupUpdated","groups","board","newGroup","onAddGroup","onGroupDnd"])],4)):c("",!0),i.isCardOpen?(l(),d("section",vh,[D(v,{ref:"cardDetailsModal",class:"modal",onGroupUpdate:s.updateGroup,onDeleteCardFromGroup:s.deleteCardFromGroup,onBoardModified:s.updateBoard,onCardModified:s.updateCard,onCloseDialog:s.closeDiag,onSaveCopy:s.saveCopyToBoard,board:s.board,card:s.cardToShow,group:s.groupToShow},null,8,["onGroupUpdate","onDeleteCardFromGroup","onBoardModified","onCardModified","onCloseDialog","onSaveCopy","board","card","group"])])):c("",!0)])}var _h=y(gh,[["render",bh]]);const Ch={data(){return{user:{username:"",password:""}}},computed:{},methods:{goToSignup(){this.$router.push("/signup")},login(){!this.user.username||!this.user.password||(this.$store.dispatch({type:"login",user:this.user}),this.user={username:"",password:""},this.$router.push("/board"))}},components:{}},fh={class:"login-main-container flex"},yh=t("div",{class:"tasko-logo-login"},[t("img",{src:"https://res.cloudinary.com/dw85wdwsw/image/upload/v1648495274/ujlrratduzckpypdosan.jpg",alt:""}),t("h1",null,"Tasko")],-1),kh={class:"login-container"},wh=t("h1",null,"Log in to Tasko",-1),Th=t("a",null,"OR",-1),Eh=t("div",{class:"google-btn"},[t("img",{src:"https://d2k1ftgv7pobq7.cloudfront.net/meta/c/p/res/images/8215f6659adc202403198fef903a447e/sign-in-with-google.svg",alt:""}),t("span",null,"Continue with Google")],-1),Bh=t("hr",null,null,-1);function xh(o,e,r,h,i,s){return l(),d("section",fh,[yh,t("div",kh,[wh,_(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>i.user.username=n),placeholder:"Enter username",type:"text"},null,512),[[O,i.user.username]]),_(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>i.user.password=n),placeholder:"Enter password",type:"password",name:"password",autocomplete:"on"},null,512),[[O,i.user.password]]),t("button",{onClick:e[2]||(e[2]=(...n)=>s.login&&s.login(...n))},"Log in"),Th,Eh,Bh,t("p",{onClick:e[3]||(e[3]=(...n)=>s.goToSignup&&s.goToSignup(...n))},"Sign up for an account")])])}var Oh=y(Ch,[["render",xh]]);const Sh={data(){return{showPassword:!1,newUser:{fullname:"",username:"",password:""}}},computed:{},methods:{goToLogin(){this.$router.push("/login")},signup(){if(!this.newUser.fullname||!this.newUser.username||!this.newUser.password){console.log("sorry every input is required");return}this.$store.dispatch({type:"signup",user:this.newUser}),this.$router.push("/board"),this.newUser={fullname:"",username:"",password:""}},togglePassword(){this.showPassword=!this.showPassword;const o=this.$refs.password;o.getAttribute("type")==="password"?o.setAttribute("type","text"):o.setAttribute("type","password")}},components:{}},Mh={class:"signup-main-container flex"},Ah=t("div",{class:"tasko-logo-login"},[t("img",{src:"https://res.cloudinary.com/dw85wdwsw/image/upload/v1648495274/ujlrratduzckpypdosan.jpg",alt:""}),t("h1",null,"Tasko")],-1),Dh={class:"signup-container"},Lh=t("h1",null,"Sign up for your account",-1),Uh={"z-index":"0",class:"password-input"},Nh=t("button",{class:"signup-btn"},"Sign up",-1),Ih=t("a",null,"OR",-1),Fh=t("div",{class:"google-btn"},[t("img",{src:"https://d2k1ftgv7pobq7.cloudfront.net/meta/c/p/res/images/8215f6659adc202403198fef903a447e/sign-in-with-google.svg",alt:""}),t("span",null,"Continue with Google")],-1),Jh=t("hr",null,null,-1);function Ph(o,e,r,h,i,s){return l(),d("section",Mh,[Ah,t("form",{onSubmit:e[6]||(e[6]=u((...n)=>s.signup&&s.signup(...n),["prevent"])),action:"signup"},[t("div",Dh,[Lh,_(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>i.newUser.username=n),placeholder:"Enter username",type:"text"},null,512),[[O,i.newUser.username]]),_(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>i.newUser.fullname=n),placeholder:"Enter full name",type:"text"},null,512),[[O,i.newUser.fullname]]),t("div",Uh,[_(t("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>i.newUser.password=n),ref:"password",placeholder:"Enter password",type:"password",name:"password",autocomplete:"on"},null,512),[[O,i.newUser.password]]),i.showPassword?c("",!0):(l(),d("img",{key:0,onClick:e[3]||(e[3]=(...n)=>s.togglePassword&&s.togglePassword(...n)),src:"https://res.cloudinary.com/dw85wdwsw/image/upload/v1648544011/jsq38zvscccvdrfjjtr4.svg",alt:""})),i.showPassword?(l(),d("img",{key:1,onClick:e[4]||(e[4]=(...n)=>s.togglePassword&&s.togglePassword(...n)),src:"https://res.cloudinary.com/dw85wdwsw/image/upload/v1648544013/smt79blx0tym7pk2mwc4.svg",alt:""})):c("",!0)]),Nh,Ih,Fh,Jh,t("p",{onClick:e[5]||(e[5]=(...n)=>s.goToLogin&&s.goToLogin(...n))},"Already have an account? Log in")])],32)])}var Rh=y(Sh,[["render",Ph]]);const Gh=fe({history:ye("/"),routes:[{path:"/",name:"home",component:Bs},{path:"/board",name:"board-app",component:Ho},{path:"/board/:boardId",name:"board-details",component:_h},{path:"/login",name:"login",component:Oh},{path:"/signup",name:"signup",component:Rh}]}),jh="/api/";var Wh=Z.create({withCredentials:!0});const U={get(o,e){return W(o,"GET",e)},post(o,e){return W(o,"POST",e)},put(o,e){return W(o,"PUT",e)},delete(o,e){return W(o,"DELETE",e)}};async function W(o,e="GET",r=null){try{return(await Wh({url:`${jh}${o}`,method:e,data:r,params:e==="GET"?r:null})).data}catch(h){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${o}, with data:`,r),console.dir(h),h.response&&h.response.status,h}}const M={query:Vh,getById:zh,remove:Hh,getEmptyComment:$h,save:Kh,getEmptyCard:Yh,getEmptyGroup:Xh,getEmptyBoard:Qh,getEmptyActivity:qh,getEmptyTodo:Zh};async function Vh(){try{return await U.get("board")}catch(o){console.log("query err:",o)}}async function zh(o){try{return await U.get(`board/${o}`)}catch(e){console.log("getById err:",e)}}async function Hh(o){try{return await U.delete(`board/${o}`)}catch(e){console.log("remove err:",e)}}async function Kh(o){try{return o._id?await U.put(`board/${o._id}`,o):await U.post("board/",o)}catch(e){console.log("remove err:",e)}}function Zh(){return{id:I.makeId(),text:"",isComplete:!1}}function qh(){return{id:I.makeId(),txt:"",createdAt:Date.now(),byMember:{_id:"u101",fullname:"Guest User",username:"Guest User"},task:{}}}function $h(){return{id:I.makeId(),txt:"",createdAt:Date.now(),byMember:{_id:"u101",fullname:"Guest User",username:"Guest User"}}}function Yh(){return{id:I.makeId(),isComplete:!1,title:"",description:"",labels:[],createdAt:Date.now(),checklists:[],attachments:[],comments:[],cover:{},members:[],dueDate:"",isWatched:!1,props:{className:"card",style:{}}}}function Xh(){return{id:I.makeId(),title:"",cards:[],date:"",props:{orientation:"vertical",className:"card-container"}}}function Qh(){return{title:"",lastTimeWatched:Date.now(),createdAt:Date.now(),createdBy:{_id:"u101",fullname:"Guest User"},background:"",labels:[{id:"l101",title:"",color:"#61BD4F"},{id:"l102",title:"",color:"#F2D600"},{id:"l103",title:"",color:"#FF9F1A"},{id:"l104",title:"",color:"#EB5A46"},{id:"l105",title:"",color:"#C377E0"},{id:"l106",title:"",color:"#0079BF"}],members:[],groups:[],activities:[]}}const e1={props:{boards:{type:Array,required:!0}},methods:{closeModal(){this.$emit("close")},goToDetails(o){this.$emit("close"),this.$router.push(`/board/${o._id}`)}}},t1={class:"search-boards-modal"},s1={class:"search-boards-header"},o1=t("div",{class:"header-text-search-boards-modal"},[t("h1",null,"Boards")],-1),r1=t("span",{class:"icon-sm icon-closed"},null,-1),i1=[r1],l1={class:"modal-search-boards-list"},d1=["onClick"],a1={class:"modal-search-board"};function n1(o,e,r,h,i,s){return l(),d("div",t1,[t("div",s1,[o1,t("div",{class:"header-close-search-boards-modal",onClick:e[0]||(e[0]=(...n)=>s.closeModal&&s.closeModal(...n))},i1)]),t("div",l1,[(l(!0),d(B,null,x(r.boards,n=>(l(),d("div",{class:"boards-render-modal-search",onClick:a=>s.goToDetails(n),key:n._id},[t("div",{class:"board-background-search-modal",style:b(n.background?{backgroundColor:n.background}:{"background-image":`url(${n.backgroundThumb})`})},null,4),t("div",a1,g(n.title),1)],8,d1))),128))])])}var c1=y(e1,[["render",n1]]);const u1={name:"app-header",data(){return{openStarredModal:!1,openRecentModal:!1,openUserModal:!1,openTemplate:!1,openCreate:!1,openSearch:!1,pos:0,posRecent:0,posUser:0,posTemplate:0,posCreate:0,newBoard:M.getEmptyBoard(),newActivity:M.getEmptyActivity()}},methods:{onSetFilter(o){this.$store.commit({type:"setFilter",filterBy:o})},openSearchModal(){this.openSearch=!0},closeSearchModal(){this.openSearch=!1},openStarredBoardsModal(){this.openStarredModal=!0},closeEditMode(){this.openStarredModal=!1},openRecentBoardsModal(){this.openRecentModal=!0},closeRecentModal(){this.openRecentModal=!1},calcPosOfBox(){this.pos=this.$refs.starred.getBoundingClientRect(),this.posRecent=this.$refs.recent.getBoundingClientRect(),this.posUser=this.$refs.user.getBoundingClientRect(),this.posTemplate=this.$refs.template.getBoundingClientRect(),this.posCreate=this.$refs.create.getBoundingClientRect()},openLoggedInUserModal(){this.openUserModal=!0},closeUserModal(){this.openUserModal=!1},openTemplateModal(){this.openTemplate=!0},closeTemplate(){this.openTemplate=!1},openCreateModal(){this.openCreate=!0},closeCreateModal(){this.openCreate=!1},setMemberLetters(o){return o.split(" ").map(r=>r[0]).join("").toUpperCase()},saveNewBoard(o){!o.title||(this.loggedinUser&&(o.createdBy=this.loggedinUser,o.members.push(this.loggedinUser),this.newActivity.byMember=this.loggedinUser),this.newActivity.txt="created this board",o.activities.push(this.newActivity),o.isTemplate=!1,this.$store.dispatch({type:"saveBoard",board:o}),this.isEdit=!1,this.newBoard=M.getEmptyBoard(),this.isOnBoard&&this.$router.push("/board"))},lightenDarkenColor(o,e){if(o==="#0079BF")return"#0066A0";if(o==="#00AECC")return"#0092AB";if(o==="")return"rgba(0,0,0,.32)";var r=!1;o[0]=="#"&&(o=o.slice(1),r=!0);var h=parseInt(o,16),i=(h>>16)+e;i>255?i=255:i<0&&(i=0);var s=(h>>8&255)+e;s>255?s=255:s<0&&(s=0);var n=(h&255)+e;return n>255?n=255:n<0&&(n=0),(r?"#":"")+(n|s<<8|i<<16).toString(16)}},computed:{board(){return this.$store.getters.board},boards(){return this.$store.getters.boards},filteredBoards(){return this.$store.getters.filteredBoards},isOnBoard(){const{boardId:o}=this.$route.params;return o},loggedinUser(){return this.$store.getters.loggedinUser},async appHeaderColor(){if(this.board&&this.isOnBoard){if(this.board.backgroundPhoto){const o=new K;try{const e=await o.getColorAsync(this.board.backgroundPhoto);return this.$refs.appheader.style.backgroundColor=e.hex,e.hex}catch(e){console.log(e)}}this.board.background&&this.isOnBoard&&(this.$refs.appheader.style.backgroundColor=this.lightenDarkenColor(this.board.background,-20))}}},watch:{appHeaderColor:{async handler(o){this.$refs.appheader.style.backgroundColor=o}},isOnBoard:{async handler(o){o||(this.$refs.appheader.style.backgroundColor="#026AA7")}},loggedinUser:{async handler(o){}}},components:{search:ne,recentBoardsModal:st,starredBoardsModal:Ve,loggedInUserModal:vt,templateModal:Ot,createBoardModal:ce,searchModal:c1}},h1={class:"app-header-main",ref:"appheader"},p1=t("span",{class:"logo-img"},null,-1),m1=t("p",{class:"logo-txt"},"Tasko",-1),g1=S(" Recent "),v1=t("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),b1=[g1,v1],_1=S(" Starred "),C1=t("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),f1=[_1,C1],y1=S(" Templates "),k1=t("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),w1=[y1,k1],T1=S(" Create "),E1=t("svg",{width:"16",height:"16",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M11.2929 16.7071L4.22185 9.63606C3.83132 9.24554 3.83132 8.61237 4.22185 8.22185C4.61237 7.83133 5.24554 7.83133 5.63606 8.22185L12 14.5858L18.364 8.22185C18.7545 7.83132 19.3877 7.83132 19.7782 8.22185C20.1687 8.61237 20.1687 9.24554 19.7782 9.63606L12.7071 16.7071C12.3166 17.0977 11.6834 17.0977 11.2929 16.7071Z",fill:"currentColor"})],-1),B1=[T1,E1],x1={class:"search-nav"},O1=t("span",{class:"span-icon"},[t("svg",{width:"24",height:"24",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"currentColor"}),t("path",{d:"M11 11C11 10.4477 11.4477 10 12 10C12.5523 10 13 10.4477 13 11V16C13 16.5523 12.5523 17 12 17C11.4477 17 11 16.5523 11 16V11Z",fill:"currentColor"}),t("path",{d:"M13 8C13 8.55228 12.5523 9 12 9C11.4477 9 11 8.55228 11 8C11 7.44772 11.4477 7 12 7C12.5523 7 13 7.44772 13 8Z",fill:"currentColor"})])],-1),S1=t("span",{class:"span-icon"},[t("svg",{width:"24",height:"24",role:"presentation",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 2C11.4477 2 11 2.44772 11 3V3.078C10.2728 3.19668 9.65318 3.44603 9.1328 3.79295C8.39456 4.28511 7.91489 4.93416 7.60557 5.55279C7.29822 6.1675 7.14952 6.77011 7.07611 7.2106C7.039 7.43322 7.02007 7.62092 7.01035 7.75688C7.00549 7.82503 7.0029 7.88067 7.00153 7.92176C7.00085 7.94232 7.00046 7.95929 7.00025 7.9724L7.00005 7.98916L7.00001 7.99533L7 7.99786L7 7.99898C7 7.9995 7 8 8 8H7V11.723L4.14251 16.4855C3.95715 16.7944 3.95229 17.1792 4.1298 17.4927C4.30731 17.8062 4.63973 18 5 18H19C19.3603 18 19.6927 17.8062 19.8702 17.4927C20.0477 17.1792 20.0429 16.7944 19.8575 16.4855L17 11.723V8H16C17 8 17 7.9995 17 7.99898L17 7.99786L17 7.99533L17 7.98916L16.9997 7.9724C16.9995 7.95929 16.9992 7.94232 16.9985 7.92176C16.9971 7.88067 16.9945 7.82503 16.9896 7.75688C16.9799 7.62092 16.961 7.43322 16.9239 7.2106C16.8505 6.77011 16.7018 6.1675 16.3944 5.55279C16.0851 4.93416 15.6054 4.28511 14.8672 3.79295C14.3468 3.44603 13.7272 3.19668 13 3.078V3C13 2.44772 12.5523 2 12 2ZM9.00042 7.98839L9 8.00435V12C9 12.1812 8.95074 12.3591 8.85749 12.5145L6.76619 16H17.2338L15.1425 12.5145C15.0493 12.3591 15 12.1812 15 12V8.00436L14.9996 7.98839C14.999 7.97089 14.9977 7.9406 14.9947 7.89937C14.9888 7.81658 14.9765 7.69178 14.9511 7.5394C14.8995 7.22989 14.7982 6.8325 14.6056 6.44721C14.4149 6.06584 14.1446 5.71489 13.7578 5.45705C13.3773 5.20338 12.825 5 12 5C11.175 5 10.6227 5.20338 10.2422 5.45705C9.85544 5.71489 9.58511 6.06584 9.39443 6.44721C9.20178 6.8325 9.10048 7.22989 9.04889 7.5394C9.0235 7.69178 9.01118 7.81658 9.00527 7.89937C9.00233 7.9406 9.001 7.97089 9.00042 7.98839ZM14 19C14 20.1046 13.1046 21 12 21C10.8954 21 10 20.1046 10 19H14Z",fill:"currentColor"})])],-1);function M1(o,e,r,h,i,s){const n=w("router-link"),a=w("recent-boards-modal"),C=w("starred-boards-modal"),v=w("template-modal"),T=w("create-board-modal"),L=w("search"),p=w("search-modal"),m=w("logged-in-user-modal"),f=A("clickOutside");return l(),d("section",h1,[D(n,{to:"/board",class:"logo-box"},{default:F(()=>[p1,m1]),_:1}),t("a",{onClick:e[0]||(e[0]=j=>(s.openRecentBoardsModal(),s.calcPosOfBox())),class:"link",to:"/",ref:"recent"},b1,512),i.openRecentModal&&s.boards?_((l(),E(a,{key:0,boards:s.boards,style:b({top:"48px",left:i.posRecent.left+"px"}),onClose:s.closeRecentModal},null,8,["boards","style","onClose"])),[[f,s.closeRecentModal]]):c("",!0),t("a",{onClick:e[1]||(e[1]=j=>(s.openStarredBoardsModal(),s.calcPosOfBox())),ref:"starred",class:"link"},f1,512),i.openStarredModal&&s.boards?_((l(),E(C,{key:1,boards:s.boards,style:b({top:"48px",left:i.pos.left+"px"}),onClose:s.closeEditMode},null,8,["boards","style","onClose"])),[[f,s.closeEditMode]]):c("",!0),t("a",{class:"link",to:"/",onClick:e[2]||(e[2]=j=>(s.openTemplateModal(),s.calcPosOfBox())),ref:"template"},w1,512),i.openTemplate&&s.boards?_((l(),E(v,{key:2,boards:s.boards,style:b({top:"48px",left:i.posTemplate.left+"px"}),onClose:s.closeTemplate,onDuplicateTemplate:s.saveNewBoard},null,8,["boards","style","onClose","onDuplicateTemplate"])),[[f,s.closeTemplate]]):c("",!0),t("a",{class:"link",to:"/",onClick:e[3]||(e[3]=j=>(s.openCreateModal(),s.calcPosOfBox())),ref:"create"},B1,512),i.openCreate?_((l(),E(T,{key:3,style:b({top:"48px",left:i.posCreate.left+"px"}),newBoard:i.newBoard,onAdd:s.saveNewBoard,onClose:s.closeCreateModal},null,8,["style","newBoard","onAdd","onClose"])),[[f,s.closeCreateModal]]):c("",!0),t("span",x1,[D(L,{onSetFilter:s.onSetFilter,onClick:e[4]||(e[4]=j=>s.openSearchModal())},null,8,["onSetFilter"]),O1,S1,i.openSearch?_((l(),E(p,{key:0,boards:s.filteredBoards,style:{top:"48px",right:"4px"},onClose:s.closeSearchModal},null,8,["boards","onClose"])),[[f,s.closeSearchModal]]):c("",!0),t("div",{onClick:e[5]||(e[5]=j=>(s.openLoggedInUserModal(),s.calcPosOfBox())),ref:"user",class:"user-avatar-in-app-header"},g(s.loggedinUser?s.setMemberLetters(s.loggedinUser.fullname):"GU"),513),i.openUserModal?_((l(),E(m,{key:1,boards:s.boards,style:{top:"48px",right:0},onClose:s.closeUserModal},null,8,["boards","onClose"])),[[f,s.closeUserModal]]):c("",!0)])],512)}var A1=y(u1,[["render",M1]]);const D1={name:"app",async created(){await this.$store.dispatch({type:"loadBoards"})},methods:{},computed:{boards(){return this.$store.getters.boards},board(){return this.$store.getters.board},isOnBoard(){const{boardId:o}=this.$route.params;return o}},components:{appHeader:A1}};function L1(o,e,r,h,i,s){const n=w("app-header"),a=w("router-view");return l(),d("section",{class:"app-main",style:b(s.board&&s.isOnBoard&&s.board.backgroundPhoto?{"background-image":`url(${s.board.backgroundPhoto})`,"background-repeat":"no-repeat","background-size":"cover"}:null)},[this.$route.name!=="home"&&this.$route.name!=="login"&&this.$route.name!=="signup"?(l(),E(n,{key:0})):c("",!0),D(a)],4)}var U1=y(D1,[["render",L1]]),N1={state:{boards:null,selectedBoard:null,filterBy:{txt:""},loggedinUser:N.getLoggedinUser()},getters:{board(o){return o.selectedBoard},boards(o){return o.boards.filter(e=>e.members.some(r=>r._id===o.loggedinUser._id))},starredBoards(o){return o.boards.filter(e=>e.isStarred&&e.members.some(r=>r._id===o.loggedinUser._id))},recentlyBoards(o){return JSON.parse(JSON.stringify(o.boards)).filter(h=>!h.isTemplate&&h.members.some(i=>i._id===o.loggedinUser._id)).sort((h,i)=>i.lastTimeWatched-h.lastTimeWatched)},templates(o){return o.boards.filter(e=>e.isTemplate)},categoryBusiness(o){return o.boards.filter(e=>e.category==="business"&&e.isTemplate)},categoryDesign(o){return o.boards.filter(e=>e.category==="design"&&e.isTemplate)},categoryEducation(o){return o.boards.filter(e=>e.category==="education"&&e.isTemplate)},categoryLifestyle(o){return o.boards.filter(e=>e.category==="lifestyle"&&e.isTemplate)},allActivities(o){var e=[];return o.boards.forEach(r=>r.activities.forEach(h=>e.unshift(h))),e},filteredBoards(o){if(!o.filterBy.txt)return o.boards.filter(e=>!e.isTemplate);if(o.filterBy.txt){const e=new RegExp(o.filterBy.txt,"i");return o.boards.filter(r=>e.test(r.title)&&!r.isTemplate)}},loggedinUserBoards(o){return o.boards.filter(e=>e.createdBy._id===o.loggedinUser._id)}},mutations:{setBoards(o,{boards:e}){o.boards=e},setBoard(o,{board:e}){o.selectedBoard=e},removeBoard(o,{id:e}){const r=o.boards.findIndex(h=>h._id===e);o.boards.splice(r,1)},saveBoard(o,{board:e}){const r=o.boards.findIndex(h=>h._id===e._id);r!==-1?o.boards.splice(r,1,e):o.boards.push(e)},setFilter(o,{filterBy:e}){o.filterBy=e}},actions:{async loadBoards({commit:o,state:e}){try{const r=await M.query();o({type:"setBoards",boards:r})}catch{console.log("err")}},async loadBoardById({commit:o},{newId:e}){try{const r=await M.getById(e);o({type:"setBoard",board:r})}catch{console.log("err!!")}},async removeBoard({commit:o},{id:e}){try{await M.remove(e),o({type:"removeBoard",id:e})}catch{console.log("err!!")}},async saveBoard({commit:o},{board:e}){if(!e.isTemplate)try{e._id&&o({type:"setBoard",board:e});const r=await M.save(e);o({type:"saveBoard",board:r})}catch{console.log("sorry user connot do that!!!")}}}},I1={state:{loggedinUser:N.getLoggedinUser(),users:[],watchedUser:null},getters:{loggedinUser({loggedinUser:o}){return o},users({users:o}){return o},watchedUser({watchedUser:o}){return o}},mutations:{login(o,{user:e}){o.loggedinUser=e?H({},e):null},logout(o){o.loggedinUser=null},setUsers(o,{users:e}){o.users=e},setWatchedUser(o,{user:e}){o.watchedUser=e},removeUser(o,{userId:e}){o.users=o.users.filter(r=>r._id!==e)}},actions:{async login({commit:o},{user:e}){console.log("user:",e);try{const r=await N.login(e);o({type:"login",user:r})}catch{console.log("err")}},async logout({commit:o}){try{await N.logout(),o({type:"logout"})}catch{console.log("err")}},async signup({commit:o},{user:e}){try{const r=await N.signup(e);o({type:"login",newUser:r})}catch{console.log("err")}},async loadUsers({commit:o}){try{const e=await N.getUsers();o({type:"setUsers",users:e})}catch(e){throw console.log("userStore: Error in loadUsers",e),e}},async loadAndWatchUser({commit:o},{userId:e}){try{const r=await N.getById(e);o({type:"setWatchedUser",user:r}),console.log("user:",r),socketService.off(SOCKET_EVENT_USER_UPDATED),socketService.on(SOCKET_EVENT_USER_UPDATED,h=>{o({type:"setWatchedUser",user:h})})}catch(r){throw console.log("userStore: Error in loadAndWatchUser",r),r}},async removeUser({commit:o},{userId:e}){try{await N.remove(e),o({type:"removeUser",userId:e})}catch(r){throw console.log("userStore: Error in removeUser",r),r}},async updateUser({commit:o},{user:e}){try{e=await N.update(e),o({type:"setUser",user:e})}catch(r){throw console.log("userStore: Error in updateUser",r),r}}}};const F1=ke({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{boardStore:N1,userStore:I1}});const J1={mounted:o=>{o.focus()}};const R=we(U1);R.directive("clickOutside",Te.directive);R.directive("focus",J1);R.component("datepicker",Ee);R.use(Be);R.use(Gh);R.use(F1);R.mount("#app");
