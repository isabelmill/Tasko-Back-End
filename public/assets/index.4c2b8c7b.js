import{r as m,a as F,o as c,c as p,b as o,w as f,d as v,e as g,f as u,g as T,v as B,h as k,F as S,i as C,j as w,k as N,l as x,t as _,m as E,n as O,p as V,q as I,s as A,u as L,x as P}from"./vendor.89793b91.js";const U=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}};U();var y=(t,e)=>{const r=t.__vccOpts||t;for(const[i,s]of e)r[i]=s;return r};const q={},R={class:"main-header flex items-center justify-between"},M={class:"logo uppercase"},z=u("Toys"),H=[z],j={class:"flex gap-1"},J=u("Home"),W=u("Toys");function K(t,e){const r=m("router-link"),i=F("rainbow");return c(),p("header",R,[o("div",M,[f((c(),p("h2",null,H)),[[i]])]),o("nav",j,[v(r,{class:"link",to:"/"},{default:g(()=>[J]),_:1}),v(r,{class:"link",to:"/toy"},{default:g(()=>[W]),_:1})])])}var Y=y(q,[["render",K]]);const G={name:"app",created(){this.$store.dispatch({type:"loadToys"})},methods:{},components:{appHeader:Y}},Q={class:"app-container container"};function X(t,e,r,i,s,n){const l=m("app-header"),d=m("router-view");return c(),p("section",Q,[v(l),v(d)])}var Z=y(G,[["render",X]]);const ee={name:"home"},te=o("h1",null,"Hello User",-1),oe=[te];function se(t,e,r,i,s,n){return c(),p("section",null,oe)}var ne=y(ee,[["render",se]]);const $="/api/toy/",h={query:re,getById:le,remove:ie,save:ae,getEmptyToy:ce};function re(t){return T.get($,{params:t}).then(e=>e.data)}function le(t){return T.get($+t).then(e=>e.data)}function ie(t){return T.delete($+t).then(e=>e.data)}function ae(t){return t._id?T.put($+t._id,t).then(e=>e.data):T.post($,t).then(e=>e.data)}function ce(t=Date.now()){return{name:"",price:"",type:"",createdAt:t,inStock:!0}}const ue={name:"toy-filter",data(){return{value:"amir",filterBy:{name:"",inStock:"",labels:[],sortBy:""},labels:["for","each","map","reduce"]}},methods:{setFilter(){this.$emit("setFilter",JSON.parse(JSON.stringify(this.filterBy)))}}},de={class:"toy-filter"},pe=u(" Stock: "),ye=o("option",{value:""},"All",-1),_e=o("option",{value:"true"},"In stock",-1),me=o("option",{value:"false"},"Not in stock",-1),fe=[ye,_e,me],he=u(" Labels: "),ve=N('<option value="On wheels">On wheels</option><option value="Box game">Box game</option><option value="Art">Art</option><option value="Baby">Baby</option><option value="Doll">Doll</option><option value="Puzzle">Puzzle</option><option value="Outdoor">Outdoor</option>',7),be=[ve],ge=u(" Sort By: "),Te=o("option",{value:"time"},"Time",-1),$e=o("option",{value:"name"},"Name",-1),ke=o("option",{value:"price"},"Price",-1),xe=[Te,$e,ke];function Be(t,e,r,i,s,n){const l=m("el-option"),d=m("el-select"),D=F("focus");return c(),p("section",de,[v(d,{modelValue:s.filterBy.labels,"onUpdate:modelValue":e[0]||(e[0]=a=>s.filterBy.labels=a),multiple:"",filterable:"","allow-create":"","default-first-option":"","reserve-keyword":!1,placeholder:"Choose tags for your article"},{default:g(()=>[(c(!0),p(S,null,C(s.labels,a=>(c(),w(l,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),f(o("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>s.filterBy.name=a),onInput:e[2]||(e[2]=(...a)=>n.setFilter&&n.setFilter(...a)),type:"text",class:"form-input",placeholder:"Search toy name..."},null,544),[[D],[B,s.filterBy.name]]),o("label",null,[pe,f(o("select",{onChange:e[3]||(e[3]=(...a)=>n.setFilter&&n.setFilter(...a)),"onUpdate:modelValue":e[4]||(e[4]=a=>s.filterBy.inStock=a),class:"form-input"},fe,544),[[k,s.filterBy.inStock]])]),o("label",null,[he,f(o("select",{onChange:e[5]||(e[5]=(...a)=>n.setFilter&&n.setFilter(...a)),multiple:"","onUpdate:modelValue":e[6]||(e[6]=a=>s.filterBy.labels=a),class:"form-input"},be,544),[[k,s.filterBy.labels]]),o("label",null,[ge,f(o("select",{onChange:e[7]||(e[7]=(...a)=>n.setFilter&&n.setFilter(...a)),"onUpdate:modelValue":e[8]||(e[8]=a=>s.filterBy.sortBy=a),class:"form-input"},xe,544),[[k,s.filterBy.sortBy]])])])])}var we=y(ue,[["render",Be]]);const Ee={},Fe={class:"custom-card flex flex-col gap-1 items-center"};function Se(t,e){return c(),p("article",Fe,[o("header",null,[x(t.$slots,"header",{},void 0,!0)]),o("main",null,[x(t.$slots,"default",{},void 0,!0)]),o("footer",null,[x(t.$slots,"footer",{},void 0,!0)])])}var Ce=y(Ee,[["render",Se],["__scopeId","data-v-7cb9ee0a"]]);const De={name:"toy-preview",props:{toy:Object},components:{customCard:Ce},methods:{goToDetails(){this.$router.push(`/toy/${this.toy._id}`)},goToEdit(){this.$router.push(`/toy/edit/${this.toy._id}`)},removeToy(t){this.$emit("removeToy",t)},labels(){return this.toy.labels}}},Ne={class:"toy-preview"},Oe=o("span",{class:"fw-bold"},"Name:",-1),Ve=o("span",{class:"fw-bold"},"Price:",-1),Ie={class:"btn-group"};function Ae(t,e,r,i,s,n){const l=m("custom-card");return c(),p("li",Ne,[v(l,null,{header:g(()=>[o("p",null,[Oe,u(" "+_(r.toy.name),1)]),o("p",null,[Ve,u(" "+_(r.toy.price)+"$ ",1)])]),footer:g(()=>[o("div",Ie,[o("button",{onClick:e[0]||(e[0]=(...d)=>n.goToEdit&&n.goToEdit(...d)),class:"btn btn-primary"},"edit"),o("button",{onClick:e[1]||(e[1]=(...d)=>n.goToDetails&&n.goToDetails(...d)),class:"btn btn-info"},"details"),o("button",{onClick:e[2]||(e[2]=d=>n.removeToy(r.toy._id)),class:"btn btn-danger"},"delete")])]),_:1})])}var Le=y(De,[["render",Ae]]);const Pe={props:{toys:{type:Array,required:!0}},components:{toyPreview:Le},methods:{removeToy(t){console.log("toyId-in toy list:",t),this.$emit("removeToy",t)}}},Ue={class:"toy-list clean-list grid gap-1"};function qe(t,e,r,i,s,n){const l=m("toy-preview");return c(),p("ul",Ue,[(c(!0),p(S,null,C(r.toys,d=>(c(),w(l,{onRemoveToy:n.removeToy,toy:d,key:d._id},null,8,["onRemoveToy","toy"]))),128))])}var Re=y(Pe,[["render",qe]]);const Me={name:"toy-app",data(){return{filterBy:null}},computed:{toys(){return this.$store.getters.toys}},methods:{loadToys(){h.query().then(t=>this.toys=t)},setFilter(t){this.$store.dispatch({type:"filter",filterBy:t})},goToEdit(){this.$router.push("/toy/edit")},removeToy(t){console.log("toyId-in toy-app:",t),this.$store.dispatch({type:"removeToy",id:t})}},components:{toyList:Re,toyFilter:we}},ze={class:"toy-app container flex flex-col gap-1"},He=o("h1",null,"Toys",-1);function je(t,e,r,i,s,n){const l=m("toy-filter"),d=m("toy-list");return c(),p("section",ze,[He,v(l,{onSetFilter:n.setFilter},null,8,["onSetFilter"]),n.toys?(c(),w(d,{key:0,onRemoveToy:n.removeToy,toys:n.toys},null,8,["onRemoveToy","toys"])):E("",!0)])}var Je=y(Me,[["render",je]]);const We={name:"toy-detail",data(){return{toy:null}},created(){const{_id:t}=this.$route.params;h.getById(t).then(e=>{this.toy=e})},methods:{goBack(){this.$router.push("/toy")}}},Ke={key:0,class:"toy-details flex flex-col items-center gap-2"},Ye=o("span",{class:"fw-bold"},"ID:",-1),Ge=o("span",{class:"fw-bold"},"Name:",-1),Qe=o("span",{class:"fw-bold"},"Price:",-1),Xe=o("span",{class:"fw-bold"},"Labels:",-1),Ze=o("span",{class:"fw-bold"},"Availability:",-1),et=o("span",{class:"fw-bold"},"When created:",-1),tt=o("h2",null,"Reviews:",-1);function ot(t,e,r,i,s,n){return s.toy?(c(),p("section",Ke,[o("article",null,[o("p",null,[Ye,u(" "+_(s.toy._id),1)]),o("p",null,[Ge,u(" "+_(s.toy.name),1)]),o("p",null,[Qe,u(" "+_(s.toy.price)+"$ ",1)]),o("p",null,[Xe,u(" "+_(s.toy.labels),1)]),o("p",null,[Ze,u(" "+_(s.toy.inStock?"In stock":"Not in stock"),1)]),o("p",null,[et,u(" "+_(s.toy.createdAt),1)])]),o("button",{onClick:e[0]||(e[0]=(...l)=>n.goBack&&n.goBack(...l)),class:"btn btn-primary"},"go back"),tt,o("p",null,_(s.toy.reviews),1)])):E("",!0)}var st=y(We,[["render",ot]]);const nt={name:"toy-edit",data(){return{toyToEdit:null}},created(){const{_id:t}=this.$route.params;t?h.getById(t).then(e=>{this.toyToEdit=e}):(console.log("we dont have id"),this.toyToEdit=h.getEmptyToy())},methods:{goBack(){this.$router.push("/toy")},saveToy(){this.$store.dispatch({type:"saveToy",toy:this.toyToEdit}).then(()=>{this.$router.push("/toy")})}}},rt={key:0,class:"toy-edit py-2"},lt={class:"form-control"},it=o("label",{for:"txt",class:"form-label"},"Toy Name",-1),at={class:"form-control"},ct=o("label",{for:"price",class:"form-label"},"Toy Price",-1),ut={class:"btn-group"};function dt(t,e,r,i,s,n){return s.toyToEdit?(c(),p("section",rt,[o("form",{onSubmit:e[4]||(e[4]=O((...l)=>n.saveToy&&n.saveToy(...l),["prevent"])),class:"form"},[o("div",lt,[it,f(o("input",{required:"","onUpdate:modelValue":e[0]||(e[0]=l=>s.toyToEdit.name=l),id:"txt",type:"text",class:"form-input",placeholder:"Enter your toy name here..."},null,512),[[B,s.toyToEdit.name]])]),o("div",at,[ct,f(o("input",{required:"","onUpdate:modelValue":e[1]||(e[1]=l=>s.toyToEdit.price=l),id:"price",type:"number",class:"form-input"},null,512),[[B,s.toyToEdit.price,void 0,{number:!0}]])]),o("div",ut,[o("button",{onClick:e[2]||(e[2]=(...l)=>n.saveToy&&n.saveToy(...l)),class:"btn btn-info"},"save"),o("button",{onClick:e[3]||(e[3]=(...l)=>n.goBack&&n.goBack(...l)),class:"btn btn-danger-text"},"go back")])],32)])):E("",!0)}var pt=y(nt,[["render",dt]]);const yt=V({history:I("/"),routes:[{path:"/",name:"home",component:ne},{path:"/toy",name:"toy-app",component:Je},{path:"/toy/:_id",name:"toy-details",component:st},{path:"/toy/edit/:_id?",name:"toy-edit",component:pt}]});var _t={state:{toys:null,filterBy:null},getters:{toys(t){return t.toys}},mutations:{setToys(t,{toys:e}){t.toys=e},removeToy(t,{id:e}){const r=t.toys.findIndex(i=>i._id===e);t.toys.splice(r,1)},saveToy(t,{toy:e}){console.log("res",e);const r=t.toys.findIndex(i=>i._id===e._id);console.log("idx",r),r!==-1?t.toys.splice(r,1,e):t.toys.push(e)},setFilter(t,{filterBy:e}){t.filterBy=e}},actions:{loadToys({commit:t,state:e}){h.query(e.filterBy).then(r=>{t({type:"setToys",toys:r})})},removeToy({commit:t},{id:e}){h.remove(e).then(()=>{t({type:"removeToy",id:e})})},saveToy({commit:t},{toy:e}){h.save(e).then(r=>{console.log("res",r),t({type:"saveToy",toy:r})})},filter({commit:t,dispatch:e},{filterBy:r}){t({type:"setFilter",filterBy:r}),e({type:"loadToys"})}}};const mt=A({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{toyStore:_t}}),ft={mounted:t=>{t.focus()}},ht={mounted(t){t.onkeyup=()=>{const e=gt();t.style.backgroundColor=e,t.style.color=bt(e)?"white":"black"}}},vt={mounted(t,e){const r=e.arg,i=e.value;t.addEventListener(r,i)}};function bt(t){t=t.substring(1);const e=parseInt(t,16),r=e>>16&255,i=e>>8&255,s=e>>0&255;var n=.2126*r+.7152*i+.0722*s;return n<100}function gt(){const t="0123456789ABCDEF";let e="#";for(let r=0;r<6;r++)e+=t[Math.floor(Math.random()*16)];return e}const b=L(Z);b.directive("focus",ft);b.directive("rainbow",ht);b.directive("custom-on",vt);b.use(yt);b.use(mt);b.use(P);b.mount("#app");
